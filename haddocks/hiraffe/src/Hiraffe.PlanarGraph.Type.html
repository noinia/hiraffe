<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-2"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-3"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- Module      :  Hiraffe.PlanarGraph.Type</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- Copyright   :  (C) Frank Staals</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- License     :  see the LICENSE file</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- Maintainer  :  Frank Staals</span><span>
</span><span id="line-8"></span><span class="hs-comment">--</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- Data type for representing possibly disconnected planar graphs</span><span>
</span><span id="line-10"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-11"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Hiraffe.PlanarGraph.Type</span><span>
</span><span id="line-12"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier">PlanarGraph</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier">Component</span></a></span><span>
</span><span id="line-14"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#components"><span class="hs-identifier">components</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#rawDartData"><span class="hs-identifier">rawDartData</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#rawFaceData"><span class="hs-identifier">rawFaceData</span></a></span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#component"><span class="hs-identifier">component</span></a></span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#fromConnected%27"><span class="hs-identifier">fromConnected'</span></a></span><span>
</span><span id="line-18"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#asLocalD"><span class="hs-identifier">asLocalD</span></a></span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#asLocalV"><span class="hs-identifier">asLocalV</span></a></span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.html"><span class="hs-identifier">Control.Lens</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Plated.html#holes"><span class="hs-identifier">holes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Traversal.html#holesOf"><span class="hs-identifier">holesOf</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Setter.html#.%3D"><span class="hs-operator">(.=)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Coerce</span></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">F</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/semigroupoids-6.0.1-36d342cde7a7497254e75243ba69a20ee3a483aa51faffba18f9136870dc1519/share/doc/html/src/Data.Functor.Apply.html"><span class="hs-identifier">Data.Functor.Apply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/semigroupoids-6.0.1-36d342cde7a7497254e75243ba69a20ee3a483aa51faffba18f9136870dc1519/share/doc/html/src/Data.Functor.Bind.Class.html#Apply"><span class="hs-identifier">Apply</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/semigroupoids-6.0.1-36d342cde7a7497254e75243ba69a20ee3a483aa51faffba18f9136870dc1519/share/doc/html/src/Data.Functor.Apply.html"><span class="hs-identifier">Data.Functor.Apply</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Apply</span></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromMaybe</span></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/semigroupoids-6.0.1-36d342cde7a7497254e75243ba69a20ee3a483aa51faffba18f9136870dc1519/share/doc/html/src/Data.Semigroup.Traversable.html"><span class="hs-identifier">Data.Semigroup.Traversable</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Sequence</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Seq</span></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.html"><span class="hs-identifier">Data.Vector.NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier">NonEmptyVector</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.html"><span class="hs-identifier">Data.Vector.NonEmpty</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NonEmptyV</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">GHC.Generics</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Hiraffe.Graph.Class.html"><span class="hs-identifier">Hiraffe.Graph.Class</span></a></span><span>
</span><span id="line-39"></span><span class="hs-comment">-- import           Hiraffe.Graph.Component</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html"><span class="hs-identifier">Hiraffe.PlanarGraph.Class</span></a></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html"><span class="hs-identifier">Hiraffe.PlanarGraph.Component</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.html"><span class="hs-identifier">Hiraffe.PlanarGraph.Connected</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#CPlanarGraph"><span class="hs-identifier">CPlanarGraph</span></a></span><span>
</span><span id="line-43"></span><span>                                               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#VertexIdIn"><span class="hs-identifier">VertexIdIn</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#VertexId"><span class="hs-identifier">VertexId</span></a></span><span>
</span><span id="line-44"></span><span>                                               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#FaceIdIn"><span class="hs-identifier">FaceIdIn</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#FaceId"><span class="hs-identifier">FaceId</span></a></span><span>
</span><span id="line-45"></span><span>                                               </span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html"><span class="hs-identifier">Hiraffe.PlanarGraph.Connected.Core</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Core</span></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Instance.html"><span class="hs-identifier">Hiraffe.PlanarGraph.Connected.Instance</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Dart.html"><span class="hs-identifier">Hiraffe.PlanarGraph.Dart</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Dart</span></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Hiraffe.PlanarGraph.World.html"><span class="hs-identifier">Hiraffe.PlanarGraph.World</span></a></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span class="hs-comment">-- type Component' (s :: k)</span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-comment">-- | A connected component.</span><span>
</span><span id="line-56"></span><span class="hs-comment">--</span><span>
</span><span id="line-57"></span><span class="hs-comment">-- For every face f, and every hole in this face, the facedata points to a dart</span><span>
</span><span id="line-58"></span><span class="hs-comment">-- d on the hole s.t. this dart has the face f on its left. i.e.</span><span>
</span><span id="line-59"></span><span class="hs-comment">-- leftFace d = f</span><span>
</span><span id="line-60"></span><span class="hs-keyword">type</span><span> </span><span id="Component"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-var">Component</span></a></span></span><span> </span><span id="local-6989586621679225062"><span id="local-6989586621679225063"><span class="annot"><a href="#local-6989586621679225063"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679225064"><span class="annot"><a href="#local-6989586621679225064"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679225062"><span class="hs-identifier hs-type">k</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#CPlanarGraph"><span class="hs-identifier hs-type">CPlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679225063"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Wrap"><span class="hs-identifier hs-type">Wrap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679225064"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#VertexId"><span class="hs-identifier hs-type">VertexId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679225064"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Dart.html#Dart"><span class="hs-identifier hs-type">Dart.Dart</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679225064"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#FaceId"><span class="hs-identifier hs-type">FaceId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679225064"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="hs-comment">-- | A PlanarGraph is essentially a bunch of connected Planargraphs; one for every</span><span>
</span><span id="line-63"></span><span class="hs-comment">-- connected component. These graphs store the global ID's (darts, vertexId's, faceId's)</span><span>
</span><span id="line-64"></span><span class="hs-comment">-- in their data values. This essentially gives us a mapping between the two.</span><span>
</span><span id="line-65"></span><span class="hs-comment">--</span><span>
</span><span id="line-66"></span><span class="hs-comment">-- note that a face may actually occur in multiple graphs, hence when we store</span><span>
</span><span id="line-67"></span><span class="hs-comment">-- the edges to the the holes, we store the global edgeId's rather than the</span><span>
</span><span id="line-68"></span><span class="hs-comment">-- 'local' edgeId (dart)'s.</span><span>
</span><span id="line-69"></span><span class="hs-comment">--</span><span>
</span><span id="line-70"></span><span class="hs-comment">-- invariants:</span><span>
</span><span id="line-71"></span><span class="hs-comment">--    - the outerface has faceId 0</span><span>
</span><span id="line-72"></span><span class="hs-comment">--    - the local and global orientation of the darts is consistent</span><span>
</span><span id="line-73"></span><span class="hs-keyword">data</span><span> </span><span id="PlanarGraph"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-var">PlanarGraph</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679224253"><span class="annot"><a href="#local-6989586621679224253"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.World.html#World"><span class="hs-identifier hs-type">World</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679224254"><span class="annot"><a href="#local-6989586621679224254"><span class="hs-identifier hs-type">s</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679224252"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679224255"><span class="annot"><a href="#local-6989586621679224255"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621679224256"><span class="annot"><a href="#local-6989586621679224256"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621679224257"><span class="annot"><a href="#local-6989586621679224257"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PlanarGraph"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-var">PlanarGraph</span></a></span></span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="_components"><span class="annot"><span class="annottext">forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f -&gt; NonEmptyVector (Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#_components"><span class="hs-identifier hs-var hs-var">_components</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224253"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224254"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_rawVertexData"><span class="annot"><span class="annottext">forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (VertexIx (Component w s)) v)
</span><a href="Hiraffe.PlanarGraph.Type.html#_rawVertexData"><span class="hs-identifier hs-var hs-var">_rawVertexData</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224254"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#VertexIx"><span class="hs-identifier hs-type">VertexIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224253"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224254"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679224255"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_rawDartData"><span class="annot"><span class="annottext">forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (DartIx (Component w s)) e)
</span><a href="Hiraffe.PlanarGraph.Type.html#_rawDartData"><span class="hs-identifier hs-var hs-var">_rawDartData</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224254"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224253"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224254"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679224256"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_rawFaceData"><span class="annot"><span class="annottext">forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f -&gt; NonEmptyVector (RawFace s f)
</span><a href="Hiraffe.PlanarGraph.Type.html#_rawFaceData"><span class="hs-identifier hs-var hs-var">_rawFaceData</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#RawFace"><span class="hs-identifier hs-type">RawFace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224254"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224257"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679225071"><span id="local-6989586621679225077"><span class="annot"><span class="annottext">(forall a b.
 (a -&gt; b) -&gt; PlanarGraph w s v e a -&gt; PlanarGraph w s v e b)
-&gt; (forall a b.
    a -&gt; PlanarGraph w s v e b -&gt; PlanarGraph w s v e a)
-&gt; Functor (PlanarGraph w s v e)
forall a b. a -&gt; PlanarGraph w s v e b -&gt; PlanarGraph w s v e a
forall a b.
(a -&gt; b) -&gt; PlanarGraph w s v e a -&gt; PlanarGraph w s v e b
forall (w :: World) k (s :: k) v e a b.
a -&gt; PlanarGraph w s v e b -&gt; PlanarGraph w s v e a
forall (w :: World) k (s :: k) v e a b.
(a -&gt; b) -&gt; PlanarGraph w s v e a -&gt; PlanarGraph w s v e b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall (w :: World) k (s :: k) v e a b.
(a -&gt; b) -&gt; PlanarGraph w s v e a -&gt; PlanarGraph w s v e b
fmap :: forall a b.
(a -&gt; b) -&gt; PlanarGraph w s v e a -&gt; PlanarGraph w s v e b
$c&lt;$ :: forall (w :: World) k (s :: k) v e a b.
a -&gt; PlanarGraph w s v e b -&gt; PlanarGraph w s v e a
&lt;$ :: forall a b. a -&gt; PlanarGraph w s v e b -&gt; PlanarGraph w s v e a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span id="local-6989586621679225083"><span id="local-6989586621679225085"><span class="annot"><span class="annottext">(forall x. PlanarGraph w s v e f -&gt; Rep (PlanarGraph w s v e f) x)
-&gt; (forall x.
    Rep (PlanarGraph w s v e f) x -&gt; PlanarGraph w s v e f)
-&gt; Generic (PlanarGraph w s v e f)
forall x. Rep (PlanarGraph w s v e f) x -&gt; PlanarGraph w s v e f
forall x. PlanarGraph w s v e f -&gt; Rep (PlanarGraph w s v e f) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall (w :: World) k (s :: k) v e f x.
Rep (PlanarGraph w s v e f) x -&gt; PlanarGraph w s v e f
forall (w :: World) k (s :: k) v e f x.
PlanarGraph w s v e f -&gt; Rep (PlanarGraph w s v e f) x
$cfrom :: forall (w :: World) k (s :: k) v e f x.
PlanarGraph w s v e f -&gt; Rep (PlanarGraph w s v e f) x
from :: forall x. PlanarGraph w s v e f -&gt; Rep (PlanarGraph w s v e f) x
$cto :: forall (w :: World) k (s :: k) v e f x.
Rep (PlanarGraph w s v e f) x -&gt; PlanarGraph w s v e f
to :: forall x. Rep (PlanarGraph w s v e f) x -&gt; PlanarGraph w s v e f
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">,</span><span id="local-6989586621679225092"><span id="local-6989586621679225105"><span id="local-6989586621679225109"><span class="annot"><span class="annottext">Int -&gt; PlanarGraph w s v e f -&gt; ShowS
[PlanarGraph w s v e f] -&gt; ShowS
PlanarGraph w s v e f -&gt; String
(Int -&gt; PlanarGraph w s v e f -&gt; ShowS)
-&gt; (PlanarGraph w s v e f -&gt; String)
-&gt; ([PlanarGraph w s v e f] -&gt; ShowS)
-&gt; Show (PlanarGraph w s v e f)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall (w :: World) k (s :: k) v e f.
(Show v, Show e, Show f) =&gt;
Int -&gt; PlanarGraph w s v e f -&gt; ShowS
forall (w :: World) k (s :: k) v e f.
(Show v, Show e, Show f) =&gt;
[PlanarGraph w s v e f] -&gt; ShowS
forall (w :: World) k (s :: k) v e f.
(Show v, Show e, Show f) =&gt;
PlanarGraph w s v e f -&gt; String
$cshowsPrec :: forall (w :: World) k (s :: k) v e f.
(Show v, Show e, Show f) =&gt;
Int -&gt; PlanarGraph w s v e f -&gt; ShowS
showsPrec :: Int -&gt; PlanarGraph w s v e f -&gt; ShowS
$cshow :: forall (w :: World) k (s :: k) v e f.
(Show v, Show e, Show f) =&gt;
PlanarGraph w s v e f -&gt; String
show :: PlanarGraph w s v e f -&gt; String
$cshowList :: forall (w :: World) k (s :: k) v e f.
(Show v, Show e, Show f) =&gt;
[PlanarGraph w s v e f] -&gt; ShowS
showList :: [PlanarGraph w s v e f] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span id="local-6989586621679225127"><span id="local-6989586621679225138"><span class="annot"><span class="annottext">PlanarGraph w s v e f -&gt; PlanarGraph w s v e f -&gt; Bool
(PlanarGraph w s v e f -&gt; PlanarGraph w s v e f -&gt; Bool)
-&gt; (PlanarGraph w s v e f -&gt; PlanarGraph w s v e f -&gt; Bool)
-&gt; Eq (PlanarGraph w s v e f)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall (w :: World) k (s :: k) v e f.
(Eq v, Eq e, Eq f) =&gt;
PlanarGraph w s v e f -&gt; PlanarGraph w s v e f -&gt; Bool
$c== :: forall (w :: World) k (s :: k) v e f.
(Eq v, Eq e, Eq f) =&gt;
PlanarGraph w s v e f -&gt; PlanarGraph w s v e f -&gt; Bool
== :: PlanarGraph w s v e f -&gt; PlanarGraph w s v e f -&gt; Bool
$c/= :: forall (w :: World) k (s :: k) v e f.
(Eq v, Eq e, Eq f) =&gt;
PlanarGraph w s v e f -&gt; PlanarGraph w s v e f -&gt; Bool
/= :: PlanarGraph w s v e f -&gt; PlanarGraph w s v e f -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="annot"><span class="hs-comment">-- | Lens to access the connected components of a planar subdivision.</span></span><span>
</span><span id="line-82"></span><span id="local-6989586621679224400"><span id="local-6989586621679224401"><span id="local-6989586621679224402"><span id="local-6989586621679224403"><span id="local-6989586621679224404"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#components"><span class="hs-identifier hs-type">components</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Type.html#Lens%27"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224400"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224401"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224402"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224403"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224404"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224400"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224401"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-84"></span><span id="components"><span class="annot"><span class="annottext">components :: forall {k} (w :: World) (s :: k) v e f (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Component w s)
 -&gt; f (NonEmptyVector (Component w s)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
</span><a href="Hiraffe.PlanarGraph.Type.html#components"><span class="hs-identifier hs-var hs-var">components</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph w s v e f -&gt; NonEmptyVector (Component w s))
-&gt; (PlanarGraph w s v e f
    -&gt; NonEmptyVector (Component w s) -&gt; PlanarGraph w s v e f)
-&gt; Lens
     (PlanarGraph w s v e f)
     (PlanarGraph w s v e f)
     (NonEmptyVector (Component w s))
     (NonEmptyVector (Component w s))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Lens.html#lens"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f -&gt; NonEmptyVector (Component w s)
forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f -&gt; NonEmptyVector (Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#_components"><span class="hs-identifier hs-var">_components</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679225156"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225156"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679225157"><span class="annot"><span class="annottext">NonEmptyVector (Component w s)
</span><a href="#local-6989586621679225157"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225156"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#_components"><span class="hs-identifier hs-var">_components</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679225157"><span class="hs-identifier hs-type">cs</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span class="annot"><span class="hs-comment">-- | Lens to access the raw vertex data</span></span><span>
</span><span id="line-87"></span><span id="local-6989586621679224418"><span id="local-6989586621679224419"><span id="local-6989586621679224420"><span id="local-6989586621679224421"><span id="local-6989586621679224422"><span id="local-6989586621679224423"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#rawVertexData"><span class="hs-identifier hs-type">rawVertexData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Type.html#Lens"><span class="hs-identifier hs-type">Lens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224419"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224418"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224420"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224422"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224423"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224419"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224418"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224421"><span class="hs-identifier hs-type">v'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224422"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224423"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224418"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#VertexIx"><span class="hs-identifier hs-type">VertexIx</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224419"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224418"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679224420"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224418"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#VertexIx"><span class="hs-identifier hs-type">VertexIx</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224419"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224418"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679224421"><span class="hs-identifier hs-type">v'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-91"></span><span id="rawVertexData"><span class="annot"><span class="annottext">rawVertexData :: forall {k} (w :: World) (s :: k) v e f v' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Raw s (VertexIx (Component w s)) v)
 -&gt; f (NonEmptyVector (Raw s (VertexIx (Component w s)) v')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v' e f)
</span><a href="Hiraffe.PlanarGraph.Type.html#rawVertexData"><span class="hs-identifier hs-var hs-var">rawVertexData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph w s v e f
 -&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
-&gt; (PlanarGraph w s v e f
    -&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v')
    -&gt; PlanarGraph w s v' e f)
-&gt; Lens
     (PlanarGraph w s v e f)
     (PlanarGraph w s v' e f)
     (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
     (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v'))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Lens.html#lens"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; NonEmptyVector
     (Raw
        s
        (VertexIx
           (CPlanarGraph
              w (Wrap s) (VertexIdIn 'Primal s) (Dart s) (FaceIdIn 'Primal s)))
        v)
PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (VertexIx (Component w s)) v)
</span><a href="Hiraffe.PlanarGraph.Type.html#_rawVertexData"><span class="hs-identifier hs-var">_rawVertexData</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679225161"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225161"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679225162"><span class="annot"><span class="annottext">NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v')
</span><a href="#local-6989586621679225162"><span class="hs-identifier hs-var">vxd</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225161"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#_rawVertexData"><span class="hs-identifier hs-var">_rawVertexData</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679225162"><span class="hs-identifier hs-type">vxd</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="annot"><span class="hs-comment">-- | Lens to access the raw dart daat a</span></span><span>
</span><span id="line-94"></span><span id="local-6989586621679224433"><span id="local-6989586621679224434"><span id="local-6989586621679224435"><span id="local-6989586621679224436"><span id="local-6989586621679224437"><span id="local-6989586621679224438"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#rawDartData"><span class="hs-identifier hs-type">rawDartData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Type.html#Lens"><span class="hs-identifier hs-type">Lens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224434"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224433"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224437"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224435"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224438"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224434"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224433"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224437"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224436"><span class="hs-identifier hs-type">e'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224438"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224433"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224434"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224433"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679224435"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224433"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224434"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224433"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679224436"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-97"></span><span id="rawDartData"><span class="annot"><span class="annottext">rawDartData :: forall {k} (w :: World) (s :: k) v e f e' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; f (NonEmptyVector (Raw s (DartIx (Component w s)) e')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f)
</span><a href="Hiraffe.PlanarGraph.Type.html#rawDartData"><span class="hs-identifier hs-var hs-var">rawDartData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph w s v e f -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e))
-&gt; (PlanarGraph w s v e f
    -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e')
    -&gt; PlanarGraph w s v e' f)
-&gt; Lens
     (PlanarGraph w s v e f)
     (PlanarGraph w s v e' f)
     (NonEmptyVector (Raw s (Dart (Wrap s)) e))
     (NonEmptyVector (Raw s (Dart (Wrap s)) e'))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Lens.html#lens"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; NonEmptyVector
     (Raw
        s
        (DartIx
           (CPlanarGraph
              w (Wrap s) (VertexIdIn 'Primal s) (Dart s) (FaceIdIn 'Primal s)))
        e)
PlanarGraph w s v e f -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (DartIx (Component w s)) e)
</span><a href="Hiraffe.PlanarGraph.Type.html#_rawDartData"><span class="hs-identifier hs-var">_rawDartData</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679225165"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225165"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679225166"><span class="annot"><span class="annottext">NonEmptyVector (Raw s (Dart (Wrap s)) e')
</span><a href="#local-6989586621679225166"><span class="hs-identifier hs-var">vxd</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225165"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#_rawDartData"><span class="hs-identifier hs-var">_rawDartData</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679225166"><span class="hs-identifier hs-type">vxd</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span class="annot"><span class="hs-comment">-- | Access the raw face data</span></span><span>
</span><span id="line-100"></span><span id="local-6989586621679224448"><span id="local-6989586621679224449"><span id="local-6989586621679224450"><span id="local-6989586621679224451"><span id="local-6989586621679224452"><span id="local-6989586621679224453"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#rawFaceData"><span class="hs-identifier hs-type">rawFaceData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Type.html#Lens"><span class="hs-identifier hs-type">Lens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224451"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224448"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224452"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224453"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224449"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224451"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224448"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224452"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224453"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224450"><span class="hs-identifier hs-type">f'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#RawFace"><span class="hs-identifier hs-type">RawFace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224448"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224449"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#RawFace"><span class="hs-identifier hs-type">RawFace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224448"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224450"><span class="hs-identifier hs-type">f'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-102"></span><span id="rawFaceData"><span class="annot"><span class="annottext">rawFaceData :: forall {k} (w :: World) (s :: k) v e f f' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (RawFace s f) -&gt; f (NonEmptyVector (RawFace s f')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f')
</span><a href="Hiraffe.PlanarGraph.Type.html#rawFaceData"><span class="hs-identifier hs-var hs-var">rawFaceData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph w s v e f -&gt; NonEmptyVector (RawFace s f))
-&gt; (PlanarGraph w s v e f
    -&gt; NonEmptyVector (RawFace s f') -&gt; PlanarGraph w s v e f')
-&gt; Lens
     (PlanarGraph w s v e f)
     (PlanarGraph w s v e f')
     (NonEmptyVector (RawFace s f))
     (NonEmptyVector (RawFace s f'))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Lens.html#lens"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f -&gt; NonEmptyVector (RawFace s f)
forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f -&gt; NonEmptyVector (RawFace s f)
</span><a href="Hiraffe.PlanarGraph.Type.html#_rawFaceData"><span class="hs-identifier hs-var">_rawFaceData</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679225169"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225169"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679225170"><span class="annot"><span class="annottext">NonEmptyVector (RawFace s f')
</span><a href="#local-6989586621679225170"><span class="hs-identifier hs-var">vxd</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225169"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#_rawFaceData"><span class="hs-identifier hs-var">_rawFaceData</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679225170"><span class="hs-identifier hs-type">vxd</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span class="annot"><span class="hs-comment">-- | Lens to access a particular component of the planar subdivision.</span></span><span>
</span><span id="line-105"></span><span id="local-6989586621679224463"><span id="local-6989586621679224465"><span id="local-6989586621679224466"><span id="local-6989586621679224467"><span id="local-6989586621679224468"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#component"><span class="hs-identifier hs-type">component</span></a></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#ComponentId"><span class="hs-identifier hs-type">ComponentId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224463"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-106"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Type.html#Lens%27"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224465"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224463"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224466"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224467"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224468"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224465"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224463"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-107"></span><span id="component"><span class="annot"><span class="annottext">component :: forall {k} (s :: k) (w :: World) v e f.
ComponentId s -&gt; Lens' (PlanarGraph w s v e f) (Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#component"><span class="hs-identifier hs-var hs-var">component</span></a></span></span><span> </span><span id="local-6989586621679225182"><span class="annot"><span class="annottext">ComponentId s
</span><a href="#local-6989586621679225182"><span class="hs-identifier hs-var">ci</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (Component w s)
 -&gt; f (NonEmptyVector (Component w s)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
forall {k} (w :: World) (s :: k) v e f (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Component w s)
 -&gt; f (NonEmptyVector (Component w s)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
</span><a href="Hiraffe.PlanarGraph.Type.html#components"><span class="hs-identifier hs-var">components</span></a></span><span class="annot"><span class="annottext">((NonEmptyVector (Component w s)
  -&gt; f (NonEmptyVector (Component w s)))
 -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; ((Component w s -&gt; f (Component w s))
    -&gt; NonEmptyVector (Component w s)
    -&gt; f (NonEmptyVector (Component w s)))
-&gt; (Component w s -&gt; f (Component w s))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">Traversing
  (-&gt;)
  f
  (NonEmptyVector (Component w s))
  (NonEmptyVector (Component w s))
  (Component w s)
  (Component w s)
-&gt; (Component w s -&gt; f (Component w s))
-&gt; NonEmptyVector (Component w s)
-&gt; f (NonEmptyVector (Component w s))
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s t a.
(HasCallStack, Conjoined p, Functor f) =&gt;
Traversing p f s t a a -&gt; Over p f s t a a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Traversal.html#singular"><span class="hs-identifier hs-var">singular</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Index (NonEmptyVector (Component w s))
-&gt; Traversal'
     (NonEmptyVector (Component w s))
     (IxValue (NonEmptyVector (Component w s)))
forall m. Ixed m =&gt; Index m -&gt; Traversal' m (IxValue m)
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.At.html#ix"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="annot"><span class="annottext">(Index (NonEmptyVector (Component w s))
 -&gt; Traversal'
      (NonEmptyVector (Component w s))
      (IxValue (NonEmptyVector (Component w s))))
-&gt; Index (NonEmptyVector (Component w s))
-&gt; Traversal'
     (NonEmptyVector (Component w s))
     (IxValue (NonEmptyVector (Component w s)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ComponentId s -&gt; Int
forall k (s :: k). ComponentId s -&gt; Int
</span><a href="Hiraffe.PlanarGraph.Component.html#unCI"><span class="hs-identifier hs-var">unCI</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentId s
</span><a href="#local-6989586621679225182"><span class="hs-identifier hs-var">ci</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="annot"><span class="hs-comment">-- | Given a &quot;global&quot; dart id, get the component and local dart info</span></span><span>
</span><span id="line-112"></span><span id="local-6989586621679224506"><span id="local-6989586621679224507"><span id="local-6989586621679224508"><span id="local-6989586621679224509"><span id="local-6989586621679224510"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#asLocalD"><span class="hs-identifier hs-type">asLocalD</span></a></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224506"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224507"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224508"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224509"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224510"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224506"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224507"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224508"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224509"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224510"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-114"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#ComponentId"><span class="hs-identifier hs-type">ComponentId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224507"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224506"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224507"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224506"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224507"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-115"></span><span id="asLocalD"><span class="annot"><span class="annottext">asLocalD :: forall {k} (w :: World) (s :: k) v e f.
DartIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, DartIx (Component w s), Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#asLocalD"><span class="hs-identifier hs-var hs-var">asLocalD</span></a></span></span><span> </span><span id="local-6989586621679225199"><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225199"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679225200"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225200"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span id="local-6989586621679225202"><span class="annot"><span class="annottext">ComponentId s
</span><a href="#local-6989586621679225202"><span class="hs-identifier hs-var">ci</span></a></span></span><span> </span><span id="local-6989586621679225203"><span class="annot"><span class="annottext">Dart (Wrap s)
</span><a href="#local-6989586621679225203"><span class="hs-identifier hs-var">d'</span></a></span></span><span> </span><span class="annot"><span class="annottext">e
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225200"><span class="hs-identifier hs-var">ps</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting
     (Endo (Raw s (Dart (Wrap s)) e))
     (PlanarGraph w s v e f)
     (Raw s (Dart (Wrap s)) e)
-&gt; Raw s (Dart (Wrap s)) e
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; Const
      (Endo (Raw s (Dart (Wrap s)) e))
      (NonEmptyVector (Raw s (DartIx (Component w s)) e)))
-&gt; PlanarGraph w s v e f
-&gt; Const (Endo (Raw s (Dart (Wrap s)) e)) (PlanarGraph w s v e f)
(NonEmptyVector (Raw s (Dart (Wrap s)) e)
 -&gt; Const
      (Endo (Raw s (Dart (Wrap s)) e))
      (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
-&gt; PlanarGraph w s v e f
-&gt; Const (Endo (Raw s (Dart (Wrap s)) e)) (PlanarGraph w s v e f)
forall {k} (w :: World) (s :: k) v e f e' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; f (NonEmptyVector (Raw s (DartIx (Component w s)) e')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f)
</span><a href="Hiraffe.PlanarGraph.Type.html#rawDartData"><span class="hs-identifier hs-var">rawDartData</span></a></span><span class="annot"><span class="annottext">((NonEmptyVector (Raw s (Dart (Wrap s)) e)
  -&gt; Const
       (Endo (Raw s (Dart (Wrap s)) e))
       (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
 -&gt; PlanarGraph w s v e f
 -&gt; Const (Endo (Raw s (Dart (Wrap s)) e)) (PlanarGraph w s v e f))
-&gt; ((Raw s (Dart (Wrap s)) e
     -&gt; Const
          (Endo (Raw s (Dart (Wrap s)) e)) (Raw s (Dart (Wrap s)) e))
    -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
    -&gt; Const
         (Endo (Raw s (Dart (Wrap s)) e))
         (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
-&gt; Getting
     (Endo (Raw s (Dart (Wrap s)) e))
     (PlanarGraph w s v e f)
     (Raw s (Dart (Wrap s)) e)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">Index (NonEmptyVector (Raw s (Dart (Wrap s)) e))
-&gt; Traversal'
     (NonEmptyVector (Raw s (Dart (Wrap s)) e))
     (IxValue (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
forall m. Ixed m =&gt; Index m -&gt; Traversal' m (IxValue m)
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.At.html#ix"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dart s -&gt; Int
forall a. Enum a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">fromEnum</span></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679225199"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>                </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
</span><a href="#local-6989586621679225202"><span class="hs-identifier hs-var">ci</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DartIx (Component w s)
Dart (Wrap s)
</span><a href="#local-6989586621679225203"><span class="hs-identifier hs-var">d'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225200"><span class="hs-identifier hs-var">ps</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting (Component w s) (PlanarGraph w s v e f) (Component w s)
-&gt; Component w s
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">ComponentId s -&gt; Lens' (PlanarGraph w s v e f) (Component w s)
forall {k} (s :: k) (w :: World) v e f.
ComponentId s -&gt; Lens' (PlanarGraph w s v e f) (Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#component"><span class="hs-identifier hs-var">component</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentId s
</span><a href="#local-6989586621679225202"><span class="hs-identifier hs-var">ci</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="annot"><span class="hs-comment">-- | Given a global vertexId, get the local info</span></span><span>
</span><span id="line-119"></span><span id="local-6989586621679224531"><span id="local-6989586621679224532"><span id="local-6989586621679224533"><span id="local-6989586621679224534"><span id="local-6989586621679224535"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#asLocalV"><span class="hs-identifier hs-type">asLocalV</span></a></span><span>                 </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#VertexIx"><span class="hs-identifier hs-type">VertexIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224531"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224532"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224533"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224534"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224535"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224531"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224532"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224533"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224534"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224535"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-121"></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#ComponentId"><span class="hs-identifier hs-type">ComponentId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224532"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#VertexIx"><span class="hs-identifier hs-type">VertexIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224531"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224532"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224531"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224532"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-122"></span><span id="asLocalV"><span class="annot"><span class="annottext">asLocalV :: forall {k} (w :: World) (s :: k) v e f.
VertexIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, VertexIx (Component w s), Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#asLocalV"><span class="hs-identifier hs-var hs-var">asLocalV</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#VertexId"><span class="hs-identifier hs-type">VertexId</span></a></span><span> </span><span id="local-6989586621679225215"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225215"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679225216"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225216"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span id="local-6989586621679225217"><span class="annot"><span class="annottext">ComponentId s
</span><a href="#local-6989586621679225217"><span class="hs-identifier hs-var">ci</span></a></span></span><span> </span><span id="local-6989586621679225218"><span class="annot"><span class="annottext">VertexIdIn w (Wrap s)
</span><a href="#local-6989586621679225218"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="annot"><span class="annottext">v
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225216"><span class="hs-identifier hs-var">ps</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting
     (Endo (Raw s (VertexIdIn w (Wrap s)) v))
     (PlanarGraph w s v e f)
     (Raw s (VertexIdIn w (Wrap s)) v)
-&gt; Raw s (VertexIdIn w (Wrap s)) v
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (VertexIx (Component w s)) v)
 -&gt; Const
      (Endo (Raw s (VertexIdIn w (Wrap s)) v))
      (NonEmptyVector (Raw s (VertexIx (Component w s)) v)))
-&gt; PlanarGraph w s v e f
-&gt; Const
     (Endo (Raw s (VertexIdIn w (Wrap s)) v)) (PlanarGraph w s v e f)
(NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
 -&gt; Const
      (Endo (Raw s (VertexIdIn w (Wrap s)) v))
      (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)))
-&gt; PlanarGraph w s v e f
-&gt; Const
     (Endo (Raw s (VertexIdIn w (Wrap s)) v)) (PlanarGraph w s v e f)
forall {k} (w :: World) (s :: k) v e f v' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Raw s (VertexIx (Component w s)) v)
 -&gt; f (NonEmptyVector (Raw s (VertexIx (Component w s)) v')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v' e f)
</span><a href="Hiraffe.PlanarGraph.Type.html#rawVertexData"><span class="hs-identifier hs-var">rawVertexData</span></a></span><span class="annot"><span class="annottext">((NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
  -&gt; Const
       (Endo (Raw s (VertexIdIn w (Wrap s)) v))
       (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)))
 -&gt; PlanarGraph w s v e f
 -&gt; Const
      (Endo (Raw s (VertexIdIn w (Wrap s)) v)) (PlanarGraph w s v e f))
-&gt; ((Raw s (VertexIdIn w (Wrap s)) v
     -&gt; Const
          (Endo (Raw s (VertexIdIn w (Wrap s)) v))
          (Raw s (VertexIdIn w (Wrap s)) v))
    -&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
    -&gt; Const
         (Endo (Raw s (VertexIdIn w (Wrap s)) v))
         (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)))
-&gt; Getting
     (Endo (Raw s (VertexIdIn w (Wrap s)) v))
     (PlanarGraph w s v e f)
     (Raw s (VertexIdIn w (Wrap s)) v)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">Index (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
-&gt; Traversal'
     (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
     (IxValue (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)))
forall m. Ixed m =&gt; Index m -&gt; Traversal' m (IxValue m)
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.At.html#ix"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="annot"><span class="annottext">Int
Index (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
</span><a href="#local-6989586621679225215"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-123"></span><span>                           </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
</span><a href="#local-6989586621679225217"><span class="hs-identifier hs-var">ci</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VertexIx (Component w s)
VertexIdIn w (Wrap s)
</span><a href="#local-6989586621679225218"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225216"><span class="hs-identifier hs-var">ps</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting (Component w s) (PlanarGraph w s v e f) (Component w s)
-&gt; Component w s
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">ComponentId s -&gt; Lens' (PlanarGraph w s v e f) (Component w s)
forall {k} (s :: k) (w :: World) v e f.
ComponentId s -&gt; Lens' (PlanarGraph w s v e f) (Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#component"><span class="hs-identifier hs-var">component</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentId s
</span><a href="#local-6989586621679225217"><span class="hs-identifier hs-var">ci</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="hs-comment">-- -- | Get the local face and component from a given face.</span><span>
</span><span id="line-126"></span><span class="hs-comment">-- asLocalF                          :: FaceId s -&gt; PlanarGraph w s v e f</span><span>
</span><span id="line-127"></span><span class="hs-comment">--                                   -&gt; NonEmpty (ComponentId s, FaceId (Wrap s), Component w s)</span><span>
</span><span id="line-128"></span><span class="hs-comment">-- asLocalF (FaceId (VertexId f)) ps = case ps^?!rawFaceData.ix f of</span><span>
</span><span id="line-129"></span><span class="hs-comment">--       RawFace (Just (ci,f')) _        -&gt; NonEmpty.singleton (ci,f', ps^.component ci)</span><span>
</span><span id="line-130"></span><span class="hs-comment">--       RawFace Nothing (FaceData hs _) -&gt; toLocalF &lt;$&gt; NonEmpty.fromList (F.toList hs)</span><span>
</span><span id="line-131"></span><span class="hs-comment">--   where</span><span>
</span><span id="line-132"></span><span class="hs-comment">--     toLocalF d = let (ci,d',c) = asLocalD d ps in (ci, c^.leftFaceOf d' , c)</span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679224553"><span id="local-6989586621679224554"><span id="local-6989586621679224555"><span id="local-6989586621679224556"><span id="local-6989586621679224557"><span class="annot"><a href="Hiraffe.Graph.Class.html#HasVertices%27"><span class="hs-identifier hs-type">HasVertices'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224553"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224554"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224555"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224556"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224557"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Vertex"><span class="annot"><a href="Hiraffe.Graph.Class.html#Vertex"><span class="hs-identifier hs-var">Vertex</span></a></span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224553"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224554"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224555"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224556"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224557"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679224555"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="VertexIx"><span class="annot"><a href="Hiraffe.Graph.Class.html#VertexIx"><span class="hs-identifier hs-var">VertexIx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224553"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224554"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224555"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224556"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224557"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#VertexId"><span class="hs-identifier hs-type">VertexId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224554"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-139"></span><span>  </span><span id="local-6989586621679225239"><span class="annot"><span class="annottext">vertexAt :: VertexIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (VertexIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Vertex (PlanarGraph w s v e f))
</span><a href="#local-6989586621679225239"><span class="hs-identifier hs-var hs-var hs-var hs-var">vertexAt</span></a></span></span><span> </span><span id="local-6989586621679225241"><span class="annot"><span class="annottext">u :: VertexIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225241"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#VertexId"><span class="hs-identifier hs-type">VertexId</span></a></span><span> </span><span id="local-6989586621679225242"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225242"><span class="hs-identifier hs-var">ui</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; VertexId s)
-&gt; (Indexed
      Int
      (Vertex (PlanarGraph w s v e f))
      (f (Vertex (PlanarGraph w s v e f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; p (Vertex (PlanarGraph w s v e f))
     (f (Vertex (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall j (p :: * -&gt; * -&gt; *) i a b r.
Indexable j p =&gt;
(i -&gt; j) -&gt; (Indexed i a b -&gt; r) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Indexed.html#reindexed"><span class="hs-identifier hs-var">reindexed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VertexId s -&gt; Int -&gt; VertexId s
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
VertexId s
</span><a href="#local-6989586621679225241"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Indexed
    Int
    (Vertex (PlanarGraph w s v e f))
    (f (Vertex (PlanarGraph w s v e f)))
  -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
 -&gt; p (Vertex (PlanarGraph w s v e f))
      (f (Vertex (PlanarGraph w s v e f)))
 -&gt; PlanarGraph w s v e f
 -&gt; f (PlanarGraph w s v e f))
-&gt; (Indexed
      Int
      (Vertex (PlanarGraph w s v e f))
      (f (Vertex (PlanarGraph w s v e f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; p (Vertex (PlanarGraph w s v e f))
     (f (Vertex (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (VertexIx (Component w s)) v)
 -&gt; f (NonEmptyVector (Raw s (VertexIx (Component w s)) v)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
(NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
 -&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
forall {k} (w :: World) (s :: k) v e f v' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Raw s (VertexIx (Component w s)) v)
 -&gt; f (NonEmptyVector (Raw s (VertexIx (Component w s)) v')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v' e f)
</span><a href="Hiraffe.PlanarGraph.Type.html#rawVertexData"><span class="hs-identifier hs-var">rawVertexData</span></a></span><span class="annot"><span class="annottext">((NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
  -&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)))
 -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; (Indexed Int v (f v)
    -&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
    -&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)))
-&gt; Indexed Int v (f v)
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">Index (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
-&gt; IndexedTraversal'
     (Index (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)))
     (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
     (IxValue (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)))
forall m.
Ixed m =&gt;
Index m -&gt; IndexedTraversal' (Index m) m (IxValue m)
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.At.html#iix"><span class="hs-identifier hs-var">iix</span></a></span><span> </span><span class="annot"><span class="annottext">Int
Index (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
</span><a href="#local-6989586621679225242"><span class="hs-identifier hs-var">ui</span></a></span><span> </span><span class="annot"><span class="annottext">(Indexed
   Int
   (Raw s (VertexIdIn w (Wrap s)) v)
   (f (Raw s (VertexIdIn w (Wrap s)) v))
 -&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
 -&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)))
-&gt; ((v -&gt; f v)
    -&gt; Raw s (VertexIdIn w (Wrap s)) v
    -&gt; f (Raw s (VertexIdIn w (Wrap s)) v))
-&gt; Indexed Int v (f v)
-&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
-&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
forall i (p :: * -&gt; * -&gt; *) s t r a b.
Indexable i p =&gt;
(Indexed i s t -&gt; r) -&gt; ((a -&gt; b) -&gt; s -&gt; t) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Indexed.html#%3C."><span class="hs-operator hs-var">&lt;.</span></a></span><span> </span><span class="annot"><span class="annottext">(v -&gt; f v)
-&gt; Raw s (VertexIdIn w (Wrap s)) v
-&gt; f (Raw s (VertexIdIn w (Wrap s)) v)
forall {k} (s :: k) ia a b (f :: * -&gt; *).
Functor f =&gt;
(a -&gt; f b) -&gt; Raw s ia a -&gt; f (Raw s ia b)
</span><a href="Hiraffe.PlanarGraph.Component.html#dataVal"><span class="hs-identifier hs-var">dataVal</span></a></span><span>
</span><span id="line-140"></span><span>  </span><span id="local-6989586621679225248"><span class="annot"><span class="annottext">numVertices :: PlanarGraph w s v e f -&gt; Int
</span><a href="#local-6989586621679225248"><span class="hs-identifier hs-var hs-var hs-var hs-var">numVertices</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v) -&gt; Int
forall a. NonEmptyVector a -&gt; Int
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.html#length"><span class="hs-identifier hs-var">NonEmptyV.length</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v) -&gt; Int)
-&gt; (PlanarGraph w s v e f
    -&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
-&gt; PlanarGraph w s v e f
-&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (VertexIx (Component w s)) v)
PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (VertexIx (Component w s)) v)
</span><a href="Hiraffe.PlanarGraph.Type.html#_rawVertexData"><span class="hs-identifier hs-var">_rawVertexData</span></a></span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#numVertices"><span class="hs-pragma hs-type">numVertices</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679224604"><span id="local-6989586621679224605"><span id="local-6989586621679224606"><span id="local-6989586621679224607"><span id="local-6989586621679224608"><span id="local-6989586621679224609"><span class="annot"><a href="Hiraffe.Graph.Class.html#HasVertices"><span class="hs-identifier hs-type">HasVertices</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224604"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224605"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224606"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224607"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224608"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224604"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224605"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224609"><span class="hs-identifier hs-type">v'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224607"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224608"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-144"></span><span>  </span><span id="local-6989586621679225271"><span class="annot"><span class="annottext">vertices :: IndexedTraversal1
  (VertexIx (PlanarGraph w s v e f))
  (PlanarGraph w s v e f)
  (PlanarGraph w s v' e f)
  (Vertex (PlanarGraph w s v e f))
  (Vertex (PlanarGraph w s v' e f))
</span><a href="#local-6989586621679225271"><span class="hs-identifier hs-var hs-var hs-var hs-var">vertices</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; VertexId s)
-&gt; (Indexed
      Int
      (Vertex (PlanarGraph w s v e f))
      (f (Vertex (PlanarGraph w s v' e f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v' e f))
-&gt; p (Vertex (PlanarGraph w s v e f))
     (f (Vertex (PlanarGraph w s v' e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v' e f)
forall j (p :: * -&gt; * -&gt; *) i a b r.
Indexable j p =&gt;
(i -&gt; j) -&gt; (Indexed i a b -&gt; r) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Indexed.html#reindexed"><span class="hs-identifier hs-var">reindexed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; VertexIx (PlanarGraph w s v e f)
Int -&gt; VertexId s
forall k (w :: World) (s :: k). Int -&gt; VertexIdIn w s
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#VertexId"><span class="hs-identifier hs-var">VertexId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#VertexIx"><span class="hs-identifier hs-type">VertexIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224604"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224605"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224606"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224607"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224608"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span>           </span><span class="annot"><span class="annottext">((Indexed
    Int
    (Vertex (PlanarGraph w s v e f))
    (f (Vertex (PlanarGraph w s v' e f)))
  -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v' e f))
 -&gt; p (Vertex (PlanarGraph w s v e f))
      (f (Vertex (PlanarGraph w s v' e f)))
 -&gt; PlanarGraph w s v e f
 -&gt; f (PlanarGraph w s v' e f))
-&gt; (Indexed
      Int
      (Vertex (PlanarGraph w s v e f))
      (f (Vertex (PlanarGraph w s v' e f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v' e f))
-&gt; p (Vertex (PlanarGraph w s v e f))
     (f (Vertex (PlanarGraph w s v' e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v' e f)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (VertexIx (Component w s)) v)
 -&gt; f (NonEmptyVector (Raw s (VertexIx (Component w s)) v')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v' e f)
(NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
 -&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v' e f)
forall {k} (w :: World) (s :: k) v e f v' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Raw s (VertexIx (Component w s)) v)
 -&gt; f (NonEmptyVector (Raw s (VertexIx (Component w s)) v')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v' e f)
</span><a href="Hiraffe.PlanarGraph.Type.html#rawVertexData"><span class="hs-identifier hs-var">rawVertexData</span></a></span><span> </span><span class="annot"><span class="annottext">((NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
  -&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v')))
 -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v' e f))
-&gt; (Indexed Int v (f v')
    -&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
    -&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v')))
-&gt; Indexed Int v (f v')
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v' e f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Indexed.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Indexed
  Int
  (Raw s (VertexIdIn w (Wrap s)) v)
  (f (Raw s (VertexIdIn w (Wrap s)) v'))
-&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
-&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v'))
forall (f :: * -&gt; *) a b.
Traversable1 f =&gt;
IndexedTraversal1 Int (f a) (f b) a b
IndexedTraversal1
  Int
  (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
  (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v'))
  (Raw s (VertexIdIn w (Wrap s)) v)
  (Raw s (VertexIdIn w (Wrap s)) v')
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Traversal.html#traversed1"><span class="hs-identifier hs-var">traversed1</span></a></span><span> </span><span class="annot"><span class="annottext">(Indexed
   Int
   (Raw s (VertexIdIn w (Wrap s)) v)
   (f (Raw s (VertexIdIn w (Wrap s)) v'))
 -&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
 -&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v')))
-&gt; ((v -&gt; f v')
    -&gt; Raw s (VertexIdIn w (Wrap s)) v
    -&gt; f (Raw s (VertexIdIn w (Wrap s)) v'))
-&gt; Indexed Int v (f v')
-&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
-&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v'))
forall i (p :: * -&gt; * -&gt; *) s t r a b.
Indexable i p =&gt;
(Indexed i s t -&gt; r) -&gt; ((a -&gt; b) -&gt; s -&gt; t) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Indexed.html#%3C."><span class="hs-operator hs-var">&lt;.</span></a></span><span> </span><span class="annot"><span class="annottext">(v -&gt; f v')
-&gt; Raw s (VertexIdIn w (Wrap s)) v
-&gt; f (Raw s (VertexIdIn w (Wrap s)) v')
forall {k} (s :: k) ia a b (f :: * -&gt; *).
Functor f =&gt;
(a -&gt; f b) -&gt; Raw s ia a -&gt; f (Raw s ia b)
</span><a href="Hiraffe.PlanarGraph.Component.html#dataVal"><span class="hs-identifier hs-var">dataVal</span></a></span><span>
</span><span id="line-146"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679224631"><span id="local-6989586621679224632"><span id="local-6989586621679224633"><span id="local-6989586621679224634"><span id="local-6989586621679224635"><span class="annot"><a href="Hiraffe.Graph.Class.html#HasDarts%27"><span class="hs-identifier hs-type">HasDarts'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224631"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224632"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224633"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224634"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224635"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Dart"><span class="annot"><a href="Hiraffe.Graph.Class.html#Dart"><span class="hs-identifier hs-var">Dart</span></a></span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224631"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224632"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224633"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224634"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224635"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679224634"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-149"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="DartIx"><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-var">DartIx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224631"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224632"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224633"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224634"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224635"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Dart.html#Dart"><span class="hs-identifier hs-type">Dart.Dart</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224632"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-150"></span><span>  </span><span id="local-6989586621679225294"><span class="annot"><span class="annottext">dartAt :: DartIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (DartIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Dart (PlanarGraph w s v e f))
</span><a href="#local-6989586621679225294"><span class="hs-identifier hs-var hs-var hs-var hs-var">dartAt</span></a></span></span><span> </span><span id="local-6989586621679225296"><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225296"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Dart s)
-&gt; (Indexed
      Int
      (Dart (PlanarGraph w s v e f))
      (f (Dart (PlanarGraph w s v e f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; p (Dart (PlanarGraph w s v e f))
     (f (Dart (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall j (p :: * -&gt; * -&gt; *) i a b r.
Indexable j p =&gt;
(i -&gt; j) -&gt; (Indexed i a b -&gt; r) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Indexed.html#reindexed"><span class="hs-identifier hs-var">reindexed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dart s -&gt; Int -&gt; Dart s
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679225296"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Indexed
    Int
    (Dart (PlanarGraph w s v e f))
    (f (Dart (PlanarGraph w s v e f)))
  -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
 -&gt; p (Dart (PlanarGraph w s v e f))
      (f (Dart (PlanarGraph w s v e f)))
 -&gt; PlanarGraph w s v e f
 -&gt; f (PlanarGraph w s v e f))
-&gt; (Indexed
      Int
      (Dart (PlanarGraph w s v e f))
      (f (Dart (PlanarGraph w s v e f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; p (Dart (PlanarGraph w s v e f))
     (f (Dart (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; f (NonEmptyVector (Raw s (DartIx (Component w s)) e)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
(NonEmptyVector (Raw s (Dart (Wrap s)) e)
 -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
forall {k} (w :: World) (s :: k) v e f e' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; f (NonEmptyVector (Raw s (DartIx (Component w s)) e')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f)
</span><a href="Hiraffe.PlanarGraph.Type.html#rawDartData"><span class="hs-identifier hs-var">rawDartData</span></a></span><span class="annot"><span class="annottext">((NonEmptyVector (Raw s (Dart (Wrap s)) e)
  -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
 -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; (Indexed Int e (f e)
    -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
    -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
-&gt; Indexed Int e (f e)
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">Index (NonEmptyVector (Raw s (Dart (Wrap s)) e))
-&gt; IndexedTraversal'
     (Index (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
     (NonEmptyVector (Raw s (Dart (Wrap s)) e))
     (IxValue (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
forall m.
Ixed m =&gt;
Index m -&gt; IndexedTraversal' (Index m) m (IxValue m)
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.At.html#iix"><span class="hs-identifier hs-var">iix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dart s -&gt; Int
forall a. Enum a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">fromEnum</span></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679225296"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Indexed
   Int (Raw s (Dart (Wrap s)) e) (f (Raw s (Dart (Wrap s)) e))
 -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
 -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
-&gt; ((e -&gt; f e)
    -&gt; Raw s (Dart (Wrap s)) e -&gt; f (Raw s (Dart (Wrap s)) e))
-&gt; Indexed Int e (f e)
-&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
-&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e))
forall i (p :: * -&gt; * -&gt; *) s t r a b.
Indexable i p =&gt;
(Indexed i s t -&gt; r) -&gt; ((a -&gt; b) -&gt; s -&gt; t) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Indexed.html#%3C."><span class="hs-operator hs-var">&lt;.</span></a></span><span> </span><span class="annot"><span class="annottext">(e -&gt; f e)
-&gt; Raw s (Dart (Wrap s)) e -&gt; f (Raw s (Dart (Wrap s)) e)
forall {k} (s :: k) ia a b (f :: * -&gt; *).
Functor f =&gt;
(a -&gt; f b) -&gt; Raw s ia a -&gt; f (Raw s ia b)
</span><a href="Hiraffe.PlanarGraph.Component.html#dataVal"><span class="hs-identifier hs-var">dataVal</span></a></span><span>
</span><span id="line-151"></span><span>  </span><span id="local-6989586621679225297"><span class="annot"><span class="annottext">numDarts :: PlanarGraph w s v e f -&gt; Int
</span><a href="#local-6989586621679225297"><span class="hs-identifier hs-var hs-var hs-var hs-var">numDarts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Raw s (Dart (Wrap s)) e) -&gt; Int
forall a. NonEmptyVector a -&gt; Int
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.html#length"><span class="hs-identifier hs-var">NonEmptyV.length</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (Dart (Wrap s)) e) -&gt; Int)
-&gt; (PlanarGraph w s v e f
    -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e))
-&gt; PlanarGraph w s v e f
-&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (DartIx (Component w s)) e)
PlanarGraph w s v e f -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (DartIx (Component w s)) e)
</span><a href="Hiraffe.PlanarGraph.Type.html#_rawDartData"><span class="hs-identifier hs-var">_rawDartData</span></a></span><span>
</span><span id="line-152"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#numDarts"><span class="hs-pragma hs-type">numDarts</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679224650"><span id="local-6989586621679224651"><span id="local-6989586621679224652"><span id="local-6989586621679224653"><span id="local-6989586621679224654"><span id="local-6989586621679224655"><span class="annot"><a href="Hiraffe.Graph.Class.html#HasDarts"><span class="hs-identifier hs-type">HasDarts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224650"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224651"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224652"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224653"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224654"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224650"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224651"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224652"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224655"><span class="hs-identifier hs-type">e'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224654"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-155"></span><span>  </span><span id="local-6989586621679225319"><span class="annot"><span class="annottext">darts :: IndexedTraversal
  (DartIx (PlanarGraph w s v e f))
  (PlanarGraph w s v e f)
  (PlanarGraph w s v e' f)
  (Dart (PlanarGraph w s v e f))
  (Dart (PlanarGraph w s v e' f))
</span><a href="#local-6989586621679225319"><span class="hs-identifier hs-var hs-var hs-var hs-var">darts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Dart s)
-&gt; (Indexed
      Int
      (Dart (PlanarGraph w s v e f))
      (f (Dart (PlanarGraph w s v e' f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f))
-&gt; p (Dart (PlanarGraph w s v e f))
     (f (Dart (PlanarGraph w s v e' f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e' f)
forall j (p :: * -&gt; * -&gt; *) i a b r.
Indexable j p =&gt;
(i -&gt; j) -&gt; (Indexed i a b -&gt; r) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Indexed.html#reindexed"><span class="hs-identifier hs-var">reindexed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; DartIx (PlanarGraph w s v e f)
Int -&gt; Dart s
forall a. Enum a =&gt; Int -&gt; a
</span><span class="hs-identifier hs-var">toEnum</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224650"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224651"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224652"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224653"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224654"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>        </span><span class="annot"><span class="annottext">((Indexed
    Int
    (Dart (PlanarGraph w s v e f))
    (f (Dart (PlanarGraph w s v e' f)))
  -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f))
 -&gt; p (Dart (PlanarGraph w s v e f))
      (f (Dart (PlanarGraph w s v e' f)))
 -&gt; PlanarGraph w s v e f
 -&gt; f (PlanarGraph w s v e' f))
-&gt; (Indexed
      Int
      (Dart (PlanarGraph w s v e f))
      (f (Dart (PlanarGraph w s v e' f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f))
-&gt; p (Dart (PlanarGraph w s v e f))
     (f (Dart (PlanarGraph w s v e' f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e' f)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; f (NonEmptyVector (Raw s (DartIx (Component w s)) e')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f)
(NonEmptyVector (Raw s (Dart (Wrap s)) e)
 -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f)
forall {k} (w :: World) (s :: k) v e f e' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; f (NonEmptyVector (Raw s (DartIx (Component w s)) e')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f)
</span><a href="Hiraffe.PlanarGraph.Type.html#rawDartData"><span class="hs-identifier hs-var">rawDartData</span></a></span><span> </span><span class="annot"><span class="annottext">((NonEmptyVector (Raw s (Dart (Wrap s)) e)
  -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e')))
 -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f))
-&gt; (Indexed Int e (f e')
    -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
    -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e')))
-&gt; Indexed Int e (f e')
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e' f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Indexed.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Indexed
  Int (Raw s (Dart (Wrap s)) e) (f (Raw s (Dart (Wrap s)) e'))
-&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
-&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e'))
forall i (t :: * -&gt; *) a b.
TraversableWithIndex i t =&gt;
IndexedTraversal i (t a) (t b) a b
IndexedTraversal
  Int
  (NonEmptyVector (Raw s (Dart (Wrap s)) e))
  (NonEmptyVector (Raw s (Dart (Wrap s)) e'))
  (Raw s (Dart (Wrap s)) e)
  (Raw s (Dart (Wrap s)) e')
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Indexed.html#itraversed"><span class="hs-identifier hs-var">itraversed</span></a></span><span> </span><span class="annot"><span class="annottext">(Indexed
   Int (Raw s (Dart (Wrap s)) e) (f (Raw s (Dart (Wrap s)) e'))
 -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
 -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e')))
-&gt; ((e -&gt; f e')
    -&gt; Raw s (Dart (Wrap s)) e -&gt; f (Raw s (Dart (Wrap s)) e'))
-&gt; Indexed Int e (f e')
-&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
-&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e'))
forall i (p :: * -&gt; * -&gt; *) s t r a b.
Indexable i p =&gt;
(Indexed i s t -&gt; r) -&gt; ((a -&gt; b) -&gt; s -&gt; t) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Indexed.html#%3C."><span class="hs-operator hs-var">&lt;.</span></a></span><span> </span><span class="annot"><span class="annottext">(e -&gt; f e')
-&gt; Raw s (Dart (Wrap s)) e -&gt; f (Raw s (Dart (Wrap s)) e')
forall {k} (s :: k) ia a b (f :: * -&gt; *).
Functor f =&gt;
(a -&gt; f b) -&gt; Raw s ia a -&gt; f (Raw s ia b)
</span><a href="Hiraffe.PlanarGraph.Component.html#dataVal"><span class="hs-identifier hs-var">dataVal</span></a></span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679224674"><span id="local-6989586621679224675"><span id="local-6989586621679224676"><span id="local-6989586621679224677"><span id="local-6989586621679224678"><span class="annot"><a href="Hiraffe.Graph.Class.html#HasEdges%27"><span class="hs-identifier hs-type">HasEdges'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224674"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224675"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224676"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224677"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224678"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-159"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Edge"><span class="annot"><a href="Hiraffe.Graph.Class.html#Edge"><span class="hs-identifier hs-var">Edge</span></a></span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224674"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224675"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224676"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224677"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224678"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679224677"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-160"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="EdgeIx"><span class="annot"><a href="Hiraffe.Graph.Class.html#EdgeIx"><span class="hs-identifier hs-var">EdgeIx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224674"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224675"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224676"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224677"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224678"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Dart.html#Dart"><span class="hs-identifier hs-type">Dart.Dart</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224675"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-161"></span><span>  </span><span id="local-6989586621679225342"><span class="annot"><span class="annottext">edgeAt :: EdgeIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (EdgeIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Edge (PlanarGraph w s v e f))
</span><a href="#local-6989586621679225342"><span class="hs-identifier hs-var hs-var hs-var hs-var">edgeAt</span></a></span></span><span> </span><span id="local-6989586621679225344"><span class="annot"><span class="annottext">EdgeIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225344"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Dart s)
-&gt; (Indexed
      Int
      (Edge (PlanarGraph w s v e f))
      (f (Edge (PlanarGraph w s v e f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; p (Edge (PlanarGraph w s v e f))
     (f (Edge (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall j (p :: * -&gt; * -&gt; *) i a b r.
Indexable j p =&gt;
(i -&gt; j) -&gt; (Indexed i a b -&gt; r) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Indexed.html#reindexed"><span class="hs-identifier hs-var">reindexed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dart s -&gt; Int -&gt; Dart s
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">EdgeIx (PlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679225344"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Indexed
    Int
    (Edge (PlanarGraph w s v e f))
    (f (Edge (PlanarGraph w s v e f)))
  -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
 -&gt; p (Edge (PlanarGraph w s v e f))
      (f (Edge (PlanarGraph w s v e f)))
 -&gt; PlanarGraph w s v e f
 -&gt; f (PlanarGraph w s v e f))
-&gt; (Indexed
      Int
      (Edge (PlanarGraph w s v e f))
      (f (Edge (PlanarGraph w s v e f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; p (Edge (PlanarGraph w s v e f))
     (f (Edge (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; f (NonEmptyVector (Raw s (DartIx (Component w s)) e)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
(NonEmptyVector (Raw s (Dart (Wrap s)) e)
 -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
forall {k} (w :: World) (s :: k) v e f e' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; f (NonEmptyVector (Raw s (DartIx (Component w s)) e')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f)
</span><a href="Hiraffe.PlanarGraph.Type.html#rawDartData"><span class="hs-identifier hs-var">rawDartData</span></a></span><span class="annot"><span class="annottext">((NonEmptyVector (Raw s (Dart (Wrap s)) e)
  -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
 -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; (Indexed Int e (f e)
    -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
    -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
-&gt; Indexed Int e (f e)
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">Index (NonEmptyVector (Raw s (Dart (Wrap s)) e))
-&gt; IndexedTraversal'
     (Index (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
     (NonEmptyVector (Raw s (Dart (Wrap s)) e))
     (IxValue (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
forall m.
Ixed m =&gt;
Index m -&gt; IndexedTraversal' (Index m) m (IxValue m)
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.At.html#iix"><span class="hs-identifier hs-var">iix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dart s -&gt; Int
forall a. Enum a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">fromEnum</span></span><span> </span><span class="annot"><span class="annottext">EdgeIx (PlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679225344"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Indexed
   Int (Raw s (Dart (Wrap s)) e) (f (Raw s (Dart (Wrap s)) e))
 -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
 -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
-&gt; ((e -&gt; f e)
    -&gt; Raw s (Dart (Wrap s)) e -&gt; f (Raw s (Dart (Wrap s)) e))
-&gt; Indexed Int e (f e)
-&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
-&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e))
forall i (p :: * -&gt; * -&gt; *) s t r a b.
Indexable i p =&gt;
(Indexed i s t -&gt; r) -&gt; ((a -&gt; b) -&gt; s -&gt; t) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Indexed.html#%3C."><span class="hs-operator hs-var">&lt;.</span></a></span><span> </span><span class="annot"><span class="annottext">(e -&gt; f e)
-&gt; Raw s (Dart (Wrap s)) e -&gt; f (Raw s (Dart (Wrap s)) e)
forall {k} (s :: k) ia a b (f :: * -&gt; *).
Functor f =&gt;
(a -&gt; f b) -&gt; Raw s ia a -&gt; f (Raw s ia b)
</span><a href="Hiraffe.PlanarGraph.Component.html#dataVal"><span class="hs-identifier hs-var">dataVal</span></a></span><span>
</span><span id="line-162"></span><span>  </span><span id="local-6989586621679225349"><span class="annot"><span class="annottext">numEdges :: PlanarGraph w s v e f -&gt; Int
</span><a href="#local-6989586621679225349"><span class="hs-identifier hs-var hs-var hs-var hs-var">numEdges</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`div`</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int)
-&gt; (PlanarGraph w s v e f -&gt; Int) -&gt; PlanarGraph w s v e f -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Raw s (Dart (Wrap s)) e) -&gt; Int
forall a. NonEmptyVector a -&gt; Int
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.html#length"><span class="hs-identifier hs-var">NonEmptyV.length</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (Dart (Wrap s)) e) -&gt; Int)
-&gt; (PlanarGraph w s v e f
    -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e))
-&gt; PlanarGraph w s v e f
-&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (DartIx (Component w s)) e)
PlanarGraph w s v e f -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (DartIx (Component w s)) e)
</span><a href="Hiraffe.PlanarGraph.Type.html#_rawDartData"><span class="hs-identifier hs-var">_rawDartData</span></a></span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679224693"><span id="local-6989586621679224694"><span id="local-6989586621679224695"><span id="local-6989586621679224696"><span id="local-6989586621679224697"><span id="local-6989586621679224698"><span class="annot"><a href="Hiraffe.Graph.Class.html#HasEdges"><span class="hs-identifier hs-type">HasEdges</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224693"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224694"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224695"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224696"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224697"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224693"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224694"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224695"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224698"><span class="hs-identifier hs-type">e'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224697"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-165"></span><span>  </span><span id="local-6989586621679225363"><span class="annot"><span class="annottext">edges :: IndexedTraversal
  (EdgeIx (PlanarGraph w s v e f))
  (PlanarGraph w s v e f)
  (PlanarGraph w s v e' f)
  (Edge (PlanarGraph w s v e f))
  (Edge (PlanarGraph w s v e' f))
</span><a href="#local-6989586621679225363"><span class="hs-identifier hs-var hs-var hs-var hs-var">edges</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Dart s -&gt; e -&gt; f e')
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f)
</span><a href="#local-6989586621679225365"><span class="hs-identifier hs-var">itraverse'</span></a></span><span class="annot"><span class="annottext">((Dart s -&gt; e -&gt; f e')
 -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f))
-&gt; (p e (f e') -&gt; Dart s -&gt; e -&gt; f e')
-&gt; p e (f e')
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e' f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">p e (f e') -&gt; Dart s -&gt; e -&gt; f e'
forall a b. p a b -&gt; Dart s -&gt; a -&gt; b
forall i (p :: * -&gt; * -&gt; *) a b.
Indexable i p =&gt;
p a b -&gt; i -&gt; a -&gt; b
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Internal.Indexed.html#indexed"><span class="hs-identifier hs-var">indexed</span></a></span><span>
</span><span id="line-166"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-167"></span><span>      </span><span id="local-6989586621679225365"><span class="annot"><span class="annottext">itraverse' :: (Dart s -&gt; e -&gt; f e')
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f)
</span><a href="#local-6989586621679225365"><span class="hs-identifier hs-var hs-var">itraverse'</span></a></span></span><span> </span><span id="local-6989586621679225367"><span class="annot"><span class="annottext">Dart s -&gt; e -&gt; f e'
</span><a href="#local-6989586621679225367"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WrappedApplicative f (PlanarGraph w s v e' f)
-&gt; f (PlanarGraph w s v e' f)
forall (f :: * -&gt; *) a. WrappedApplicative f a -&gt; f a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/semigroupoids-6.0.1-36d342cde7a7497254e75243ba69a20ee3a483aa51faffba18f9136870dc1519/share/doc/html/src/Data.Functor.Bind.Class.html#unwrapApplicative"><span class="hs-identifier hs-var">Apply.unwrapApplicative</span></a></span><span>
</span><span id="line-168"></span><span>                   </span><span class="annot"><span class="annottext">(WrappedApplicative f (PlanarGraph w s v e' f)
 -&gt; f (PlanarGraph w s v e' f))
-&gt; (PlanarGraph w s v e f
    -&gt; WrappedApplicative f (PlanarGraph w s v e' f))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e' f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Dart s -&gt; e -&gt; WrappedApplicative f e')
-&gt; PlanarGraph w s v e f
-&gt; WrappedApplicative f (PlanarGraph w s v e' f)
forall (g :: * -&gt; *).
Apply g =&gt;
(Dart s -&gt; e -&gt; g e')
-&gt; PlanarGraph w s v e f -&gt; g (PlanarGraph w s v e' f)
</span><a href="#local-6989586621679225369"><span class="hs-identifier hs-var">itraverse1'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679225370"><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679225370"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679225371"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679225371"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">f e' -&gt; WrappedApplicative f e'
forall (f :: * -&gt; *) a. f a -&gt; WrappedApplicative f a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/semigroupoids-6.0.1-36d342cde7a7497254e75243ba69a20ee3a483aa51faffba18f9136870dc1519/share/doc/html/src/Data.Functor.Bind.Class.html#WrapApplicative"><span class="hs-identifier hs-var">Apply.WrapApplicative</span></a></span><span> </span><span class="annot"><span class="annottext">(f e' -&gt; WrappedApplicative f e')
-&gt; f e' -&gt; WrappedApplicative f e'
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dart s -&gt; e -&gt; f e'
</span><a href="#local-6989586621679225367"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679225370"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679225371"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span>      </span><span id="local-6989586621679224709"><span class="annot"><a href="#local-6989586621679225369"><span class="hs-identifier hs-type">itraverse1'</span></a></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/semigroupoids-6.0.1-36d342cde7a7497254e75243ba69a20ee3a483aa51faffba18f9136870dc1519/share/doc/html/src/Data.Functor.Bind.Class.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224709"><span class="hs-identifier hs-type">g</span></a></span><span>
</span><span id="line-171"></span><span>                       </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Dart.html#Dart"><span class="hs-identifier hs-type">Dart.Dart</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224694"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679224696"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679224709"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224698"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224693"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224694"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224695"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224696"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224697"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679224709"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224693"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224694"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224695"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224698"><span class="hs-identifier hs-type">e'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224697"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-173"></span><span>      </span><span id="local-6989586621679225369"><span class="annot"><span class="annottext">itraverse1' :: forall (g :: * -&gt; *).
Apply g =&gt;
(Dart s -&gt; e -&gt; g e')
-&gt; PlanarGraph w s v e f -&gt; g (PlanarGraph w s v e' f)
</span><a href="#local-6989586621679225369"><span class="hs-identifier hs-var hs-var">itraverse1'</span></a></span></span><span> </span><span id="local-6989586621679225377"><span class="annot"><span class="annottext">Dart s -&gt; e -&gt; g e'
</span><a href="#local-6989586621679225377"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679225378"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225378"><span class="hs-identifier hs-var">pg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225378"><span class="hs-identifier hs-var">pg</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; (PlanarGraph w s v e f -&gt; g (PlanarGraph w s v e' f))
-&gt; g (PlanarGraph w s v e' f)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; g (NonEmptyVector (Raw s (DartIx (Component w s)) e')))
-&gt; PlanarGraph w s v e f -&gt; g (PlanarGraph w s v e' f)
(NonEmptyVector (Raw s (Dart (Wrap s)) e)
 -&gt; g (NonEmptyVector (Raw s (Dart (Wrap s)) e')))
-&gt; PlanarGraph w s v e f -&gt; g (PlanarGraph w s v e' f)
forall {k} (w :: World) (s :: k) v e f e' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; f (NonEmptyVector (Raw s (DartIx (Component w s)) e')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f)
</span><a href="Hiraffe.PlanarGraph.Type.html#rawDartData"><span class="hs-identifier hs-var">rawDartData</span></a></span><span> </span><span class="annot"><span class="annottext">((NonEmptyVector (Raw s (Dart (Wrap s)) e)
  -&gt; g (NonEmptyVector (Raw s (Dart (Wrap s)) e')))
 -&gt; PlanarGraph w s v e f -&gt; g (PlanarGraph w s v e' f))
-&gt; (NonEmptyVector (Raw s (Dart (Wrap s)) e)
    -&gt; g (NonEmptyVector (Raw s (Dart (Wrap s)) e')))
-&gt; PlanarGraph w s v e f
-&gt; g (PlanarGraph w s v e' f)
forall {k} (f :: k -&gt; *) s (t :: k) a (b :: k).
LensLike f s t a b -&gt; LensLike f s t a b
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Lens.html#%25%25~"><span class="hs-operator hs-var">%%~</span></a></span><span> </span><span class="annot"><span class="annottext">(Dart s -&gt; e -&gt; g e')
-&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
-&gt; g (NonEmptyVector (Raw s (Dart (Wrap s)) e'))
forall {k} (g :: * -&gt; *) (s :: k) a e e'.
Apply g =&gt;
(Dart s -&gt; e -&gt; g e')
-&gt; NonEmptyVector (Raw s a e) -&gt; g (NonEmptyVector (Raw s a e'))
</span><a href="Hiraffe.PlanarGraph.Type.html#itraverseEdges1"><span class="hs-identifier hs-var">itraverseEdges1</span></a></span><span> </span><span class="annot"><span class="annottext">Dart s -&gt; e -&gt; g e'
</span><a href="#local-6989586621679225377"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span class="annot"><span class="hs-comment">-- | itraverse the edges; i.e. makes sure to only apply our function to the positive darts.</span></span><span>
</span><span id="line-176"></span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#itraverseEdges1"><span class="hs-identifier hs-type">itraverseEdges1</span></a></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679224723"><span class="annot"><a href="#local-6989586621679224723"><span class="hs-identifier hs-type">g</span></a></span></span><span> </span><span id="local-6989586621679224724"><span class="annot"><a href="#local-6989586621679224724"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679224727"><span class="annot"><a href="#local-6989586621679224727"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679224725"><span class="annot"><a href="#local-6989586621679224725"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621679224726"><span class="annot"><a href="#local-6989586621679224726"><span class="hs-identifier hs-type">e'</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/semigroupoids-6.0.1-36d342cde7a7497254e75243ba69a20ee3a483aa51faffba18f9136870dc1519/share/doc/html/src/Data.Functor.Bind.Class.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224723"><span class="hs-identifier hs-type">g</span></a></span><span>
</span><span id="line-177"></span><span>                    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Dart.html#Dart"><span class="hs-identifier hs-type">Dart.Dart</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224724"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679224725"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679224723"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224726"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224724"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224727"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224725"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679224723"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224724"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224727"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224726"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span id="itraverseEdges1"><span class="annot"><span class="annottext">itraverseEdges1 :: forall {k} (g :: * -&gt; *) (s :: k) a e e'.
Apply g =&gt;
(Dart s -&gt; e -&gt; g e')
-&gt; NonEmptyVector (Raw s a e) -&gt; g (NonEmptyVector (Raw s a e'))
</span><a href="Hiraffe.PlanarGraph.Type.html#itraverseEdges1"><span class="hs-identifier hs-var hs-var">itraverseEdges1</span></a></span></span><span> </span><span id="local-6989586621679225396"><span class="annot"><span class="annottext">Dart s -&gt; e -&gt; g e'
</span><a href="#local-6989586621679225396"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679225397"><span class="annot"><span class="annottext">NonEmptyVector (Raw s a e)
</span><a href="#local-6989586621679225397"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty (Int, e') -&gt; NonEmptyVector (Raw s a e')
</span><a href="#local-6989586621679225398"><span class="hs-identifier hs-var">copyPositives</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty (Int, e') -&gt; NonEmptyVector (Raw s a e'))
-&gt; g (NonEmpty (Int, e')) -&gt; g (NonEmptyVector (Raw s a e'))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">g (NonEmpty (Int, e'))
</span><a href="#local-6989586621679225400"><span class="hs-identifier hs-var">gv'</span></a></span><span>
</span><span id="line-181"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-182"></span><span>    </span><span class="hs-comment">-- We collect only the positive darts, and apply the given function on them. We tag</span><span>
</span><span id="line-183"></span><span>    </span><span class="hs-comment">-- the result with the dart they correspond to (or rather, the corresponding index)</span><span>
</span><span id="line-184"></span><span>    </span><span class="annot"><a href="#local-6989586621679225400"><span class="hs-identifier hs-type">gv'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679224723"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679224726"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-185"></span><span>    </span><span id="local-6989586621679225400"><span class="annot"><span class="annottext">gv' :: g (NonEmpty (Int, e'))
</span><a href="#local-6989586621679225400"><span class="hs-identifier hs-var hs-var">gv'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty (g (Int, e')) -&gt; g (NonEmpty (Int, e'))
forall (t :: * -&gt; *) (f :: * -&gt; *) b.
(Traversable1 t, Apply f) =&gt;
t (f b) -&gt; f (t b)
forall (f :: * -&gt; *) b. Apply f =&gt; NonEmpty (f b) -&gt; f (NonEmpty b)
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/semigroupoids-6.0.1-36d342cde7a7497254e75243ba69a20ee3a483aa51faffba18f9136870dc1519/share/doc/html/src/Data.Semigroup.Traversable.Class.html#sequence1"><span class="hs-identifier hs-var">sequence1</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty (g (Int, e')) -&gt; g (NonEmpty (Int, e')))
-&gt; ([g (Int, e')] -&gt; NonEmpty (g (Int, e')))
-&gt; [g (Int, e')]
-&gt; g (NonEmpty (Int, e'))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[g (Int, e')] -&gt; NonEmpty (g (Int, e'))
forall a. HasCallStack =&gt; [a] -&gt; NonEmpty a
</span><span class="hs-identifier hs-var">NonEmpty.fromList</span></span><span> </span><span class="annot"><span class="annottext">([g (Int, e')] -&gt; g (NonEmpty (Int, e')))
-&gt; [g (Int, e')] -&gt; g (NonEmpty (Int, e'))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Raw s a e -&gt; [g (Int, e')] -&gt; [g (Int, e')])
-&gt; [g (Int, e')] -&gt; NonEmptyVector (Raw s a e) -&gt; [g (Int, e')]
forall a b. (Int -&gt; a -&gt; b -&gt; b) -&gt; b -&gt; NonEmptyVector a -&gt; b
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.html#ifoldr"><span class="hs-identifier hs-var">NonEmptyV.ifoldr</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Raw s a e -&gt; [g (Int, e')] -&gt; [g (Int, e')]
</span><a href="#local-6989586621679225404"><span class="hs-identifier hs-var">applyF</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Raw s a e)
</span><a href="#local-6989586621679225397"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-186"></span><span>    </span><span id="local-6989586621679225404"><span class="annot"><span class="annottext">applyF :: Int -&gt; Raw s a e -&gt; [g (Int, e')] -&gt; [g (Int, e')]
</span><a href="#local-6989586621679225404"><span class="hs-identifier hs-var hs-var">applyF</span></a></span></span><span> </span><span id="local-6989586621679225405"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225405"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679225406"><span class="annot"><span class="annottext">Raw s a e
</span><a href="#local-6989586621679225406"><span class="hs-identifier hs-var">raw</span></a></span></span><span> </span><span id="local-6989586621679225407"><span class="annot"><span class="annottext">[g (Int, e')]
</span><a href="#local-6989586621679225407"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679225408"><span class="annot"><span class="annottext">d :: Dart s
</span><a href="#local-6989586621679225408"><span class="hs-identifier hs-var hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Dart s
forall a. Enum a =&gt; Int -&gt; a
</span><span class="hs-identifier hs-var">toEnum</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225405"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-187"></span><span>                      </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Dart s -&gt; Bool
forall {k} (s :: k). Dart s -&gt; Bool
</span><a href="Hiraffe.PlanarGraph.Dart.html#isPositive"><span class="hs-identifier hs-var">Dart.isPositive</span></a></span><span> </span><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679225408"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-188"></span><span>                         </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225405"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(e' -&gt; (Int, e')) -&gt; g e' -&gt; g (Int, e')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Dart s -&gt; e -&gt; g e'
</span><a href="#local-6989586621679225396"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679225408"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Raw s a e
</span><a href="#local-6989586621679225406"><span class="hs-identifier hs-var">raw</span></a></span><span class="annot"><span class="annottext">Raw s a e -&gt; Getting e (Raw s a e) e -&gt; e
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">Getting e (Raw s a e) e
forall {k} (s :: k) ia a b (f :: * -&gt; *).
Functor f =&gt;
(a -&gt; f b) -&gt; Raw s ia a -&gt; f (Raw s ia b)
</span><a href="Hiraffe.PlanarGraph.Component.html#dataVal"><span class="hs-identifier hs-var">dataVal</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">g (Int, e') -&gt; [g (Int, e')] -&gt; [g (Int, e')]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[g (Int, e')]
</span><a href="#local-6989586621679225407"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-189"></span><span>                         </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[g (Int, e')]
</span><a href="#local-6989586621679225407"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span>    </span><span class="hs-comment">-- We simultaneously scan through the original vector and the result of processing the</span><span>
</span><span id="line-192"></span><span>    </span><span class="hs-comment">-- positive darts. For positive darts we simply take the value as computed before. For</span><span>
</span><span id="line-193"></span><span>    </span><span class="hs-comment">-- negative darts, we lookup the value that we computed for their corresponding twin.</span><span>
</span><span id="line-194"></span><span>    </span><span class="hs-comment">-- i.e. by tying the knot.</span><span>
</span><span id="line-195"></span><span>    </span><span class="annot"><a href="#local-6989586621679225398"><span class="hs-identifier hs-type">copyPositives</span></a></span><span>           </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679224726"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224724"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224727"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224726"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>    </span><span id="local-6989586621679225398"><span class="annot"><span class="annottext">copyPositives :: NonEmpty (Int, e') -&gt; NonEmptyVector (Raw s a e')
</span><a href="#local-6989586621679225398"><span class="hs-identifier hs-var hs-var">copyPositives</span></a></span></span><span> </span><span id="local-6989586621679225410"><span class="annot"><span class="annottext">NonEmpty (Int, e')
</span><a href="#local-6989586621679225410"><span class="hs-identifier hs-var">positives</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Int, e')]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621679225411"><span class="annot"><span class="annottext">NonEmptyVector (Raw s a e')
</span><a href="#local-6989586621679225411"><span class="hs-identifier hs-var">v'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; [(Int, e')] -&gt; Raw s a e -&gt; ([(Int, e')], Raw s a e'))
-&gt; [(Int, e')]
-&gt; NonEmptyVector (Raw s a e)
-&gt; ([(Int, e')], NonEmptyVector (Raw s a e'))
forall i (t :: * -&gt; *) s a b.
TraversableWithIndex i t =&gt;
(i -&gt; s -&gt; a -&gt; (s, b)) -&gt; s -&gt; t a -&gt; (s, t b)
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/indexed-traversable-0.1.4-1a81bb13fac1c6820d2dd6aa0a3932cc364a4e28bb77b37fce40c78cd6c82c08/share/doc/html/src/Data.Traversable.WithIndex.html#imapAccumL"><span class="hs-identifier hs-var">imapAccumL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmptyVector (Raw s a e')
-&gt; Int -&gt; [(Int, e')] -&gt; Raw s a e -&gt; ([(Int, e')], Raw s a e')
forall {k} {k} {s :: k} {ia} {b} {s :: k} {ia} {a}.
NonEmptyVector (Raw s ia b)
-&gt; Int -&gt; [(Int, b)] -&gt; Raw s ia a -&gt; ([(Int, b)], Raw s ia b)
</span><a href="#local-6989586621679225413"><span class="hs-identifier hs-var">setDartValue</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Raw s a e')
</span><a href="#local-6989586621679225411"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty (Int, e') -&gt; [(Int, e')]
forall a. NonEmpty a -&gt; [a]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">F.toList</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Int, e')
</span><a href="#local-6989586621679225410"><span class="hs-identifier hs-var">positives</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Raw s a e)
</span><a href="#local-6989586621679225397"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-198"></span><span>                              </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Raw s a e')
</span><a href="#local-6989586621679225411"><span class="hs-identifier hs-var">v'</span></a></span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span>    </span><span id="local-6989586621679225413"><span class="annot"><span class="annottext">setDartValue :: NonEmptyVector (Raw s ia b)
-&gt; Int -&gt; [(Int, b)] -&gt; Raw s ia a -&gt; ([(Int, b)], Raw s ia b)
</span><a href="#local-6989586621679225413"><span class="hs-identifier hs-var hs-var">setDartValue</span></a></span></span><span> </span><span id="local-6989586621679225423"><span class="annot"><span class="annottext">NonEmptyVector (Raw s ia b)
</span><a href="#local-6989586621679225423"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span id="local-6989586621679225424"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225424"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679225425"><span class="annot"><span class="annottext">[(Int, b)]
</span><a href="#local-6989586621679225425"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span id="local-6989586621679225426"><span class="annot"><span class="annottext">Raw s ia a
</span><a href="#local-6989586621679225426"><span class="hs-identifier hs-var">raw</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[(Int, b)]
</span><a href="#local-6989586621679225425"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-201"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679225427"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225427"><span class="hs-identifier hs-var">j</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679225428"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679225428"><span class="hs-identifier hs-var">e'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679225429"><span class="annot"><span class="annottext">[(Int, b)]
</span><a href="#local-6989586621679225429"><span class="hs-identifier hs-var">xs'</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225424"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225427"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Int, b)]
</span><a href="#local-6989586621679225429"><span class="hs-identifier hs-var">xs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Raw s ia a
</span><a href="#local-6989586621679225426"><span class="hs-identifier hs-var">raw</span></a></span><span class="annot"><span class="annottext">Raw s ia a -&gt; (Raw s ia a -&gt; Raw s ia b) -&gt; Raw s ia b
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span class="annot"><span class="annottext">(a -&gt; Identity b) -&gt; Raw s ia a -&gt; Identity (Raw s ia b)
forall {k} (s :: k) ia a b (f :: * -&gt; *).
Functor f =&gt;
(a -&gt; f b) -&gt; Raw s ia a -&gt; f (Raw s ia b)
</span><a href="Hiraffe.PlanarGraph.Component.html#dataVal"><span class="hs-identifier hs-var">dataVal</span></a></span><span> </span><span class="annot"><span class="annottext">((a -&gt; Identity b) -&gt; Raw s ia a -&gt; Identity (Raw s ia b))
-&gt; b -&gt; Raw s ia a -&gt; Raw s ia b
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Setter.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679225428"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span>        </span><span class="annot"><span class="annottext">[(Int, b)]
</span><span class="hs-identifier">_</span></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679225431"><span class="annot"><span class="annottext">i' :: Int
</span><a href="#local-6989586621679225431"><span class="hs-identifier hs-var hs-var">i'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dart Any -&gt; Int
forall a. Enum a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">fromEnum</span></span><span> </span><span class="annot"><span class="annottext">(Dart Any -&gt; Int) -&gt; (Int -&gt; Dart Any) -&gt; Int -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Dart Any -&gt; Dart Any
forall {k} (s :: k). Dart s -&gt; Dart s
</span><a href="Hiraffe.PlanarGraph.Dart.html#twin"><span class="hs-identifier hs-var">Dart.twin</span></a></span><span> </span><span class="annot"><span class="annottext">(Dart Any -&gt; Dart Any) -&gt; (Int -&gt; Dart Any) -&gt; Int -&gt; Dart Any
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Dart Any
forall a. Enum a =&gt; Int -&gt; a
</span><span class="hs-identifier hs-var">toEnum</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; Int -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225424"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-203"></span><span>                                 </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Int, b)]
</span><a href="#local-6989586621679225425"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Raw s ia a
</span><a href="#local-6989586621679225426"><span class="hs-identifier hs-var">raw</span></a></span><span class="annot"><span class="annottext">Raw s ia a -&gt; (Raw s ia a -&gt; Raw s ia b) -&gt; Raw s ia b
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span class="annot"><span class="annottext">(a -&gt; Identity b) -&gt; Raw s ia a -&gt; Identity (Raw s ia b)
forall {k} (s :: k) ia a b (f :: * -&gt; *).
Functor f =&gt;
(a -&gt; f b) -&gt; Raw s ia a -&gt; f (Raw s ia b)
</span><a href="Hiraffe.PlanarGraph.Component.html#dataVal"><span class="hs-identifier hs-var">dataVal</span></a></span><span> </span><span class="annot"><span class="annottext">((a -&gt; Identity b) -&gt; Raw s ia a -&gt; Identity (Raw s ia b))
-&gt; b -&gt; Raw s ia a -&gt; Raw s ia b
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Setter.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmptyVector (Raw s ia b)
</span><a href="#local-6989586621679225423"><span class="hs-identifier hs-var">v'</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Raw s ia b) -&gt; Int -&gt; Raw s ia b
forall a. NonEmptyVector a -&gt; Int -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.html#%21"><span class="hs-operator hs-var">NonEmptyV.!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225431"><span class="hs-identifier hs-var">i'</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">Raw s ia b -&gt; Getting b (Raw s ia b) b -&gt; b
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">Getting b (Raw s ia b) b
forall {k} (s :: k) ia a b (f :: * -&gt; *).
Functor f =&gt;
(a -&gt; f b) -&gt; Raw s ia a -&gt; f (Raw s ia b)
</span><a href="Hiraffe.PlanarGraph.Component.html#dataVal"><span class="hs-identifier hs-var">dataVal</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span>
</span><span id="line-206"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679224780"><span id="local-6989586621679224781"><span id="local-6989586621679224782"><span id="local-6989586621679224783"><span id="local-6989586621679224784"><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#HasFaces%27"><span class="hs-identifier hs-type">HasFaces'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224780"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224781"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224782"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224783"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224784"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-207"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Face"><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#Face"><span class="hs-identifier hs-var">Face</span></a></span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224780"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224781"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224782"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224783"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224784"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679224784"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-208"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="FaceIx"><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#FaceIx"><span class="hs-identifier hs-var">FaceIx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224780"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224781"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224782"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224783"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224784"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#FaceId"><span class="hs-identifier hs-type">FaceId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224781"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-209"></span><span>  </span><span id="local-6989586621679225454"><span class="annot"><span class="annottext">faceAt :: FaceIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (FaceIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Face (PlanarGraph w s v e f))
</span><a href="#local-6989586621679225454"><span class="hs-identifier hs-var hs-var hs-var hs-var">faceAt</span></a></span></span><span> </span><span id="local-6989586621679225456"><span class="annot"><span class="annottext">FaceIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225456"><span class="hs-identifier hs-var">fi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; FaceId s)
-&gt; (Indexed
      Int
      (Face (PlanarGraph w s v e f))
      (f (Face (PlanarGraph w s v e f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; p (Face (PlanarGraph w s v e f))
     (f (Face (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall j (p :: * -&gt; * -&gt; *) i a b r.
Indexable j p =&gt;
(i -&gt; j) -&gt; (Indexed i a b -&gt; r) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Indexed.html#reindexed"><span class="hs-identifier hs-var">reindexed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FaceId s -&gt; Int -&gt; FaceId s
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">FaceId s
FaceIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225456"><span class="hs-identifier hs-var">fi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span>            </span><span class="annot"><span class="annottext">((Indexed
    Int
    (Face (PlanarGraph w s v e f))
    (f (Face (PlanarGraph w s v e f)))
  -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
 -&gt; p (Face (PlanarGraph w s v e f))
      (f (Face (PlanarGraph w s v e f)))
 -&gt; PlanarGraph w s v e f
 -&gt; f (PlanarGraph w s v e f))
-&gt; (Indexed
      Int
      (Face (PlanarGraph w s v e f))
      (f (Face (PlanarGraph w s v e f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; p (Face (PlanarGraph w s v e f))
     (f (Face (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (RawFace s f) -&gt; f (NonEmptyVector (RawFace s f)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
forall {k} (w :: World) (s :: k) v e f f' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (RawFace s f) -&gt; f (NonEmptyVector (RawFace s f')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f')
</span><a href="Hiraffe.PlanarGraph.Type.html#rawFaceData"><span class="hs-identifier hs-var">rawFaceData</span></a></span><span> </span><span class="annot"><span class="annottext">((NonEmptyVector (RawFace s f) -&gt; f (NonEmptyVector (RawFace s f)))
 -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; (Indexed Int f (f f)
    -&gt; NonEmptyVector (RawFace s f)
    -&gt; f (NonEmptyVector (RawFace s f)))
-&gt; Indexed Int f (f f)
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Indexed.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Index (NonEmptyVector (RawFace s f))
-&gt; IndexedTraversal'
     (Index (NonEmptyVector (RawFace s f)))
     (NonEmptyVector (RawFace s f))
     (IxValue (NonEmptyVector (RawFace s f)))
forall m.
Ixed m =&gt;
Index m -&gt; IndexedTraversal' (Index m) m (IxValue m)
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.At.html#iix"><span class="hs-identifier hs-var">iix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FaceId s -&gt; Int
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">FaceId s
FaceIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225456"><span class="hs-identifier hs-var">fi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Indexed Int (RawFace s f) (f (RawFace s f))
 -&gt; NonEmptyVector (RawFace s f)
 -&gt; f (NonEmptyVector (RawFace s f)))
-&gt; ((f -&gt; f f) -&gt; RawFace s f -&gt; f (RawFace s f))
-&gt; Indexed Int f (f f)
-&gt; NonEmptyVector (RawFace s f)
-&gt; f (NonEmptyVector (RawFace s f))
forall i (p :: * -&gt; * -&gt; *) s t r a b.
Indexable i p =&gt;
(Indexed i s t -&gt; r) -&gt; ((a -&gt; b) -&gt; s -&gt; t) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Indexed.html#%3C."><span class="hs-operator hs-var">&lt;.</span></a></span><span> </span><span class="annot"><span class="annottext">(FaceData (Dart s) f -&gt; f (FaceData (Dart s) f))
-&gt; RawFace s f -&gt; f (RawFace s f)
forall {k} (s :: k) f1 f' (f2 :: * -&gt; *).
Functor f2 =&gt;
(FaceData (Dart s) f1 -&gt; f2 (FaceData (Dart s) f'))
-&gt; RawFace s f1 -&gt; f2 (RawFace s f')
</span><a href="Hiraffe.PlanarGraph.Component.html#faceDataVal"><span class="hs-identifier hs-var">faceDataVal</span></a></span><span class="annot"><span class="annottext">((FaceData (Dart s) f -&gt; f (FaceData (Dart s) f))
 -&gt; RawFace s f -&gt; f (RawFace s f))
-&gt; ((f -&gt; f f) -&gt; FaceData (Dart s) f -&gt; f (FaceData (Dart s) f))
-&gt; (f -&gt; f f)
-&gt; RawFace s f
-&gt; f (RawFace s f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">(f -&gt; f f) -&gt; FaceData (Dart s) f -&gt; f (FaceData (Dart s) f)
forall h f1 f' (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 -&gt; f2 f') -&gt; FaceData h f1 -&gt; f2 (FaceData h f')
</span><a href="Hiraffe.PlanarGraph.Component.html#fData"><span class="hs-identifier hs-var">fData</span></a></span><span>
</span><span id="line-211"></span><span>  </span><span id="local-6989586621679225459"><span class="annot"><span class="annottext">numFaces :: PlanarGraph w s v e f -&gt; Int
</span><a href="#local-6989586621679225459"><span class="hs-identifier hs-var hs-var hs-var hs-var">numFaces</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (RawFace s f) -&gt; Int
forall a. NonEmptyVector a -&gt; Int
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.html#length"><span class="hs-identifier hs-var">NonEmptyV.length</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (RawFace s f) -&gt; Int)
-&gt; (PlanarGraph w s v e f -&gt; NonEmptyVector (RawFace s f))
-&gt; PlanarGraph w s v e f
-&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f -&gt; NonEmptyVector (RawFace s f)
forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f -&gt; NonEmptyVector (RawFace s f)
</span><a href="Hiraffe.PlanarGraph.Type.html#_rawFaceData"><span class="hs-identifier hs-var">_rawFaceData</span></a></span><span>
</span><span id="line-212"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#numFaces"><span class="hs-pragma hs-type">numFaces</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679224809"><span id="local-6989586621679224810"><span id="local-6989586621679224811"><span id="local-6989586621679224812"><span id="local-6989586621679224813"><span id="local-6989586621679224814"><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#HasFaces"><span class="hs-identifier hs-type">HasFaces</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224809"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224810"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224811"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224812"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224813"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224809"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224810"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224811"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224812"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224814"><span class="hs-identifier hs-type">f'</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-215"></span><span>  </span><span id="local-6989586621679225481"><span class="annot"><span class="annottext">faces :: IndexedTraversal1
  (FaceIx (PlanarGraph w s v e f))
  (PlanarGraph w s v e f)
  (PlanarGraph w s v e f')
  (Face (PlanarGraph w s v e f))
  (Face (PlanarGraph w s v e f'))
</span><a href="#local-6989586621679225481"><span class="hs-identifier hs-var hs-var hs-var hs-var">faces</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; FaceId s)
-&gt; (Indexed
      Int
      (Face (PlanarGraph w s v e f))
      (f (Face (PlanarGraph w s v e f')))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f'))
-&gt; p (Face (PlanarGraph w s v e f))
     (f (Face (PlanarGraph w s v e f')))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f')
forall j (p :: * -&gt; * -&gt; *) i a b r.
Indexable j p =&gt;
(i -&gt; j) -&gt; (Indexed i a b -&gt; r) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Indexed.html#reindexed"><span class="hs-identifier hs-var">reindexed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; FaceId s
Int -&gt; FaceIx (PlanarGraph w s v e f)
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#FaceIx"><span class="hs-identifier hs-type">FaceIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224809"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224810"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224811"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224812"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224813"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span>        </span><span class="annot"><span class="annottext">((Indexed
    Int
    (Face (PlanarGraph w s v e f))
    (f (Face (PlanarGraph w s v e f')))
  -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f'))
 -&gt; p (Face (PlanarGraph w s v e f))
      (f (Face (PlanarGraph w s v e f')))
 -&gt; PlanarGraph w s v e f
 -&gt; f (PlanarGraph w s v e f'))
-&gt; (Indexed
      Int
      (Face (PlanarGraph w s v e f))
      (f (Face (PlanarGraph w s v e f')))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f'))
-&gt; p (Face (PlanarGraph w s v e f))
     (f (Face (PlanarGraph w s v e f')))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f')
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (RawFace s f) -&gt; f (NonEmptyVector (RawFace s f')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f')
forall {k} (w :: World) (s :: k) v e f f' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (RawFace s f) -&gt; f (NonEmptyVector (RawFace s f')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f')
</span><a href="Hiraffe.PlanarGraph.Type.html#rawFaceData"><span class="hs-identifier hs-var">rawFaceData</span></a></span><span> </span><span class="annot"><span class="annottext">((NonEmptyVector (RawFace s f)
  -&gt; f (NonEmptyVector (RawFace s f')))
 -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f'))
-&gt; (Indexed Int f (f f')
    -&gt; NonEmptyVector (RawFace s f)
    -&gt; f (NonEmptyVector (RawFace s f')))
-&gt; Indexed Int f (f f')
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f')
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Indexed.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Indexed Int (RawFace s f) (f (RawFace s f'))
-&gt; NonEmptyVector (RawFace s f)
-&gt; f (NonEmptyVector (RawFace s f'))
forall (f :: * -&gt; *) a b.
Traversable1 f =&gt;
IndexedTraversal1 Int (f a) (f b) a b
IndexedTraversal1
  Int
  (NonEmptyVector (RawFace s f))
  (NonEmptyVector (RawFace s f'))
  (RawFace s f)
  (RawFace s f')
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Traversal.html#traversed1"><span class="hs-identifier hs-var">traversed1</span></a></span><span> </span><span class="annot"><span class="annottext">(Indexed Int (RawFace s f) (f (RawFace s f'))
 -&gt; NonEmptyVector (RawFace s f)
 -&gt; f (NonEmptyVector (RawFace s f')))
-&gt; ((f -&gt; f f') -&gt; RawFace s f -&gt; f (RawFace s f'))
-&gt; Indexed Int f (f f')
-&gt; NonEmptyVector (RawFace s f)
-&gt; f (NonEmptyVector (RawFace s f'))
forall i (p :: * -&gt; * -&gt; *) s t r a b.
Indexable i p =&gt;
(Indexed i s t -&gt; r) -&gt; ((a -&gt; b) -&gt; s -&gt; t) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Indexed.html#%3C."><span class="hs-operator hs-var">&lt;.</span></a></span><span> </span><span class="annot"><span class="annottext">(FaceData (Dart s) f -&gt; f (FaceData (Dart s) f'))
-&gt; RawFace s f -&gt; f (RawFace s f')
forall {k} (s :: k) f1 f' (f2 :: * -&gt; *).
Functor f2 =&gt;
(FaceData (Dart s) f1 -&gt; f2 (FaceData (Dart s) f'))
-&gt; RawFace s f1 -&gt; f2 (RawFace s f')
</span><a href="Hiraffe.PlanarGraph.Component.html#faceDataVal"><span class="hs-identifier hs-var">faceDataVal</span></a></span><span class="annot"><span class="annottext">((FaceData (Dart s) f -&gt; f (FaceData (Dart s) f'))
 -&gt; RawFace s f -&gt; f (RawFace s f'))
-&gt; ((f -&gt; f f') -&gt; FaceData (Dart s) f -&gt; f (FaceData (Dart s) f'))
-&gt; (f -&gt; f f')
-&gt; RawFace s f
-&gt; f (RawFace s f')
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">(f -&gt; f f') -&gt; FaceData (Dart s) f -&gt; f (FaceData (Dart s) f')
forall h f1 f' (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 -&gt; f2 f') -&gt; FaceData h f1 -&gt; f2 (FaceData h f')
</span><a href="Hiraffe.PlanarGraph.Component.html#fData"><span class="hs-identifier hs-var">fData</span></a></span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span class="hs-comment">{-

instance HasConnectedComponents' (PlanarGraph w s v e f) where
  -- TODO: Hmm, should this return an actual component, i.e. in which
  -- the vertices store .s.t of value v? darts of value e etc. ?
  type ConnectedComponent   (PlanarGraph w s v e f) = s v e f
  type ConnectedComponentIx (PlanarGraph w s v e f) =
  -- connectedComponentAt pg =
  numConnectedComponents pg = NonEmptyV.length . _components

-- hmm, I guess this thing cannot be type changing in our case?
instance HasConnectedComponents (PlanarGraph w s v e f) (PlanarGraph w s v e f) where
  connectedComponents =

-}</span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span>
</span><span id="line-237"></span><span class="hs-comment">-- DartIx</span><span>
</span><span id="line-238"></span><span class="hs-comment">--                              (pg</span><span>
</span><span id="line-239"></span><span class="hs-comment">--                                 (Hiraffe.PlanarGraph.Component.Wrap s)</span><span>
</span><span id="line-240"></span><span class="hs-comment">--                                 (VertexId s)</span><span>
</span><span id="line-241"></span><span class="hs-comment">--                                 (Dart.Dart s)</span><span>
</span><span id="line-242"></span><span class="hs-comment">--                                 (FaceId s))</span><span>
</span><span id="line-243"></span><span class="hs-comment">--                      with:</span><span>
</span><span id="line-244"></span><span>
</span><span id="line-245"></span><span class="hs-comment">-- type IsComponent s = ( DartIx   (Component s) ~ Dart.Dart (Wrap s)</span><span>
</span><span id="line-246"></span><span class="hs-comment">--                         , VertexIx (Component s) ~ VertexId (Wrap s)</span><span>
</span><span id="line-247"></span><span class="hs-comment">--                         , Dart     (Component s) ~ Dart.Dart s</span><span>
</span><span id="line-248"></span><span class="hs-comment">--                         , Vertex   (Component s) ~ VertexId s</span><span>
</span><span id="line-249"></span><span class="hs-comment">--                         -- , FaceId (Component s) ~ FaceId s</span><span>
</span><span id="line-250"></span><span class="hs-comment">--                         )</span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679224829"><span id="local-6989586621679224830"><span id="local-6989586621679224831"><span id="local-6989586621679224832"><span id="local-6989586621679224833"><span id="local-6989586621679225488"><span id="local-6989586621679225492"><span id="local-6989586621679225495"><span id="local-6989586621679225498"><span id="local-6989586621679225502"><span class="annot"><a href="Hiraffe.Graph.Class.html#DiGraph_"><span class="hs-identifier hs-type">DiGraph_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224829"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224830"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224831"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224832"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224833"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span>  </span><span class="hs-comment">-- the orientation between the global darts and the local darts may differ.</span><span>
</span><span id="line-257"></span><span>  </span><span class="hs-comment">-- i.e. a 'Positive' local dart may be associated with a Negative global</span><span>
</span><span id="line-258"></span><span>  </span><span class="hs-comment">-- dart</span><span>
</span><span id="line-259"></span><span>  </span><span id="local-6989586621679225531"><span class="annot"><span class="annottext">tailOf :: DartIx (PlanarGraph w s v e f)
-&gt; IndexedGetter
     (VertexIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Vertex (PlanarGraph w s v e f))
</span><a href="#local-6989586621679225531"><span class="hs-identifier hs-var hs-var hs-var hs-var">tailOf</span></a></span></span><span> </span><span id="local-6989586621679225533"><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225533"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph w s v e f
 -&gt; (VertexId s, Vertex (PlanarGraph w s v e f)))
-&gt; Over'
     p f (PlanarGraph w s v e f) (Vertex (PlanarGraph w s v e f))
forall i (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s a.
(Indexable i p, Contravariant f) =&gt;
(s -&gt; (i, a)) -&gt; Over' p f s a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Getter.html#ito"><span class="hs-identifier hs-var">ito</span></a></span><span> </span><span class="annot"><span class="annottext">((PlanarGraph w s v e f
  -&gt; (VertexId s, Vertex (PlanarGraph w s v e f)))
 -&gt; Over'
      p f (PlanarGraph w s v e f) (Vertex (PlanarGraph w s v e f)))
-&gt; (PlanarGraph w s v e f
    -&gt; (VertexId s, Vertex (PlanarGraph w s v e f)))
-&gt; Over'
     p f (PlanarGraph w s v e f) (Vertex (PlanarGraph w s v e f))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679225535"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225535"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621679225536"><span class="annot"><span class="annottext">DartIx (Component w s)
</span><a href="#local-6989586621679225536"><span class="hs-identifier hs-var">d'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679225537"><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679225537"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, DartIx (Component w s), Component w s)
forall {k} (w :: World) (s :: k) v e f.
DartIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, DartIx (Component w s), Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#asLocalD"><span class="hs-identifier hs-var">asLocalD</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225533"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225535"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-260"></span><span>                              </span><span id="local-6989586621679225538"><span class="annot"><span class="annottext">vi :: VertexId s
</span><a href="#local-6989586621679225538"><span class="hs-identifier hs-var hs-var">vi</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679225537"><span class="hs-identifier hs-var">c</span></a></span><span class="annot"><span class="annottext">Component w s
-&gt; Getting (VertexId s) (Component w s) (VertexId s) -&gt; VertexId s
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">DartIx (Component w s)
-&gt; IndexedGetter
     (VertexIx (Component w s)) (Component w s) (Vertex (Component w s))
forall graph.
DiGraph_ graph =&gt;
DartIx graph -&gt; IndexedGetter (VertexIx graph) graph (Vertex graph)
</span><a href="Hiraffe.Graph.Class.html#tailOf"><span class="hs-identifier hs-var">tailOf</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (Component w s)
</span><a href="#local-6989586621679225536"><span class="hs-identifier hs-var">d'</span></a></span><span>
</span><span id="line-261"></span><span>                              </span><span class="hs-comment">-- vi       = if sameDirection d d'</span><span>
</span><span id="line-262"></span><span>                              </span><span class="hs-comment">--              then c^.tailOf d' else c^.headOf d'</span><span>
</span><span id="line-263"></span><span>                          </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VertexId s
</span><a href="#local-6989586621679225538"><span class="hs-identifier hs-var">vi</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225535"><span class="hs-identifier hs-var">ps</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting (Endo v) (PlanarGraph w s v e f) v -&gt; v
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (VertexIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Vertex (PlanarGraph w s v e f))
forall graph.
HasVertices' graph =&gt;
VertexIx graph
-&gt; IndexedTraversal' (VertexIx graph) graph (Vertex graph)
</span><a href="Hiraffe.Graph.Class.html#vertexAt"><span class="hs-identifier hs-var">vertexAt</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
VertexId s
</span><a href="#local-6989586621679225538"><span class="hs-identifier hs-var">vi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-comment">-- we look up the component c containing dart d. In this component d is actually known as d'.</span><span>
</span><span id="line-265"></span><span>    </span><span class="hs-comment">-- so we can use c^.tailOf d' to find the global index of the vertex we are looking for.</span><span>
</span><span id="line-266"></span><span>    </span><span class="hs-comment">-- we then simply look up this vertex</span><span>
</span><span id="line-267"></span><span>  </span><span id="local-6989586621679225557"><span class="annot"><span class="annottext">headOf :: DartIx (PlanarGraph w s v e f)
-&gt; IndexedGetter
     (VertexIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Vertex (PlanarGraph w s v e f))
</span><a href="#local-6989586621679225557"><span class="hs-identifier hs-var hs-var hs-var hs-var">headOf</span></a></span></span><span> </span><span id="local-6989586621679225559"><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225559"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph w s v e f
 -&gt; (VertexId s, Vertex (PlanarGraph w s v e f)))
-&gt; Over'
     p f (PlanarGraph w s v e f) (Vertex (PlanarGraph w s v e f))
forall i (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s a.
(Indexable i p, Contravariant f) =&gt;
(s -&gt; (i, a)) -&gt; Over' p f s a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Getter.html#ito"><span class="hs-identifier hs-var">ito</span></a></span><span> </span><span class="annot"><span class="annottext">((PlanarGraph w s v e f
  -&gt; (VertexId s, Vertex (PlanarGraph w s v e f)))
 -&gt; Over'
      p f (PlanarGraph w s v e f) (Vertex (PlanarGraph w s v e f)))
-&gt; (PlanarGraph w s v e f
    -&gt; (VertexId s, Vertex (PlanarGraph w s v e f)))
-&gt; Over'
     p f (PlanarGraph w s v e f) (Vertex (PlanarGraph w s v e f))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679225560"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225560"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621679225561"><span class="annot"><span class="annottext">DartIx (Component w s)
</span><a href="#local-6989586621679225561"><span class="hs-identifier hs-var">d'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679225562"><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679225562"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, DartIx (Component w s), Component w s)
forall {k} (w :: World) (s :: k) v e f.
DartIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, DartIx (Component w s), Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#asLocalD"><span class="hs-identifier hs-var">asLocalD</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225559"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225560"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-268"></span><span>                              </span><span id="local-6989586621679225563"><span class="annot"><span class="annottext">vi :: VertexId s
</span><a href="#local-6989586621679225563"><span class="hs-identifier hs-var hs-var">vi</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679225562"><span class="hs-identifier hs-var">c</span></a></span><span class="annot"><span class="annottext">Component w s
-&gt; Getting (VertexId s) (Component w s) (VertexId s) -&gt; VertexId s
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">DartIx (Component w s)
-&gt; IndexedGetter
     (VertexIx (Component w s)) (Component w s) (Vertex (Component w s))
forall graph.
DiGraph_ graph =&gt;
DartIx graph -&gt; IndexedGetter (VertexIx graph) graph (Vertex graph)
</span><a href="Hiraffe.Graph.Class.html#headOf"><span class="hs-identifier hs-var">headOf</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (Component w s)
</span><a href="#local-6989586621679225561"><span class="hs-identifier hs-var">d'</span></a></span><span>
</span><span id="line-269"></span><span>                              </span><span class="hs-comment">-- vi       = if sameDirection d d'</span><span>
</span><span id="line-270"></span><span>                              </span><span class="hs-comment">--            then c^.headOf d' else c^.tailOf d'</span><span>
</span><span id="line-271"></span><span>                          </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VertexId s
</span><a href="#local-6989586621679225563"><span class="hs-identifier hs-var">vi</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225560"><span class="hs-identifier hs-var">ps</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting (Endo v) (PlanarGraph w s v e f) v -&gt; v
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (VertexIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Vertex (PlanarGraph w s v e f))
forall graph.
HasVertices' graph =&gt;
VertexIx graph
-&gt; IndexedTraversal' (VertexIx graph) graph (Vertex graph)
</span><a href="Hiraffe.Graph.Class.html#vertexAt"><span class="hs-identifier hs-var">vertexAt</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
VertexId s
</span><a href="#local-6989586621679225563"><span class="hs-identifier hs-var">vi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-272"></span><span>    </span><span class="hs-comment">-- see tailOf; we use the same, except we use head rather than tail</span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span>
</span><span id="line-275"></span><span>  </span><span class="hs-comment">-- | All outgoing darts incident to vertex v, in counterclockwise order around v.</span><span>
</span><span id="line-276"></span><span>  </span><span id="local-6989586621679225574"><span class="annot"><span class="annottext">outgoingDartsOf :: VertexIx (PlanarGraph w s v e f)
-&gt; IndexedFold
     (DartIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Dart (PlanarGraph w s v e f))
</span><a href="#local-6989586621679225574"><span class="hs-identifier hs-var hs-var hs-var hs-var">outgoingDartsOf</span></a></span></span><span> </span><span id="local-6989586621679225576"><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225576"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((p ~ (-&gt;)) =&gt;
 (e -&gt; f e) -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; (p e (f e)
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; p e (f e)
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall (p :: * -&gt; * -&gt; *) (q :: * -&gt; * -&gt; *) a b r.
Conjoined p =&gt;
((p ~ (-&gt;)) =&gt; q (a -&gt; b) r) -&gt; q (p a b) r -&gt; q (p a b) r
forall (q :: * -&gt; * -&gt; *) a b r.
((p ~ (-&gt;)) =&gt; q (a -&gt; b) r) -&gt; q (p a b) r -&gt; q (p a b) r
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Internal.Indexed.html#conjoined"><span class="hs-identifier hs-var">conjoined</span></a></span><span> </span><span class="annot"><span class="annottext">(p ~ (-&gt;)) =&gt;
(e -&gt; f e) -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
(e -&gt; f e) -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
forall (h :: * -&gt; *).
(Contravariant h, Applicative h) =&gt;
(e -&gt; h e) -&gt; PlanarGraph w s v e f -&gt; h (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225578"><span class="hs-identifier hs-var">theFold</span></a></span><span> </span><span class="annot"><span class="annottext">p e (f e) -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
forall (p :: * -&gt; * -&gt; *) (h :: * -&gt; *).
(Contravariant h, Applicative h,
 Indexable (DartIx (PlanarGraph w s v e f)) p) =&gt;
p e (h e) -&gt; PlanarGraph w s v e f -&gt; h (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225582"><span class="hs-identifier hs-var">theiFold</span></a></span><span>
</span><span id="line-277"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-278"></span><span>      </span><span class="hs-comment">-- theFold        :: Fold (PlanarGraph w s v e f) e</span><span>
</span><span id="line-279"></span><span>      </span><span class="annot"><a href="#local-6989586621679225578"><span class="hs-identifier hs-type">theFold</span></a></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679224860"><span class="annot"><a href="#local-6989586621679224860"><span class="hs-identifier hs-type">h</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Contravariant</span></span><span> </span><span class="annot"><a href="#local-6989586621679224860"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679224860"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-280"></span><span>                     </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679224832"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679224860"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224832"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224829"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224830"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224831"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224832"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224833"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679224860"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224829"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224830"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224831"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224832"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224833"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span>      </span><span id="local-6989586621679225578"><span class="annot"><span class="annottext">theFold :: forall (h :: * -&gt; *).
(Contravariant h, Applicative h) =&gt;
(e -&gt; h e) -&gt; PlanarGraph w s v e f -&gt; h (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225578"><span class="hs-identifier hs-var hs-var">theFold</span></a></span></span><span> </span><span id="local-6989586621679225599"><span class="annot"><span class="annottext">e -&gt; h e
</span><a href="#local-6989586621679225599"><span class="hs-identifier hs-var">eHe</span></a></span></span><span> </span><span id="local-6989586621679225600"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225600"><span class="hs-identifier hs-var">pg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679225601"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Component w s -&gt; h (Component w s) -&gt; h (PlanarGraph w s v e f)
forall b a. b -&gt; h b -&gt; h a
forall (f :: * -&gt; *) b a. Contravariant f =&gt; b -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&gt;$</span></span><span> </span><span class="annot"><span class="annottext">VertexIx (Component w s)
-&gt; IndexedFold
     (DartIx (Component w s)) (Component w s) (Dart (Component w s))
forall graph.
DiGraph_ graph =&gt;
VertexIx graph -&gt; IndexedFold (DartIx graph) graph (Dart graph)
</span><a href="Hiraffe.Graph.Class.html#outgoingDartsOf"><span class="hs-identifier hs-var">outgoingDartsOf</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (Component w s)
</span><a href="#local-6989586621679225603"><span class="hs-identifier hs-var">u'</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; h (DartIx (PlanarGraph w s v e f))
Dart (Component w s) -&gt; h (Dart (Component w s))
</span><a href="#local-6989586621679225604"><span class="hs-identifier hs-var">dHd</span></a></span><span> </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679225601"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-282"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-283"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621679225603"><span class="annot"><span class="annottext">VertexIx (Component w s)
</span><a href="#local-6989586621679225603"><span class="hs-identifier hs-var">u'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679225601"><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679225601"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, VertexIx (Component w s), Component w s)
forall {k} (w :: World) (s :: k) v e f.
VertexIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, VertexIx (Component w s), Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#asLocalV"><span class="hs-identifier hs-var">asLocalV</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225576"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225600"><span class="hs-identifier hs-var">pg</span></a></span><span>
</span><span id="line-284"></span><span>          </span><span class="annot"><a href="#local-6989586621679225604"><span class="hs-identifier hs-type">dHd</span></a></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224829"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224830"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224831"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224832"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224833"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679224860"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224829"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224830"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224831"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224832"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224833"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-285"></span><span>          </span><span id="local-6989586621679225604"><span class="annot"><span class="annottext">dHd :: DartIx (PlanarGraph w s v e f)
-&gt; h (DartIx (PlanarGraph w s v e f))
</span><a href="#local-6989586621679225604"><span class="hs-identifier hs-var hs-var">dHd</span></a></span></span><span> </span><span id="local-6989586621679225605"><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225605"><span class="hs-identifier hs-var">d</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679225606"><span class="annot"><span class="annottext">e :: e
</span><a href="#local-6989586621679225606"><span class="hs-identifier hs-var hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225600"><span class="hs-identifier hs-var">pg</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting (Endo e) (PlanarGraph w s v e f) e -&gt; e
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (DartIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Dart (PlanarGraph w s v e f))
forall graph.
HasDarts' graph =&gt;
DartIx graph -&gt; IndexedTraversal' (DartIx graph) graph (Dart graph)
</span><a href="Hiraffe.Graph.Class.html#dartAt"><span class="hs-identifier hs-var">dartAt</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225605"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679225606"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">e -&gt; h e -&gt; h (Dart s)
forall b a. b -&gt; h b -&gt; h a
forall (f :: * -&gt; *) b a. Contravariant f =&gt; b -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&gt;$</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; h e
</span><a href="#local-6989586621679225599"><span class="hs-identifier hs-var">eHe</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679225606"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-286"></span><span>
</span><span id="line-287"></span><span>      </span><span class="annot"><a href="#local-6989586621679225582"><span class="hs-identifier hs-type">theiFold</span></a></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679224862"><span class="annot"><a href="#local-6989586621679224862"><span class="hs-identifier hs-type">p</span></a></span></span><span> </span><span id="local-6989586621679224861"><span class="annot"><a href="#local-6989586621679224861"><span class="hs-identifier hs-type">h</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Contravariant</span></span><span> </span><span class="annot"><a href="#local-6989586621679224861"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679224861"><span class="hs-identifier hs-type">h</span></a></span><span>
</span><span id="line-288"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Internal.Indexed.html#Indexable"><span class="hs-identifier hs-type">Indexable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224829"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224830"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224831"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224832"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224833"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679224862"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-289"></span><span>                       </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679224862"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224832"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679224861"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224832"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224829"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224830"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224831"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224832"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224833"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679224861"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224829"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224830"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224831"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224832"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224833"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-290"></span><span>      </span><span id="local-6989586621679225582"><span class="annot"><span class="annottext">theiFold :: forall (p :: * -&gt; * -&gt; *) (h :: * -&gt; *).
(Contravariant h, Applicative h,
 Indexable (DartIx (PlanarGraph w s v e f)) p) =&gt;
p e (h e) -&gt; PlanarGraph w s v e f -&gt; h (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225582"><span class="hs-identifier hs-var hs-var">theiFold</span></a></span></span><span> </span><span id="local-6989586621679225626"><span class="annot"><span class="annottext">p e (h e)
</span><a href="#local-6989586621679225626"><span class="hs-identifier hs-var">peHe</span></a></span></span><span> </span><span id="local-6989586621679225627"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225627"><span class="hs-identifier hs-var">pg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679225628"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Component w s -&gt; h (Component w s) -&gt; h (PlanarGraph w s v e f)
forall b a. b -&gt; h b -&gt; h a
forall (f :: * -&gt; *) b a. Contravariant f =&gt; b -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&gt;$</span></span><span> </span><span class="annot"><span class="annottext">VertexIx (Component w s)
-&gt; IndexedFold
     (DartIx (Component w s)) (Component w s) (Dart (Component w s))
forall graph.
DiGraph_ graph =&gt;
VertexIx graph -&gt; IndexedFold (DartIx graph) graph (Dart graph)
</span><a href="Hiraffe.Graph.Class.html#outgoingDartsOf"><span class="hs-identifier hs-var">outgoingDartsOf</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (Component w s)
</span><a href="#local-6989586621679225629"><span class="hs-identifier hs-var">u'</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; h (DartIx (PlanarGraph w s v e f))
Dart (Component w s) -&gt; h (Dart (Component w s))
</span><a href="#local-6989586621679225630"><span class="hs-identifier hs-var">dHd</span></a></span><span> </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679225628"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-291"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-292"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621679225629"><span class="annot"><span class="annottext">VertexIx (Component w s)
</span><a href="#local-6989586621679225629"><span class="hs-identifier hs-var">u'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679225628"><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679225628"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, VertexIx (Component w s), Component w s)
forall {k} (w :: World) (s :: k) v e f.
VertexIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, VertexIx (Component w s), Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#asLocalV"><span class="hs-identifier hs-var">asLocalV</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225576"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225627"><span class="hs-identifier hs-var">pg</span></a></span><span>
</span><span id="line-293"></span><span>          </span><span class="annot"><a href="#local-6989586621679225630"><span class="hs-identifier hs-type">dHd</span></a></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224829"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224830"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224831"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224832"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224833"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679224861"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224829"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224830"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224831"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224832"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224833"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-294"></span><span>          </span><span id="local-6989586621679225630"><span class="annot"><span class="annottext">dHd :: DartIx (PlanarGraph w s v e f)
-&gt; h (DartIx (PlanarGraph w s v e f))
</span><a href="#local-6989586621679225630"><span class="hs-identifier hs-var hs-var">dHd</span></a></span></span><span> </span><span id="local-6989586621679225631"><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225631"><span class="hs-identifier hs-var">d</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679225632"><span class="annot"><span class="annottext">e :: e
</span><a href="#local-6989586621679225632"><span class="hs-identifier hs-var hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225627"><span class="hs-identifier hs-var">pg</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting (Endo e) (PlanarGraph w s v e f) e -&gt; e
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (DartIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Dart (PlanarGraph w s v e f))
forall graph.
HasDarts' graph =&gt;
DartIx graph -&gt; IndexedTraversal' (DartIx graph) graph (Dart graph)
</span><a href="Hiraffe.Graph.Class.html#dartAt"><span class="hs-identifier hs-var">dartAt</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225631"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679225632"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">e -&gt; h e -&gt; h (Dart s)
forall b a. b -&gt; h b -&gt; h a
forall (f :: * -&gt; *) b a. Contravariant f =&gt; b -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&gt;$</span></span><span> </span><span class="annot"><span class="annottext">p e (h e) -&gt; Dart s -&gt; e -&gt; h e
forall a b. p a b -&gt; Dart s -&gt; a -&gt; b
forall i (p :: * -&gt; * -&gt; *) a b.
Indexable i p =&gt;
p a b -&gt; i -&gt; a -&gt; b
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Internal.Indexed.html#indexed"><span class="hs-identifier hs-var">indexed</span></a></span><span> </span><span class="annot"><span class="annottext">p e (h e)
</span><a href="#local-6989586621679225626"><span class="hs-identifier hs-var">peHe</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679225631"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679225632"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-295"></span><span>
</span><span id="line-296"></span><span>    </span><span class="hs-comment">-- ifolding $ \ps -&gt; let (_,v',c) = asLocalV v ps</span><span>
</span><span id="line-297"></span><span>    </span><span class="hs-comment">--                                     in foldMapOf (outgoingDartsOf v')</span><span>
</span><span id="line-298"></span><span>    </span><span class="hs-comment">--                                                  (\d -&gt; [(d,ps^?!dartAt d)])</span><span>
</span><span id="line-299"></span><span>    </span><span class="hs-comment">--                                                  c</span><span>
</span><span id="line-300"></span><span>
</span><span id="line-301"></span><span>
</span><span id="line-302"></span><span>    </span><span class="hs-comment">-- we retrieve the component c containing vertex v. It's local name t here is v'.</span><span>
</span><span id="line-303"></span><span>    </span><span class="hs-comment">-- we then fold over the outoingDarts of v': i.e. this allows us to collect</span><span>
</span><span id="line-304"></span><span>    </span><span class="hs-comment">-- the global names (darts) that we care about. For each of those darts we then look up</span><span>
</span><span id="line-305"></span><span>    </span><span class="hs-comment">-- the actual data associated with it.</span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span>  </span><span id="local-6989586621679225642"><span class="annot"><span class="annottext">twinDartOf :: DartIx (PlanarGraph w s v e f)
-&gt; Getter
     (PlanarGraph w s v e f) (Maybe (DartIx (PlanarGraph w s v e f)))
</span><a href="#local-6989586621679225642"><span class="hs-identifier hs-var hs-var hs-var hs-var">twinDartOf</span></a></span></span><span> </span><span id="local-6989586621679225644"><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225644"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; Getter (PlanarGraph w s v e f) (DartIx (PlanarGraph w s v e f))
forall graph.
BidirGraph_ graph =&gt;
DartIx graph -&gt; Getter graph (DartIx graph)
</span><a href="Hiraffe.Graph.Class.html#twinOf"><span class="hs-identifier hs-var">twinOf</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225644"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">((Dart s -&gt; f (Dart s))
 -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; ((Maybe (Dart s) -&gt; f (Maybe (Dart s))) -&gt; Dart s -&gt; f (Dart s))
-&gt; (Maybe (Dart s) -&gt; f (Maybe (Dart s)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Dart s -&gt; Maybe (Dart s))
-&gt; (Maybe (Dart s) -&gt; f (Maybe (Dart s))) -&gt; Dart s -&gt; f (Dart s)
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s a.
(Profunctor p, Contravariant f) =&gt;
(s -&gt; a) -&gt; Optic' p f s a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Getter.html#to"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">Dart s -&gt; Maybe (Dart s)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679224873"><span id="local-6989586621679224874"><span id="local-6989586621679224875"><span id="local-6989586621679224876"><span id="local-6989586621679224877"><span class="annot"><a href="Hiraffe.Graph.Class.html#BidirGraph_"><span class="hs-identifier hs-type">BidirGraph_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224873"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224874"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224875"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224876"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224877"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-310"></span><span>  </span><span id="local-6989586621679225656"><span class="annot"><span class="annottext">twinOf :: DartIx (PlanarGraph w s v e f)
-&gt; Getter (PlanarGraph w s v e f) (DartIx (PlanarGraph w s v e f))
</span><a href="Hiraffe.Graph.Class.html#twinOf"><span class="hs-identifier hs-var hs-var hs-var hs-var">twinOf</span></a></span></span><span> </span><span id="local-6989586621679225657"><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225657"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph w s v e f -&gt; DartIx (PlanarGraph w s v e f))
-&gt; (DartIx (PlanarGraph w s v e f)
    -&gt; f (DartIx (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s a.
(Profunctor p, Contravariant f) =&gt;
(s -&gt; a) -&gt; Optic' p f s a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Getter.html#to"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">((PlanarGraph w s v e f -&gt; DartIx (PlanarGraph w s v e f))
 -&gt; (DartIx (PlanarGraph w s v e f)
     -&gt; f (DartIx (PlanarGraph w s v e f)))
 -&gt; PlanarGraph w s v e f
 -&gt; f (PlanarGraph w s v e f))
-&gt; (PlanarGraph w s v e f -&gt; DartIx (PlanarGraph w s v e f))
-&gt; (DartIx (PlanarGraph w s v e f)
    -&gt; f (DartIx (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dart s -&gt; PlanarGraph w s v e f -&gt; Dart s
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dart s -&gt; Dart s
forall {k} (s :: k). Dart s -&gt; Dart s
</span><a href="Hiraffe.PlanarGraph.Dart.html#twin"><span class="hs-identifier hs-var">Dart.twin</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679225657"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-311"></span><span>  </span><span id="local-6989586621679225658"><span class="annot"><span class="annottext">getPositiveDart :: PlanarGraph w s v e f
-&gt; EdgeIx (PlanarGraph w s v e f) -&gt; DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225658"><span class="hs-identifier hs-var hs-var hs-var hs-var">getPositiveDart</span></a></span></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EdgeIx (PlanarGraph w s v e f) -&gt; DartIx (PlanarGraph w s v e f)
Dart s -&gt; Dart s
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-312"></span><span>
</span><span id="line-313"></span><span>
</span><span id="line-314"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679224901"><span id="local-6989586621679224902"><span id="local-6989586621679224903"><span id="local-6989586621679224904"><span id="local-6989586621679224905"><span id="local-6989586621679225664"><span class="annot"><a href="Hiraffe.Graph.Class.html#Graph_"><span class="hs-identifier hs-type">Graph_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224901"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224902"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224903"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224904"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224905"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-315"></span><span>  </span><span class="hs-comment">-- neighboursOf v  = ifolding $ \ps -&gt; let (_,v',c) = asLocalV v ps</span><span>
</span><span id="line-316"></span><span>  </span><span class="hs-comment">--                                     in foldMapOf (neighboursOf v')</span><span>
</span><span id="line-317"></span><span>  </span><span class="hs-comment">--                                                  (\w -&gt; [(w,ps^?!vertexAt w)])</span><span>
</span><span id="line-318"></span><span>  </span><span class="hs-comment">--                                                  c</span><span>
</span><span id="line-319"></span><span>    </span><span class="hs-comment">-- same general approach as outGoingDartsOf</span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span>  </span><span id="local-6989586621679225694"><span class="annot"><span class="annottext">incidentEdgesOf :: VertexIx (PlanarGraph w s v e f)
-&gt; IndexedFold
     (EdgeIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Edge (PlanarGraph w s v e f))
</span><a href="#local-6989586621679225694"><span class="hs-identifier hs-var hs-var hs-var hs-var">incidentEdgesOf</span></a></span></span><span> </span><span id="local-6989586621679225696"><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225696"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph w s v e f -&gt; [(Dart s, Edge (PlanarGraph w s v e f))])
-&gt; Over
     p
     f
     (PlanarGraph w s v e f)
     (PlanarGraph w s v e f)
     (Edge (PlanarGraph w s v e f))
     (Edge (PlanarGraph w s v e f))
forall (f :: * -&gt; *) i (p :: * -&gt; * -&gt; *) (g :: * -&gt; *) s a t b.
(Foldable f, Indexable i p, Contravariant g, Applicative g) =&gt;
(s -&gt; f (i, a)) -&gt; Over p g s t a b
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Fold.html#ifolding"><span class="hs-identifier hs-var">ifolding</span></a></span><span> </span><span class="annot"><span class="annottext">((PlanarGraph w s v e f
  -&gt; [(Dart s, Edge (PlanarGraph w s v e f))])
 -&gt; Over
      p
      f
      (PlanarGraph w s v e f)
      (PlanarGraph w s v e f)
      (Edge (PlanarGraph w s v e f))
      (Edge (PlanarGraph w s v e f)))
-&gt; (PlanarGraph w s v e f
    -&gt; [(Dart s, Edge (PlanarGraph w s v e f))])
-&gt; Over
     p
     f
     (PlanarGraph w s v e f)
     (PlanarGraph w s v e f)
     (Edge (PlanarGraph w s v e f))
     (Edge (PlanarGraph w s v e f))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679225698"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225698"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621679225699"><span class="annot"><span class="annottext">VertexIx (Component w s)
</span><a href="#local-6989586621679225699"><span class="hs-identifier hs-var">v'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679225700"><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679225700"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, VertexIx (Component w s), Component w s)
forall {k} (w :: World) (s :: k) v e f.
VertexIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, VertexIx (Component w s), Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#asLocalV"><span class="hs-identifier hs-var">asLocalV</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225696"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225698"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-322"></span><span>                                        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Getting [(Dart s, e)] (Component w s) (Dart s)
-&gt; (Dart s -&gt; [(Dart s, e)]) -&gt; Component w s -&gt; [(Dart s, e)]
forall r s a. Getting r s a -&gt; (a -&gt; r) -&gt; s -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Fold.html#foldMapOf"><span class="hs-identifier hs-var">foldMapOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VertexIx (Component w s)
-&gt; IndexedFold
     (EdgeIx (Component w s)) (Component w s) (Edge (Component w s))
forall graph.
Graph_ graph =&gt;
VertexIx graph -&gt; IndexedFold (EdgeIx graph) graph (Edge graph)
</span><a href="Hiraffe.Graph.Class.html#incidentEdgesOf"><span class="hs-identifier hs-var">incidentEdgesOf</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (Component w s)
</span><a href="#local-6989586621679225699"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-323"></span><span>                                                     </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679225702"><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679225702"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679225702"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225698"><span class="hs-identifier hs-var">ps</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting (Endo e) (PlanarGraph w s v e f) e -&gt; e
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">EdgeIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (EdgeIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Edge (PlanarGraph w s v e f))
forall graph.
HasEdges' graph =&gt;
EdgeIx graph -&gt; IndexedTraversal' (EdgeIx graph) graph (Edge graph)
</span><a href="Hiraffe.Graph.Class.html#edgeAt"><span class="hs-identifier hs-var">edgeAt</span></a></span><span> </span><span class="annot"><span class="annottext">EdgeIx (PlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679225702"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-324"></span><span>                                                     </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679225700"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span>  </span><span class="hs-comment">-- same general approach as outGoingDartsOf</span><span>
</span><span id="line-327"></span><span>
</span><span id="line-328"></span><span>  </span><span class="hs-comment">-- neighboursOfByEdge   :: VertexIx</span><span>
</span><span id="line-329"></span><span>  </span><span class="hs-comment">--                      -&gt; IndexedFold (EdgeIx graph, VertexIx graph) graph (Vertex graph)</span><span>
</span><span id="line-330"></span><span>  </span><span id="local-6989586621679225727"><span class="annot"><span class="annottext">neighboursOfByEdge :: VertexIx (PlanarGraph w s v e f)
-&gt; IndexedFold
     (EdgeIx (PlanarGraph w s v e f), VertexIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Vertex (PlanarGraph w s v e f))
</span><a href="#local-6989586621679225727"><span class="hs-identifier hs-var hs-var hs-var hs-var">neighboursOfByEdge</span></a></span></span><span> </span><span id="local-6989586621679225729"><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225729"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph w s v e f
 -&gt; [((Dart s, VertexIdIn 'Primal s),
      Vertex (PlanarGraph w s v e f))])
-&gt; Over
     p
     f
     (PlanarGraph w s v e f)
     (PlanarGraph w s v e f)
     (Vertex (PlanarGraph w s v e f))
     (Vertex (PlanarGraph w s v e f))
forall (f :: * -&gt; *) i (p :: * -&gt; * -&gt; *) (g :: * -&gt; *) s a t b.
(Foldable f, Indexable i p, Contravariant g, Applicative g) =&gt;
(s -&gt; f (i, a)) -&gt; Over p g s t a b
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Fold.html#ifolding"><span class="hs-identifier hs-var">ifolding</span></a></span><span> </span><span class="annot"><span class="annottext">((PlanarGraph w s v e f
  -&gt; [((Dart s, VertexIdIn 'Primal s),
       Vertex (PlanarGraph w s v e f))])
 -&gt; Over
      p
      f
      (PlanarGraph w s v e f)
      (PlanarGraph w s v e f)
      (Vertex (PlanarGraph w s v e f))
      (Vertex (PlanarGraph w s v e f)))
-&gt; (PlanarGraph w s v e f
    -&gt; [((Dart s, VertexIdIn 'Primal s),
         Vertex (PlanarGraph w s v e f))])
-&gt; Over
     p
     f
     (PlanarGraph w s v e f)
     (PlanarGraph w s v e f)
     (Vertex (PlanarGraph w s v e f))
     (Vertex (PlanarGraph w s v e f))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679225730"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225730"><span class="hs-identifier hs-var">pg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-331"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621679225731"><span class="annot"><span class="annottext">VertexIx (Component w s)
</span><a href="#local-6989586621679225731"><span class="hs-identifier hs-var">u'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679225732"><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679225732"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, VertexIx (Component w s), Component w s)
forall {k} (w :: World) (s :: k) v e f.
VertexIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, VertexIx (Component w s), Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#asLocalV"><span class="hs-identifier hs-var">asLocalV</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679225729"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225730"><span class="hs-identifier hs-var">pg</span></a></span><span>
</span><span id="line-332"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Getting
  [((Dart s, VertexIdIn 'Primal s), v)] (Component w s) (Dart s)
-&gt; (Dart s -&gt; [((Dart s, VertexIdIn 'Primal s), v)])
-&gt; Component w s
-&gt; [((Dart s, VertexIdIn 'Primal s), v)]
forall r s a. Getting r s a -&gt; (a -&gt; r) -&gt; s -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Fold.html#foldMapOf"><span class="hs-identifier hs-var">foldMapOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VertexIx (Component w s)
-&gt; IndexedFold
     (EdgeIx (Component w s)) (Component w s) (Edge (Component w s))
forall graph.
Graph_ graph =&gt;
VertexIx graph -&gt; IndexedFold (EdgeIx graph) graph (Edge graph)
</span><a href="Hiraffe.Graph.Class.html#incidentEdgesOf"><span class="hs-identifier hs-var">incidentEdgesOf</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (Component w s)
</span><a href="#local-6989586621679225731"><span class="hs-identifier hs-var">u'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-333"></span><span>                 </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679225733"><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679225733"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679225734"><span class="annot"><span class="annottext">VertexIdIn 'Primal s
</span><a href="#local-6989586621679225734"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679225735"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679225735"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679225733"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">VertexIdIn 'Primal s
</span><a href="#local-6989586621679225734"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679225735"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((VertexIdIn 'Primal s, v) -&gt; ((Dart s, VertexIdIn 'Primal s), v))
-&gt; [(VertexIdIn 'Primal s, v)]
-&gt; [((Dart s, VertexIdIn 'Primal s), v)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Getting
  (Endo [(VertexIdIn 'Primal s, v)])
  (PlanarGraph w s v e f)
  (VertexIdIn 'Primal s, v)
-&gt; PlanarGraph w s v e f -&gt; [(VertexIdIn 'Primal s, v)]
forall a s. Getting (Endo [a]) s a -&gt; s -&gt; [a]
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Fold.html#toListOf"><span class="hs-identifier hs-var">toListOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; IndexedGetter
     (VertexIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Vertex (PlanarGraph w s v e f))
forall graph.
DiGraph_ graph =&gt;
DartIx graph -&gt; IndexedGetter (VertexIx graph) graph (Vertex graph)
</span><a href="Hiraffe.Graph.Class.html#headOf"><span class="hs-identifier hs-var">headOf</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679225733"><span class="hs-identifier hs-var">e</span></a></span><span class="annot"><span class="annottext">(Indexed
   (VertexIdIn 'Primal s)
   v
   (Const (Endo [(VertexIdIn 'Primal s, v)]) v)
 -&gt; PlanarGraph w s v e f
 -&gt; Const
      (Endo [(VertexIdIn 'Primal s, v)]) (PlanarGraph w s v e f))
-&gt; (((VertexIdIn 'Primal s, v)
     -&gt; Const
          (Endo [(VertexIdIn 'Primal s, v)]) (VertexIdIn 'Primal s, v))
    -&gt; Indexed
         (VertexIdIn 'Primal s)
         v
         (Const (Endo [(VertexIdIn 'Primal s, v)]) v))
-&gt; Getting
     (Endo [(VertexIdIn 'Primal s, v)])
     (PlanarGraph w s v e f)
     (VertexIdIn 'Primal s, v)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">((VertexIdIn 'Primal s, v)
 -&gt; Const
      (Endo [(VertexIdIn 'Primal s, v)]) (VertexIdIn 'Primal s, v))
-&gt; Indexed
     (VertexIdIn 'Primal s)
     v
     (Const (Endo [(VertexIdIn 'Primal s, v)]) v)
forall i (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s j t.
(Indexable i p, Functor f) =&gt;
p (i, s) (f (j, t)) -&gt; Indexed i s (f t)
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Internal.Indexed.html#withIndex"><span class="hs-identifier hs-var">withIndex</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679225730"><span class="hs-identifier hs-var">pg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-334"></span><span>                 </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679225732"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-335"></span><span>    </span><span class="hs-comment">-- TODO: improve these implementations. We shouldn't have to build the intermediate</span><span>
</span><span id="line-336"></span><span>    </span><span class="hs-comment">-- lists.</span><span>
</span><span id="line-337"></span><span>
</span><span id="line-338"></span><span class="hs-comment">{-
    conjoined theFold theIFold
    where
      theFold        :: forall h. (Contravariant h, Applicative h)
                     =&gt; (v -&gt; h v) -&gt; PlanarGraph w s v e f -&gt; h (PlanarGraph w s v e f)
      theFold vHv pg = c &gt;$ neighboursOf u' vHv' c
        where
          (_,u',c) = asLocalV u pg
          vHv'     :: VertexIx (PlanarGraph w s v e f) -&gt; h (VertexIx (PlanarGraph w s v e f))
          vHv' v   = let x = pg^?!vertexAt v in x &gt;$ vHv x

      theIFold         :: forall p h. ( Contravariant h, Applicative h
                                      , Indexable ( EdgeIx   (PlanarGraph w s v e f)
                                                  , VertexIx (PlanarGraph w s v e f)
                                                  ) p
                                      )
                       =&gt; p v (h v) -&gt; PlanarGraph w s v e f -&gt; h (PlanarGraph w s v e f)
      theIFold pvHv pg = incidentEdgesOf' u' dHd c
        -- c &gt;$ incidentEdgesOf' u' dHd c
        where
          (_,u',c) = asLocalV u pg
          -- dHd      :: EdgeIx (PlanarGraph w s v e f) -&gt; h (EdgeIx (PlanarGraph w s v e f) )
            -- EdgeIx (Component w s) -&gt; h (EdgeIx (Component w s))
          -- dHd      :: _ -&gt; _
          dHd d    = undefined

            -- let e = pg^?!dartAt d
            --              c =
            --          in e &gt;$ indexed peHe d e


      incidentEdgesOf'    :: VertexIx (Component w s)
                          -&gt; Fold (Component w s) (EdgeIx (PlanarGraph w s v e f))
      incidentEdgesOf' u' = incidentEdgesOf u'
-}</span><span>
</span><span id="line-373"></span><span class="hs-comment">{-
    theFold
    where
      neighboursOfByEdge' :: VertexId (Wrap s)
                          -&gt; IndexedFold (Dart.Dart (Wrap s), VertexId (Wrap s))
                                         (Component s)
                                         (VertexId s)
      neighboursOfByEdge' = neighboursOfByEdge

      theFold         :: forall p h.
                         (Contravariant h, Applicative h, Indexable (Dart.Dart s, VertexId s) p)
                      =&gt; p v (h v) -&gt; PlanarGraph w s v e f -&gt; h (PlanarGraph w s v e f)
      theFold pvFv pg = neighboursOfByEdge' u' g c
        where
          (_,u',c) = asLocalV u pg

          g          :: (Dart.Dart (Wrap s), VertexId (Wrap s)) -&gt; VertexId s -&gt; h v
          g (e',_) v = indexed pvFv (c^?!edgeAt e', v) (pg^?!vertexAt v)

-}</span><span>
</span><span id="line-393"></span><span>
</span><span id="line-394"></span><span>
</span><span id="line-395"></span><span class="hs-comment">{-
instance ( -- PlanarGraph_ (Component s)
         -- , IsComponent s
         -- , EdgeIx   (Component s) ~ Dart.Dart (Wrap s)
         -- , Edge     (Component s) ~ Dart.Dart s
         ) =&gt; PlanarGraph_ (PlanarGraph w s v e f) where
  -- dualGraph, (incidentFaceOf | leftFaceOf), rightFaceOf, prevDartOf, nextDartOf, boundaryDartOf, boundaryDartOf, boundaryDarts
  type DualGraphOf (PlanarGraph w s v e f) = CPlanarGraph (DualOf w) s f e v
  type WorldOf     (PlanarGraph w s v e f) = w

-}</span><span>
</span><span id="line-406"></span><span>  </span><span class="hs-comment">-- dualGraph = undefined</span><span>
</span><span id="line-407"></span><span>    </span><span class="hs-comment">-- main idea: consider the dual of the components, glue them together in some</span><span>
</span><span id="line-408"></span><span>    </span><span class="hs-comment">-- bigger graph</span><span>
</span><span id="line-409"></span><span>
</span><span id="line-410"></span><span>  </span><span class="hs-comment">-- leftFace      :: Dart s -&gt; PlanarSubdivision s v e f  -&gt; FaceId' s</span><span>
</span><span id="line-411"></span><span>  </span><span class="hs-comment">-- leftFaceOf d = \pEfE g -&gt; let (_,d',c) = asLocalD d g</span><span>
</span><span id="line-412"></span><span>  </span><span class="hs-comment">--                           in leftFaceOf d' c</span><span>
</span><span id="line-413"></span><span>
</span><span id="line-414"></span><span>
</span><span id="line-415"></span><span>
</span><span id="line-416"></span><span>  </span><span class="hs-comment">--                 --               fi       = PG.leftFace d' g</span><span>
</span><span id="line-417"></span><span>  </span><span class="hs-comment">--                 -- in</span><span>
</span><span id="line-418"></span><span>
</span><span id="line-419"></span><span>  </span><span class="hs-comment">-- leftFace d ps = let (_,d',g) = asLocalD d ps</span><span>
</span><span id="line-420"></span><span>  </span><span class="hs-comment">--                     fi       = PG.leftFace d' g</span><span>
</span><span id="line-421"></span><span>  </span><span class="hs-comment">--                 in g^.dataOf fi</span><span>
</span><span id="line-422"></span><span>
</span><span id="line-423"></span><span>
</span><span id="line-424"></span><span>
</span><span id="line-425"></span><span class="hs-comment">-- instance PlaneGraph_ (PlanarGraph w s      v e f) v where</span><span>
</span><span id="line-426"></span><span class="hs-comment">--   -- TODO: fromEmbedding</span><span>
</span><span id="line-427"></span><span>
</span><span id="line-428"></span><span class="hs-comment">-- instance PlanarGraph_ component_ (PlanarGraph  component  s v e f) v where</span><span>
</span><span id="line-429"></span><span class="hs-comment">-- type DualGraphOf (CPlanarGraph w s v e f) = CPlanarGraph (DualOf w) s f e v</span><span>
</span><span id="line-430"></span><span>
</span><span id="line-431"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-432"></span><span>
</span><span id="line-433"></span><span class="hs-comment">{-
-- | Constructs a PlanarGraph from a connected planar graph (i.e. a single component graph)
--
-- runningTime: \(O(n)\)
fromConnected   :: forall s v e f. (Ord r, Num r)
                =&gt; CPlanarGraph w s v e f -&gt; PlanarGraph w s v e f
fromConnected g = fromConnected' g (PG.outerFaceDart g)

 -}</span><span>
</span><span id="line-442"></span><span>
</span><span id="line-443"></span><span class="hs-comment">-- | Given a (connected) PlanarGraph and a dart that has the outerface on its left</span><span>
</span><span id="line-444"></span><span class="hs-comment">-- | Constructs a planarsubdivision</span><span>
</span><span id="line-445"></span><span class="hs-comment">--</span><span>
</span><span id="line-446"></span><span class="hs-comment">-- runningTime: \(O(n)\)</span><span>
</span><span id="line-447"></span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#fromConnected%27"><span class="hs-identifier hs-type">fromConnected'</span></a></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679224937"><span class="annot"><a href="#local-6989586621679224937"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span id="local-6989586621679224938"><span class="annot"><a href="#local-6989586621679224938"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679224939"><span class="annot"><a href="#local-6989586621679224939"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621679224940"><span class="annot"><a href="#local-6989586621679224940"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621679224941"><span class="annot"><a href="#local-6989586621679224941"><span class="hs-identifier hs-type">f</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-448"></span><span>                        </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#CPlanarGraph"><span class="hs-identifier hs-type">CPlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224937"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224938"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224939"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224940"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224941"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-449"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Dart.html#Dart"><span class="hs-identifier hs-type">Dart.Dart</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224938"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-450"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224937"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224938"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224939"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224940"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224941"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-451"></span><span id="fromConnected%27"><span class="annot"><span class="annottext">fromConnected' :: forall {k} (w :: World) (s :: k) v e f.
CPlanarGraph w s v e f -&gt; Dart s -&gt; PlanarGraph w s v e f
</span><a href="Hiraffe.PlanarGraph.Type.html#fromConnected%27"><span class="hs-identifier hs-var hs-var">fromConnected'</span></a></span></span><span> </span><span id="local-6989586621679225779"><span class="annot"><span class="annottext">CPlanarGraph w s v e f
</span><a href="#local-6989586621679225779"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679225780"><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679225780"><span class="hs-identifier hs-var">ofD</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Component w s)
-&gt; NonEmptyVector (Raw s (VertexIx (Component w s)) v)
-&gt; NonEmptyVector (Raw s (DartIx (Component w s)) e)
-&gt; NonEmptyVector (RawFace s f)
-&gt; PlanarGraph w s v e f
forall k (w :: World) (s :: k) v e f.
NonEmptyVector (Component w s)
-&gt; NonEmptyVector (Raw s (VertexIx (Component w s)) v)
-&gt; NonEmptyVector (Raw s (DartIx (Component w s)) e)
-&gt; NonEmptyVector (RawFace s f)
-&gt; PlanarGraph w s v e f
</span><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-var">PlanarGraph</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Component w s -&gt; NonEmptyVector (Component w s)
forall a. a -&gt; NonEmptyVector a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.html#singleton"><span class="hs-identifier hs-var">NonEmptyV.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">(Component w s -&gt; NonEmptyVector (Component w s))
-&gt; Component w s -&gt; NonEmptyVector (Component w s)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CPlanarGraph w s (VertexId s) (Dart s) (FaceId s) -&gt; Component w s
forall {k1} {k2} (w :: World) (s :: k1) (s' :: k2) v e f.
CPlanarGraph w s v e f -&gt; CPlanarGraph w s' v e f
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#unsafeChangeS"><span class="hs-identifier hs-var">Core.unsafeChangeS</span></a></span><span> </span><span class="annot"><span class="annottext">CPlanarGraph
  w
  s
  (VertexIx (PlanarGraph w s v e f))
  (DartIx (PlanarGraph w s v e f))
  (FaceIx (PlanarGraph w s v e f))
CPlanarGraph w s (VertexId s) (Dart s) (FaceId s)
</span><a href="#local-6989586621679225783"><span class="hs-identifier hs-var">g'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Raw s (VertexIx (Component w s)) v)
NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
</span><a href="#local-6989586621679225784"><span class="hs-identifier hs-var">vd</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Raw s (DartIx (Component w s)) e)
NonEmptyVector (Raw s (Dart (Wrap s)) e)
</span><a href="#local-6989586621679225785"><span class="hs-identifier hs-var">ed</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (RawFace s f)
</span><a href="#local-6989586621679225786"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-452"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-453"></span><span>    </span><span id="local-6989586621679225787"><span class="annot"><span class="annottext">c :: ComponentId s
</span><a href="#local-6989586621679225787"><span class="hs-identifier hs-var hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; ComponentId s
forall k (s :: k). Int -&gt; ComponentId s
</span><a href="Hiraffe.PlanarGraph.Component.html#ComponentId"><span class="hs-identifier hs-var">ComponentId</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-454"></span><span>    </span><span id="local-6989586621679225784"><span class="annot"><span class="annottext">vd :: NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
</span><a href="#local-6989586621679225784"><span class="hs-identifier hs-var hs-var">vd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; v -&gt; Raw s (VertexIdIn w (Wrap s)) v)
-&gt; NonEmptyVector v
-&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
forall a b. (Int -&gt; a -&gt; b) -&gt; NonEmptyVector a -&gt; NonEmptyVector b
forall i (f :: * -&gt; *) a b.
FunctorWithIndex i f =&gt;
(i -&gt; a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/indexed-traversable-0.1.4-1a81bb13fac1c6820d2dd6aa0a3932cc364a4e28bb77b37fce40c78cd6c82c08/share/doc/html/src/WithIndex.html#imap"><span class="hs-identifier hs-var">imap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679225790"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225790"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679225791"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679225791"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ComponentId s
-&gt; VertexIdIn w (Wrap s) -&gt; v -&gt; Raw s (VertexIdIn w (Wrap s)) v
forall {k} (s :: k) ia a. ComponentId s -&gt; ia -&gt; a -&gt; Raw s ia a
</span><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-var">Raw</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentId s
forall {k} {s :: k}. ComponentId s
</span><a href="#local-6989586621679225787"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; VertexIdIn w (Wrap s)
forall k (w :: World) (s :: k). Int -&gt; VertexIdIn w s
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#VertexId"><span class="hs-identifier hs-var">VertexId</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225790"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679225791"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>                   </span><span class="annot"><span class="annottext">(NonEmptyVector v
 -&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
-&gt; NonEmptyVector v
-&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
</span><a href="#local-6989586621679225779"><span class="hs-identifier hs-var">g</span></a></span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
-&gt; Getting
     (NonEmptyVector v) (CPlanarGraph w s v e f) (NonEmptyVector v)
-&gt; NonEmptyVector v
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">Getting
  (NonEmptyVector v) (CPlanarGraph w s v e f) (NonEmptyVector v)
forall {k} (w :: World) (s :: k) v e f1 v' (f2 :: * -&gt; *).
Functor f2 =&gt;
(NonEmptyVector v -&gt; f2 (NonEmptyVector v'))
-&gt; CPlanarGraph w s v e f1 -&gt; f2 (CPlanarGraph w s v' e f1)
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#vertexData"><span class="hs-identifier hs-var">Core.vertexData</span></a></span><span>
</span><span id="line-455"></span><span>    </span><span id="local-6989586621679225785"><span class="annot"><span class="annottext">ed :: NonEmptyVector (Raw s (Dart (Wrap s)) e)
</span><a href="#local-6989586621679225785"><span class="hs-identifier hs-var hs-var">ed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Dart (Wrap s) -&gt; e -&gt; Raw s (Dart (Wrap s)) e)
-&gt; NonEmptyVector (Dart (Wrap s))
-&gt; NonEmptyVector e
-&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
forall a b c.
(a -&gt; b -&gt; c)
-&gt; NonEmptyVector a -&gt; NonEmptyVector b -&gt; NonEmptyVector c
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.html#zipWith"><span class="hs-identifier hs-var">NonEmptyV.zipWith</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679225794"><span class="annot"><span class="annottext">Dart (Wrap s)
</span><a href="#local-6989586621679225794"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679225795"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679225795"><span class="hs-identifier hs-var">dd</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ComponentId s -&gt; Dart (Wrap s) -&gt; e -&gt; Raw s (Dart (Wrap s)) e
forall {k} (s :: k) ia a. ComponentId s -&gt; ia -&gt; a -&gt; Raw s ia a
</span><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-var">Raw</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentId s
forall {k} {s :: k}. ComponentId s
</span><a href="#local-6989586621679225787"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Dart (Wrap s)
</span><a href="#local-6989586621679225794"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679225795"><span class="hs-identifier hs-var">dd</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Dart (Wrap s))
forall {k} (s' :: k). NonEmptyVector (Dart s')
</span><a href="#local-6989586621679225796"><span class="hs-identifier hs-var">allDarts</span></a></span><span>     </span><span class="annot"><span class="annottext">(NonEmptyVector e -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e))
-&gt; NonEmptyVector e -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
</span><a href="#local-6989586621679225779"><span class="hs-identifier hs-var">g</span></a></span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
-&gt; Getting
     (NonEmptyVector e) (CPlanarGraph w s v e f) (NonEmptyVector e)
-&gt; NonEmptyVector e
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">Getting
  (NonEmptyVector e) (CPlanarGraph w s v e f) (NonEmptyVector e)
forall {k} (w :: World) (s :: k) v e f1 e' (f2 :: * -&gt; *).
Functor f2 =&gt;
(NonEmptyVector e -&gt; f2 (NonEmptyVector e'))
-&gt; CPlanarGraph w s v e f1 -&gt; f2 (CPlanarGraph w s v e' f1)
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#dartData"><span class="hs-identifier hs-var">Core.dartData</span></a></span><span>
</span><span id="line-456"></span><span>    </span><span id="local-6989586621679225786"><span class="annot"><span class="annottext">fd :: NonEmptyVector (RawFace s f)
</span><a href="#local-6989586621679225786"><span class="hs-identifier hs-var hs-var">fd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; f -&gt; RawFace s f)
-&gt; NonEmptyVector f -&gt; NonEmptyVector (RawFace s f)
forall a b. (Int -&gt; a -&gt; b) -&gt; NonEmptyVector a -&gt; NonEmptyVector b
forall i (f :: * -&gt; *) a b.
FunctorWithIndex i f =&gt;
(i -&gt; a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/indexed-traversable-0.1.4-1a81bb13fac1c6820d2dd6aa0a3932cc364a4e28bb77b37fce40c78cd6c82c08/share/doc/html/src/WithIndex.html#imap"><span class="hs-identifier hs-var">imap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679225798"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225798"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679225799"><span class="annot"><span class="annottext">f
</span><a href="#local-6989586621679225799"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (ComponentId s, FaceId (Wrap s))
-&gt; FaceData (Dart s) f -&gt; RawFace s f
forall k (s :: k) f.
Maybe (ComponentId s, FaceId (Wrap s))
-&gt; FaceData (Dart s) f -&gt; RawFace s f
</span><a href="Hiraffe.PlanarGraph.Component.html#RawFace"><span class="hs-identifier hs-var">RawFace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Maybe (ComponentId s, FaceId (Wrap s))
</span><a href="#local-6989586621679225801"><span class="hs-identifier hs-var">mkFaceIdx</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225798"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; f -&gt; FaceData (Dart s) f
</span><a href="#local-6989586621679225802"><span class="hs-identifier hs-var">mkFaceData</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225798"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">f
</span><a href="#local-6989586621679225799"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector f -&gt; NonEmptyVector (RawFace s f))
-&gt; NonEmptyVector f -&gt; NonEmptyVector (RawFace s f)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
</span><a href="#local-6989586621679225779"><span class="hs-identifier hs-var">g</span></a></span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
-&gt; Getting
     (NonEmptyVector f) (CPlanarGraph w s v e f) (NonEmptyVector f)
-&gt; NonEmptyVector f
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">Getting
  (NonEmptyVector f) (CPlanarGraph w s v e f) (NonEmptyVector f)
forall {k} (w :: World) (s :: k) v e f1 f' (f2 :: * -&gt; *).
Functor f2 =&gt;
(NonEmptyVector f1 -&gt; f2 (NonEmptyVector f'))
-&gt; CPlanarGraph w s v e f1 -&gt; f2 (CPlanarGraph w s v e f')
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#faceData"><span class="hs-identifier hs-var">Core.faceData</span></a></span><span>
</span><span id="line-457"></span><span>
</span><span id="line-458"></span><span>    </span><span class="annot"><a href="#local-6989586621679225783"><span class="hs-identifier hs-type">g'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#CPlanarGraph"><span class="hs-identifier hs-type">CPlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224937"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224938"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#VertexIx"><span class="hs-identifier hs-type">VertexIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224937"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224938"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224939"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224940"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224941"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-459"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224937"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224938"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224939"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224940"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224941"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-460"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#FaceIx"><span class="hs-identifier hs-type">FaceIx</span></a></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224937"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224938"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224939"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224940"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224941"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-461"></span><span>    </span><span id="local-6989586621679225783"><span class="annot"><span class="annottext">g' :: CPlanarGraph
  w
  s
  (VertexIx (PlanarGraph w s v e f))
  (DartIx (PlanarGraph w s v e f))
  (FaceIx (PlanarGraph w s v e f))
</span><a href="#local-6989586621679225783"><span class="hs-identifier hs-var hs-var">g'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
</span><a href="#local-6989586621679225779"><span class="hs-identifier hs-var">g</span></a></span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
-&gt; (CPlanarGraph w s v e f -&gt; CPlanarGraph w s v e (FaceId s))
-&gt; CPlanarGraph w s v e (FaceId s)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span class="annot"><span class="annottext">(NonEmptyVector f -&gt; Identity (NonEmptyVector (FaceId s)))
-&gt; CPlanarGraph w s v e f
-&gt; Identity (CPlanarGraph w s v e (FaceId s))
forall {k} (w :: World) (s :: k) v e f1 f' (f2 :: * -&gt; *).
Functor f2 =&gt;
(NonEmptyVector f1 -&gt; f2 (NonEmptyVector f'))
-&gt; CPlanarGraph w s v e f1 -&gt; f2 (CPlanarGraph w s v e f')
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#faceData"><span class="hs-identifier hs-var">Core.faceData</span></a></span><span>    </span><span class="annot"><span class="annottext">((NonEmptyVector f -&gt; Identity (NonEmptyVector (FaceId s)))
 -&gt; CPlanarGraph w s v e f
 -&gt; Identity (CPlanarGraph w s v e (FaceId s)))
-&gt; (NonEmptyVector f -&gt; NonEmptyVector (FaceId s))
-&gt; CPlanarGraph w s v e f
-&gt; CPlanarGraph w s v e (FaceId s)
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Setter.html#%25~"><span class="hs-operator hs-var">%~</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; f -&gt; FaceId s)
-&gt; NonEmptyVector f -&gt; NonEmptyVector (FaceId s)
forall a b. (Int -&gt; a -&gt; b) -&gt; NonEmptyVector a -&gt; NonEmptyVector b
forall i (f :: * -&gt; *) a b.
FunctorWithIndex i f =&gt;
(i -&gt; a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/indexed-traversable-0.1.4-1a81bb13fac1c6820d2dd6aa0a3932cc364a4e28bb77b37fce40c78cd6c82c08/share/doc/html/src/WithIndex.html#imap"><span class="hs-identifier hs-var">imap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679225805"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225805"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">f
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; FaceId s
forall {k} (w' :: World) (s' :: k). Int -&gt; FaceIdIn w' s'
</span><a href="#local-6989586621679225806"><span class="hs-identifier hs-var">mkFaceId</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; FaceId s) -&gt; Int -&gt; FaceId s
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621679225807"><span class="hs-identifier hs-var">flipID</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225805"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-462"></span><span>          </span><span class="annot"><span class="annottext">CPlanarGraph w s v e (FaceId s)
-&gt; (CPlanarGraph w s v e (FaceId s)
    -&gt; CPlanarGraph w s (VertexId s) e (FaceId s))
-&gt; CPlanarGraph w s (VertexId s) e (FaceId s)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span class="annot"><span class="annottext">(NonEmptyVector v -&gt; Identity (NonEmptyVector (VertexId s)))
-&gt; CPlanarGraph w s v e (FaceId s)
-&gt; Identity (CPlanarGraph w s (VertexId s) e (FaceId s))
forall {k} (w :: World) (s :: k) v e f1 v' (f2 :: * -&gt; *).
Functor f2 =&gt;
(NonEmptyVector v -&gt; f2 (NonEmptyVector v'))
-&gt; CPlanarGraph w s v e f1 -&gt; f2 (CPlanarGraph w s v' e f1)
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#vertexData"><span class="hs-identifier hs-var">Core.vertexData</span></a></span><span>  </span><span class="annot"><span class="annottext">((NonEmptyVector v -&gt; Identity (NonEmptyVector (VertexId s)))
 -&gt; CPlanarGraph w s v e (FaceId s)
 -&gt; Identity (CPlanarGraph w s (VertexId s) e (FaceId s)))
-&gt; (NonEmptyVector v -&gt; NonEmptyVector (VertexId s))
-&gt; CPlanarGraph w s v e (FaceId s)
-&gt; CPlanarGraph w s (VertexId s) e (FaceId s)
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Setter.html#%25~"><span class="hs-operator hs-var">%~</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; v -&gt; VertexId s)
-&gt; NonEmptyVector v -&gt; NonEmptyVector (VertexId s)
forall a b. (Int -&gt; a -&gt; b) -&gt; NonEmptyVector a -&gt; NonEmptyVector b
forall i (f :: * -&gt; *) a b.
FunctorWithIndex i f =&gt;
(i -&gt; a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/indexed-traversable-0.1.4-1a81bb13fac1c6820d2dd6aa0a3932cc364a4e28bb77b37fce40c78cd6c82c08/share/doc/html/src/WithIndex.html#imap"><span class="hs-identifier hs-var">imap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679225808"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225808"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">v
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; VertexId s
forall k (w :: World) (s :: k). Int -&gt; VertexIdIn w s
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#VertexId"><span class="hs-identifier hs-var">VertexId</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225808"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-463"></span><span>          </span><span class="annot"><span class="annottext">CPlanarGraph w s (VertexId s) e (FaceId s)
-&gt; (CPlanarGraph w s (VertexId s) e (FaceId s)
    -&gt; CPlanarGraph w s (VertexId s) (Dart s) (FaceId s))
-&gt; CPlanarGraph w s (VertexId s) (Dart s) (FaceId s)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span class="annot"><span class="annottext">(NonEmptyVector e -&gt; Identity (NonEmptyVector (Dart s)))
-&gt; CPlanarGraph w s (VertexId s) e (FaceId s)
-&gt; Identity (CPlanarGraph w s (VertexId s) (Dart s) (FaceId s))
forall {k} (w :: World) (s :: k) v e f1 e' (f2 :: * -&gt; *).
Functor f2 =&gt;
(NonEmptyVector e -&gt; f2 (NonEmptyVector e'))
-&gt; CPlanarGraph w s v e f1 -&gt; f2 (CPlanarGraph w s v e' f1)
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#dartData"><span class="hs-identifier hs-var">Core.dartData</span></a></span><span>    </span><span class="annot"><span class="annottext">((NonEmptyVector e -&gt; Identity (NonEmptyVector (Dart s)))
 -&gt; CPlanarGraph w s (VertexId s) e (FaceId s)
 -&gt; Identity (CPlanarGraph w s (VertexId s) (Dart s) (FaceId s)))
-&gt; NonEmptyVector (Dart s)
-&gt; CPlanarGraph w s (VertexId s) e (FaceId s)
-&gt; CPlanarGraph w s (VertexId s) (Dart s) (FaceId s)
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Setter.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Dart s)
forall {k} (s' :: k). NonEmptyVector (Dart s')
</span><a href="#local-6989586621679225796"><span class="hs-identifier hs-var">allDarts</span></a></span><span>
</span><span id="line-464"></span><span>
</span><span id="line-465"></span><span>    </span><span class="annot"><a href="#local-6989586621679225796"><span class="hs-identifier hs-type">allDarts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679224997"><span class="annot"><a href="#local-6989586621679224997"><span class="hs-identifier hs-type">s'</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Dart.html#Dart"><span class="hs-identifier hs-type">Dart.Dart</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224997"><span class="hs-identifier hs-type">s'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-466"></span><span>    </span><span id="local-6989586621679225796"><span class="annot"><span class="annottext">allDarts :: forall {k} (s' :: k). NonEmptyVector (Dart s')
</span><a href="#local-6989586621679225796"><span class="hs-identifier hs-var hs-var">allDarts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Dart s')
-&gt; Maybe (NonEmptyVector (Dart s')) -&gt; NonEmptyVector (Dart s')
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; NonEmptyVector (Dart s')
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;allDarts'. absurd&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-467"></span><span>             </span><span class="annot"><span class="annottext">(Maybe (NonEmptyVector (Dart s')) -&gt; NonEmptyVector (Dart s'))
-&gt; Maybe (NonEmptyVector (Dart s')) -&gt; NonEmptyVector (Dart s')
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Dart s'] -&gt; Maybe (NonEmptyVector (Dart s'))
forall a. Int -&gt; [a] -&gt; Maybe (NonEmptyVector a)
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/nonempty-vector-0.2.3-60fe8ae97d86f7cc86ab919b4de415e70817b39263c0424855d9dee7baa1be84/share/doc/html/src/Data.Vector.NonEmpty.html#fromListN"><span class="hs-identifier hs-var">NonEmptyV.fromListN</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CPlanarGraph w s v e f -&gt; Int
forall graph. HasDarts' graph =&gt; graph -&gt; Int
</span><a href="Hiraffe.Graph.Class.html#numDarts"><span class="hs-identifier hs-var">numDarts</span></a></span><span> </span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
</span><a href="#local-6989586621679225779"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Dart s']
forall {k} (s :: k). [Dart s]
</span><a href="Hiraffe.PlanarGraph.Dart.html#allDarts"><span class="hs-identifier hs-var">Dart.allDarts</span></a></span><span>
</span><span id="line-468"></span><span>
</span><span id="line-469"></span><span>    </span><span class="hs-comment">-- make sure the outerFaceId is 0</span><span>
</span><span id="line-470"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679225816"><span class="annot"><span class="annottext">FaceIdIn w s
</span><a href="#local-6989586621679225816"><span class="hs-identifier hs-var">oF</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679225817"><span class="annot"><span class="annottext">f
</span><a href="#local-6989586621679225817"><span class="hs-identifier hs-var">ofData</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
</span><a href="#local-6989586621679225779"><span class="hs-identifier hs-var">g</span></a></span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
-&gt; Getting
     (FaceIdIn w s, f) (CPlanarGraph w s v e f) (FaceIdIn w s, f)
-&gt; (FaceIdIn w s, f)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">DartIx (CPlanarGraph w s v e f)
-&gt; IndexedLens'
     (FaceIx (CPlanarGraph w s v e f))
     (CPlanarGraph w s v e f)
     (Face (CPlanarGraph w s v e f))
forall planarGraph.
PlanarGraph_ planarGraph =&gt;
DartIx planarGraph
-&gt; IndexedLens' (FaceIx planarGraph) planarGraph (Face planarGraph)
</span><a href="Hiraffe.PlanarGraph.Class.html#leftFaceOf"><span class="hs-identifier hs-var">leftFaceOf</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (CPlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679225780"><span class="hs-identifier hs-var">ofD</span></a></span><span class="annot"><span class="annottext">(Indexed (FaceIdIn w s) f (Const (FaceIdIn w s, f) f)
 -&gt; CPlanarGraph w s v e f
 -&gt; Const (FaceIdIn w s, f) (CPlanarGraph w s v e f))
-&gt; (((FaceIdIn w s, f)
     -&gt; Const (FaceIdIn w s, f) (FaceIdIn w s, f))
    -&gt; Indexed (FaceIdIn w s) f (Const (FaceIdIn w s, f) f))
-&gt; Getting
     (FaceIdIn w s, f) (CPlanarGraph w s v e f) (FaceIdIn w s, f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">((FaceIdIn w s, f) -&gt; Const (FaceIdIn w s, f) (FaceIdIn w s, f))
-&gt; Indexed (FaceIdIn w s) f (Const (FaceIdIn w s, f) f)
forall i (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s j t.
(Indexable i p, Functor f) =&gt;
p (i, s) (f (j, t)) -&gt; Indexed i s (f t)
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Internal.Indexed.html#withIndex"><span class="hs-identifier hs-var">withIndex</span></a></span><span>
</span><span id="line-471"></span><span>
</span><span id="line-472"></span><span>    </span><span id="local-6989586621679225801"><span class="annot"><span class="annottext">mkFaceIdx :: Int -&gt; Maybe (ComponentId s, FaceId (Wrap s))
</span><a href="#local-6989586621679225801"><span class="hs-identifier hs-var hs-var">mkFaceIdx</span></a></span></span><span> </span><span id="local-6989586621679225819"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225819"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225819"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (ComponentId s, FaceId (Wrap s))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-473"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ComponentId s, FaceId (Wrap s))
-&gt; Maybe (ComponentId s, FaceId (Wrap s))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
forall {k} {s :: k}. ComponentId s
</span><a href="#local-6989586621679225787"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int -&gt; FaceId (Wrap s)
forall {k} (w' :: World) (s' :: k). Int -&gt; FaceIdIn w' s'
</span><a href="#local-6989586621679225806"><span class="hs-identifier hs-var">mkFaceId</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; FaceId (Wrap s)) -&gt; (Int -&gt; Int) -&gt; Int -&gt; FaceId (Wrap s)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621679225807"><span class="hs-identifier hs-var">flipID</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; FaceId (Wrap s)) -&gt; Int -&gt; FaceId (Wrap s)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225819"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-474"></span><span>
</span><span id="line-475"></span><span>    </span><span class="hs-comment">-- at index i we are storing the outerface</span><span>
</span><span id="line-476"></span><span>    </span><span class="annot"><a href="#local-6989586621679225802"><span class="hs-identifier hs-type">mkFaceData</span></a></span><span>                        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679224941"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#FaceData"><span class="hs-identifier hs-type">FaceData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Dart.html#Dart"><span class="hs-identifier hs-type">Dart.Dart</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679224938"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679224941"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-477"></span><span>    </span><span id="local-6989586621679225802"><span class="annot"><span class="annottext">mkFaceData :: Int -&gt; f -&gt; FaceData (Dart s) f
</span><a href="#local-6989586621679225802"><span class="hs-identifier hs-var hs-var">mkFaceData</span></a></span></span><span> </span><span id="local-6989586621679225820"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225820"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679225821"><span class="annot"><span class="annottext">f
</span><a href="#local-6989586621679225821"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225820"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Seq (Dart s) -&gt; f -&gt; FaceData (Dart s) f
forall h f. Seq h -&gt; f -&gt; FaceData h f
</span><a href="Hiraffe.PlanarGraph.Component.html#FaceData"><span class="hs-identifier hs-var">FaceData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dart s -&gt; Seq (Dart s)
forall a. a -&gt; Seq a
</span><span class="hs-identifier hs-var">Seq.singleton</span></span><span> </span><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679225780"><span class="hs-identifier hs-var">ofD</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">f
</span><a href="#local-6989586621679225817"><span class="hs-identifier hs-var">ofData</span></a></span><span>
</span><span id="line-478"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225820"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FaceIdIn w s -&gt; Int
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">FaceIdIn w s
</span><a href="#local-6989586621679225816"><span class="hs-identifier hs-var">oF</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Seq (Dart s) -&gt; f -&gt; FaceData (Dart s) f
forall h f. Seq h -&gt; f -&gt; FaceData h f
</span><a href="Hiraffe.PlanarGraph.Component.html#FaceData"><span class="hs-identifier hs-var">FaceData</span></a></span><span> </span><span class="annot"><span class="annottext">Seq (Dart s)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
</span><a href="#local-6989586621679225779"><span class="hs-identifier hs-var">g</span></a></span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
-&gt; Getting (Endo f) (CPlanarGraph w s v e f) f -&gt; f
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.6.1/lens-5.3.2-372cd0273cdff600d75cb328fdd646e104e56b44df23c2c1fe88855f5007eac2/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">FaceIx (CPlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (FaceIx (CPlanarGraph w s v e f))
     (CPlanarGraph w s v e f)
     (Face (CPlanarGraph w s v e f))
forall graph.
HasFaces' graph =&gt;
FaceIx graph -&gt; IndexedTraversal' (FaceIx graph) graph (Face graph)
</span><a href="Hiraffe.PlanarGraph.Class.html#faceAt"><span class="hs-identifier hs-var">faceAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (w' :: World) (s' :: k). Int -&gt; FaceIdIn w' s'
forall (w' :: World) (s' :: k). Int -&gt; FaceIdIn w' s'
</span><a href="#local-6989586621679225806"><span class="hs-identifier hs-var">mkFaceId</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679224938"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-479"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Seq (Dart s) -&gt; f -&gt; FaceData (Dart s) f
forall h f. Seq h -&gt; f -&gt; FaceData h f
</span><a href="Hiraffe.PlanarGraph.Component.html#FaceData"><span class="hs-identifier hs-var">FaceData</span></a></span><span> </span><span class="annot"><span class="annottext">Seq (Dart s)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>              </span><span class="annot"><span class="annottext">f
</span><a href="#local-6989586621679225821"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-480"></span><span>
</span><span id="line-481"></span><span>    </span><span class="annot"><a href="#local-6989586621679225806"><span class="hs-identifier hs-type">mkFaceId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679225022"><span class="annot"><a href="#local-6989586621679225022"><span class="hs-identifier hs-type">w'</span></a></span></span><span> </span><span id="local-6989586621679225023"><span class="annot"><a href="#local-6989586621679225023"><span class="hs-identifier hs-type">s'</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#FaceIdIn"><span class="hs-identifier hs-type">FaceIdIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679225022"><span class="hs-identifier hs-type">w'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679225023"><span class="hs-identifier hs-type">s'</span></a></span><span>
</span><span id="line-482"></span><span>    </span><span id="local-6989586621679225806"><span class="annot"><span class="annottext">mkFaceId :: forall {k} (w' :: World) (s' :: k). Int -&gt; FaceIdIn w' s'
</span><a href="#local-6989586621679225806"><span class="hs-identifier hs-var hs-var">mkFaceId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VertexIdIn (DualOf w') s' -&gt; FaceIdIn w' s'
forall k (w :: World) (s :: k).
VertexIdIn (DualOf w) s -&gt; FaceIdIn w s
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#FaceId"><span class="hs-identifier hs-var">FaceId</span></a></span><span> </span><span class="annot"><span class="annottext">(VertexIdIn (DualOf w') s' -&gt; FaceIdIn w' s')
-&gt; (Int -&gt; VertexIdIn (DualOf w') s') -&gt; Int -&gt; FaceIdIn w' s'
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; VertexIdIn (DualOf w') s'
forall k (w :: World) (s :: k). Int -&gt; VertexIdIn w s
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#VertexId"><span class="hs-identifier hs-var">VertexId</span></a></span><span>
</span><span id="line-483"></span><span>
</span><span id="line-484"></span><span>    </span><span id="local-6989586621679225807"><span class="annot"><span class="annottext">flipID :: Int -&gt; Int
</span><a href="#local-6989586621679225807"><span class="hs-identifier hs-var hs-var">flipID</span></a></span></span><span> </span><span id="local-6989586621679225825"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225825"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225825"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FaceIdIn w s -&gt; Int
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">FaceIdIn w s
</span><a href="#local-6989586621679225816"><span class="hs-identifier hs-var">oF</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-485"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225825"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FaceIdIn w s -&gt; Int
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">FaceIdIn w s
</span><a href="#local-6989586621679225816"><span class="hs-identifier hs-var">oF</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-486"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679225825"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-487"></span></pre></body></html>