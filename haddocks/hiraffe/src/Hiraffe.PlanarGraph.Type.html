<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-2"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-3"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- Module      :  Hiraffe.PlanarGraph.Type</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- Copyright   :  (C) Frank Staals</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- License     :  see the LICENSE file</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- Maintainer  :  Frank Staals</span><span>
</span><span id="line-8"></span><span class="hs-comment">--</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- Data type for representing possibly disconnected planar graphs</span><span>
</span><span id="line-10"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-11"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html"><span class="hs-identifier">Hiraffe.PlanarGraph.Type</span></a></span><span>
</span><span id="line-12"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier">PlanarGraph</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier">Component</span></a></span><span>
</span><span id="line-14"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#components"><span class="hs-identifier">components</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#rawDartData"><span class="hs-identifier">rawDartData</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#rawVertexData"><span class="hs-identifier">rawVertexData</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#rawFaceData"><span class="hs-identifier">rawFaceData</span></a></span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#component"><span class="hs-identifier">component</span></a></span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#fromConnected%27"><span class="hs-identifier">fromConnected'</span></a></span><span>
</span><span id="line-18"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#asLocalD"><span class="hs-identifier">asLocalD</span></a></span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#asLocalV"><span class="hs-identifier">asLocalV</span></a></span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#itraverseEdges1"><span class="hs-identifier">itraverseEdges1</span></a></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.html"><span class="hs-identifier">Control.Lens</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Plated.html#holes"><span class="hs-identifier">holes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Traversal.html#holesOf"><span class="hs-identifier">holesOf</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Setter.html#.%3D"><span class="hs-operator">(.=)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Coerce</span></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">F</span></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/semigroupoids-6.0.2-4f02d4525881a843957dd389fad628ddb080cdcbf0ace7494169fdf0d0f44b6c/share/doc/html/src/Data.Functor.Apply.html"><span class="hs-identifier">Data.Functor.Apply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/semigroupoids-6.0.2-4f02d4525881a843957dd389fad628ddb080cdcbf0ace7494169fdf0d0f44b6c/share/doc/html/src/Data.Functor.Bind.Class.html#Apply"><span class="hs-identifier">Apply</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/semigroupoids-6.0.2-4f02d4525881a843957dd389fad628ddb080cdcbf0ace7494169fdf0d0f44b6c/share/doc/html/src/Data.Functor.Apply.html"><span class="hs-identifier">Data.Functor.Apply</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Apply</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromMaybe</span></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/semigroupoids-6.0.2-4f02d4525881a843957dd389fad628ddb080cdcbf0ace7494169fdf0d0f44b6c/share/doc/html/src/Data.Semigroup.Traversable.html"><span class="hs-identifier">Data.Semigroup.Traversable</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Sequence</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Seq</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.html"><span class="hs-identifier">Data.Vector.NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier">NonEmptyVector</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.html"><span class="hs-identifier">Data.Vector.NonEmpty</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NonEmptyV</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">GHC.Generics</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Hiraffe.Graph.Class.html"><span class="hs-identifier">Hiraffe.Graph.Class</span></a></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html"><span class="hs-identifier">Hiraffe.PlanarGraph.Class</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html"><span class="hs-identifier">Hiraffe.PlanarGraph.Component</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.html"><span class="hs-identifier">Hiraffe.PlanarGraph.Connected</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#CPlanarGraph"><span class="hs-identifier">CPlanarGraph</span></a></span><span>
</span><span id="line-44"></span><span>                                               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#VertexIdIn"><span class="hs-identifier">VertexIdIn</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#VertexId"><span class="hs-identifier">VertexId</span></a></span><span>
</span><span id="line-45"></span><span>                                               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#FaceIdIn"><span class="hs-identifier">FaceIdIn</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#FaceId"><span class="hs-identifier">FaceId</span></a></span><span>
</span><span id="line-46"></span><span>                                               </span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html"><span class="hs-identifier">Hiraffe.PlanarGraph.Connected.Core</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Core</span></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Instance.html"><span class="hs-identifier">Hiraffe.PlanarGraph.Connected.Instance</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Dart.html"><span class="hs-identifier">Hiraffe.PlanarGraph.Dart</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Dart</span></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Hiraffe.PlanarGraph.World.html"><span class="hs-identifier">Hiraffe.PlanarGraph.World</span></a></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/hgeometry-combinatorial-1.0.0.0-d1b59c766a15869585793b226dff88089219927f1e799132df872bb52ece3bd3/share/doc/html/src/HGeometry.Lens.Util.html"><span class="hs-identifier">HGeometry.Lens.Util</span></a></span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-comment">-- type Component' (s :: k)</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span class="hs-comment">-- | A connected component.</span><span>
</span><span id="line-58"></span><span class="hs-comment">--</span><span>
</span><span id="line-59"></span><span class="hs-comment">-- For every face f, and every hole in this face, the facedata points to a dart</span><span>
</span><span id="line-60"></span><span class="hs-comment">-- d on the hole s.t. this dart has the face f on its left. i.e.</span><span>
</span><span id="line-61"></span><span class="hs-comment">-- leftFace d = f</span><span>
</span><span id="line-62"></span><span class="hs-keyword">type</span><span> </span><span id="Component"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-var">Component</span></a></span></span><span> </span><span id="local-6989586621679250537"><span id="local-6989586621679250538"><span class="annot"><a href="#local-6989586621679250538"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-identifier">s</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">k</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#CPlanarGraph"><span class="hs-identifier hs-type">CPlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250538"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Wrap"><span class="hs-identifier hs-type">Wrap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250539"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#VertexId"><span class="hs-identifier hs-type">VertexId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250539"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Dart.html#Dart"><span class="hs-identifier hs-type">Dart.Dart</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250539"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#FaceId"><span class="hs-identifier hs-type">FaceId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250539"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="hs-comment">-- | A PlanarGraph is essentially a bunch of connected Planargraphs; one for every</span><span>
</span><span id="line-65"></span><span class="hs-comment">-- connected component. These graphs store the global ID's (darts, vertexId's, faceId's)</span><span>
</span><span id="line-66"></span><span class="hs-comment">-- in their data values. This essentially gives us a mapping between the two.</span><span>
</span><span id="line-67"></span><span class="hs-comment">--</span><span>
</span><span id="line-68"></span><span class="hs-comment">-- note that a face may actually occur in multiple graphs, hence when we store</span><span>
</span><span id="line-69"></span><span class="hs-comment">-- the edges to the the holes, we store the global edgeId's rather than the</span><span>
</span><span id="line-70"></span><span class="hs-comment">-- 'local' edgeId (dart)'s.</span><span>
</span><span id="line-71"></span><span class="hs-comment">--</span><span>
</span><span id="line-72"></span><span class="hs-comment">-- invariants:</span><span>
</span><span id="line-73"></span><span class="hs-comment">--    - the outerface has faceId 0</span><span>
</span><span id="line-74"></span><span class="hs-comment">--    - the local and global orientation of the darts is consistent</span><span>
</span><span id="line-75"></span><span class="hs-keyword">data</span><span> </span><span id="PlanarGraph"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-var">PlanarGraph</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679249507"><span class="annot"><a href="#local-6989586621679249507"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.World.html#World"><span class="hs-identifier hs-type">World</span></a></span><span class="hs-special">)</span><span id="local-6989586621679249506"><span> </span><span class="hs-special">(</span><span id="local-6989586621679249508"><span class="annot"><a href="#local-6989586621679249508"><span class="hs-identifier hs-type">s</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679249506"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679249509"><span class="annot"><a href="#local-6989586621679249509"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621679249510"><span class="annot"><a href="#local-6989586621679249510"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621679249511"><span class="annot"><a href="#local-6989586621679249511"><span class="hs-identifier hs-type">f</span></a></span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PlanarGraph"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-var">PlanarGraph</span></a></span></span><span>
</span><span id="line-76"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="_components"><span class="annot"><span class="annottext">forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f -&gt; NonEmptyVector (Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#_components"><span class="hs-identifier hs-var hs-var">_components</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249507"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249508"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_rawVertexData"><span class="annot"><span class="annottext">forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (VertexIx (Component w s)) v)
</span><a href="Hiraffe.PlanarGraph.Type.html#_rawVertexData"><span class="hs-identifier hs-var hs-var">_rawVertexData</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249508"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#VertexIx"><span class="hs-identifier hs-type">VertexIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249507"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249508"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679249509"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_rawDartData"><span class="annot"><span class="annottext">forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (DartIx (Component w s)) e)
</span><a href="Hiraffe.PlanarGraph.Type.html#_rawDartData"><span class="hs-identifier hs-var hs-var">_rawDartData</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249508"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249507"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249508"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679249510"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="_rawFaceData"><span class="annot"><span class="annottext">forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f -&gt; NonEmptyVector (RawFace w s f)
</span><a href="Hiraffe.PlanarGraph.Type.html#_rawFaceData"><span class="hs-identifier hs-var hs-var">_rawFaceData</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#RawFace"><span class="hs-identifier hs-type">RawFace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249507"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249508"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249511"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679250546"><span id="local-6989586621679250552"><span class="annot"><span class="annottext">(forall a b.
 (a -&gt; b) -&gt; PlanarGraph w s v e a -&gt; PlanarGraph w s v e b)
-&gt; (forall a b.
    a -&gt; PlanarGraph w s v e b -&gt; PlanarGraph w s v e a)
-&gt; Functor (PlanarGraph w s v e)
forall a b. a -&gt; PlanarGraph w s v e b -&gt; PlanarGraph w s v e a
forall a b.
(a -&gt; b) -&gt; PlanarGraph w s v e a -&gt; PlanarGraph w s v e b
forall (w :: World) k (s :: k) v e a b.
a -&gt; PlanarGraph w s v e b -&gt; PlanarGraph w s v e a
forall (w :: World) k (s :: k) v e a b.
(a -&gt; b) -&gt; PlanarGraph w s v e a -&gt; PlanarGraph w s v e b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall (w :: World) k (s :: k) v e a b.
(a -&gt; b) -&gt; PlanarGraph w s v e a -&gt; PlanarGraph w s v e b
fmap :: forall a b.
(a -&gt; b) -&gt; PlanarGraph w s v e a -&gt; PlanarGraph w s v e b
$c&lt;$ :: forall (w :: World) k (s :: k) v e a b.
a -&gt; PlanarGraph w s v e b -&gt; PlanarGraph w s v e a
&lt;$ :: forall a b. a -&gt; PlanarGraph w s v e b -&gt; PlanarGraph w s v e a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span id="local-6989586621679250559"><span id="local-6989586621679250561"><span class="annot"><span class="annottext">(forall x. PlanarGraph w s v e f -&gt; Rep (PlanarGraph w s v e f) x)
-&gt; (forall x.
    Rep (PlanarGraph w s v e f) x -&gt; PlanarGraph w s v e f)
-&gt; Generic (PlanarGraph w s v e f)
forall x. Rep (PlanarGraph w s v e f) x -&gt; PlanarGraph w s v e f
forall x. PlanarGraph w s v e f -&gt; Rep (PlanarGraph w s v e f) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall (w :: World) k (s :: k) v e f x.
Rep (PlanarGraph w s v e f) x -&gt; PlanarGraph w s v e f
forall (w :: World) k (s :: k) v e f x.
PlanarGraph w s v e f -&gt; Rep (PlanarGraph w s v e f) x
$cfrom :: forall (w :: World) k (s :: k) v e f x.
PlanarGraph w s v e f -&gt; Rep (PlanarGraph w s v e f) x
from :: forall x. PlanarGraph w s v e f -&gt; Rep (PlanarGraph w s v e f) x
$cto :: forall (w :: World) k (s :: k) v e f x.
Rep (PlanarGraph w s v e f) x -&gt; PlanarGraph w s v e f
to :: forall x. Rep (PlanarGraph w s v e f) x -&gt; PlanarGraph w s v e f
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">,</span><span id="local-6989586621679250570"><span id="local-6989586621679250583"><span id="local-6989586621679250587"><span class="annot"><span class="annottext">Int -&gt; PlanarGraph w s v e f -&gt; ShowS
[PlanarGraph w s v e f] -&gt; ShowS
PlanarGraph w s v e f -&gt; String
(Int -&gt; PlanarGraph w s v e f -&gt; ShowS)
-&gt; (PlanarGraph w s v e f -&gt; String)
-&gt; ([PlanarGraph w s v e f] -&gt; ShowS)
-&gt; Show (PlanarGraph w s v e f)
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
forall (w :: World) k (s :: k) v e f.
(Show v, Show e, Show f) =&gt;
Int -&gt; PlanarGraph w s v e f -&gt; ShowS
forall (w :: World) k (s :: k) v e f.
(Show v, Show e, Show f) =&gt;
[PlanarGraph w s v e f] -&gt; ShowS
forall (w :: World) k (s :: k) v e f.
(Show v, Show e, Show f) =&gt;
PlanarGraph w s v e f -&gt; String
$cshowsPrec :: forall (w :: World) k (s :: k) v e f.
(Show v, Show e, Show f) =&gt;
Int -&gt; PlanarGraph w s v e f -&gt; ShowS
showsPrec :: Int -&gt; PlanarGraph w s v e f -&gt; ShowS
$cshow :: forall (w :: World) k (s :: k) v e f.
(Show v, Show e, Show f) =&gt;
PlanarGraph w s v e f -&gt; String
show :: PlanarGraph w s v e f -&gt; String
$cshowList :: forall (w :: World) k (s :: k) v e f.
(Show v, Show e, Show f) =&gt;
[PlanarGraph w s v e f] -&gt; ShowS
showList :: [PlanarGraph w s v e f] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span id="local-6989586621679250606"><span id="local-6989586621679250617"><span class="annot"><span class="annottext">PlanarGraph w s v e f -&gt; PlanarGraph w s v e f -&gt; Bool
(PlanarGraph w s v e f -&gt; PlanarGraph w s v e f -&gt; Bool)
-&gt; (PlanarGraph w s v e f -&gt; PlanarGraph w s v e f -&gt; Bool)
-&gt; Eq (PlanarGraph w s v e f)
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
forall (w :: World) k (s :: k) v e f.
(Eq v, Eq e, Eq f) =&gt;
PlanarGraph w s v e f -&gt; PlanarGraph w s v e f -&gt; Bool
$c== :: forall (w :: World) k (s :: k) v e f.
(Eq v, Eq e, Eq f) =&gt;
PlanarGraph w s v e f -&gt; PlanarGraph w s v e f -&gt; Bool
== :: PlanarGraph w s v e f -&gt; PlanarGraph w s v e f -&gt; Bool
$c/= :: forall (w :: World) k (s :: k) v e f.
(Eq v, Eq e, Eq f) =&gt;
PlanarGraph w s v e f -&gt; PlanarGraph w s v e f -&gt; Bool
/= :: PlanarGraph w s v e f -&gt; PlanarGraph w s v e f -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span class="annot"><span class="hs-comment">-- | Lens to access the connected components of a planar subdivision.</span></span><span>
</span><span id="line-84"></span><span id="local-6989586621679249657"><span id="local-6989586621679249658"><span id="local-6989586621679249659"><span id="local-6989586621679249660"><span id="local-6989586621679249661"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#components"><span class="hs-identifier hs-type">components</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Type.html#Lens%27"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249657"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249658"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249659"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249660"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249661"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249657"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249658"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-86"></span><span id="components"><span class="annot"><span class="annottext">components :: forall {k} (w :: World) (s :: k) v e f (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Component w s)
 -&gt; f (NonEmptyVector (Component w s)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
</span><a href="Hiraffe.PlanarGraph.Type.html#components"><span class="hs-identifier hs-var hs-var">components</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph w s v e f -&gt; NonEmptyVector (Component w s))
-&gt; (PlanarGraph w s v e f
    -&gt; NonEmptyVector (Component w s) -&gt; PlanarGraph w s v e f)
-&gt; Lens
     (PlanarGraph w s v e f)
     (PlanarGraph w s v e f)
     (NonEmptyVector (Component w s))
     (NonEmptyVector (Component w s))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Lens.html#lens"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f -&gt; NonEmptyVector (Component w s)
forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f -&gt; NonEmptyVector (Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#_components"><span class="hs-identifier hs-var">_components</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679250635"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679250635"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679250636"><span class="annot"><span class="annottext">NonEmptyVector (Component w s)
</span><a href="#local-6989586621679250636"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679250635"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#_components"><span class="hs-identifier hs-var">_components</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679250636"><span class="hs-identifier hs-type">cs</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="annot"><span class="hs-comment">-- | Lens to access the raw vertex data</span></span><span>
</span><span id="line-89"></span><span id="local-6989586621679249675"><span id="local-6989586621679249676"><span id="local-6989586621679249677"><span id="local-6989586621679249678"><span id="local-6989586621679249679"><span id="local-6989586621679249680"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#rawVertexData"><span class="hs-identifier hs-type">rawVertexData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Type.html#Lens"><span class="hs-identifier hs-type">Lens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249676"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249675"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249677"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249679"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249680"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249676"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249675"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249678"><span class="hs-identifier hs-type">v'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249679"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249680"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249675"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#VertexIx"><span class="hs-identifier hs-type">VertexIx</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249676"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249675"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679249677"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249675"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#VertexIx"><span class="hs-identifier hs-type">VertexIx</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249676"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249675"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679249678"><span class="hs-identifier hs-type">v'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-93"></span><span id="rawVertexData"><span class="annot"><span class="annottext">rawVertexData :: forall {k} (w :: World) (s :: k) v e f v' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Raw s (VertexIx (Component w s)) v)
 -&gt; f (NonEmptyVector (Raw s (VertexIx (Component w s)) v')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v' e f)
</span><a href="Hiraffe.PlanarGraph.Type.html#rawVertexData"><span class="hs-identifier hs-var hs-var">rawVertexData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph w s v e f
 -&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
-&gt; (PlanarGraph w s v e f
    -&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v')
    -&gt; PlanarGraph w s v' e f)
-&gt; Lens
     (PlanarGraph w s v e f)
     (PlanarGraph w s v' e f)
     (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
     (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v'))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Lens.html#lens"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; NonEmptyVector
     (Raw
        s
        (VertexIx
           (CPlanarGraph
              w (Wrap s) (VertexIdIn 'Primal s) (Dart s) (FaceIdIn 'Primal s)))
        v)
PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (VertexIx (Component w s)) v)
</span><a href="Hiraffe.PlanarGraph.Type.html#_rawVertexData"><span class="hs-identifier hs-var">_rawVertexData</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679250639"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679250639"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679250640"><span class="annot"><span class="annottext">NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v')
</span><a href="#local-6989586621679250640"><span class="hs-identifier hs-var">vxd</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679250639"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#_rawVertexData"><span class="hs-identifier hs-var">_rawVertexData</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679250640"><span class="hs-identifier hs-type">vxd</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="annot"><span class="hs-comment">-- | Lens to access the raw dart daat a</span></span><span>
</span><span id="line-96"></span><span id="local-6989586621679249690"><span id="local-6989586621679249691"><span id="local-6989586621679249692"><span id="local-6989586621679249693"><span id="local-6989586621679249694"><span id="local-6989586621679249695"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#rawDartData"><span class="hs-identifier hs-type">rawDartData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Type.html#Lens"><span class="hs-identifier hs-type">Lens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249691"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249690"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249694"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249692"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249695"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249691"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249690"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249694"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249693"><span class="hs-identifier hs-type">e'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249695"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249690"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249691"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249690"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679249692"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249690"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249691"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249690"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679249693"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-99"></span><span id="rawDartData"><span class="annot"><span class="annottext">rawDartData :: forall {k} (w :: World) (s :: k) v e f e' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; f (NonEmptyVector (Raw s (DartIx (Component w s)) e')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f)
</span><a href="Hiraffe.PlanarGraph.Type.html#rawDartData"><span class="hs-identifier hs-var hs-var">rawDartData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph w s v e f -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e))
-&gt; (PlanarGraph w s v e f
    -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e')
    -&gt; PlanarGraph w s v e' f)
-&gt; Lens
     (PlanarGraph w s v e f)
     (PlanarGraph w s v e' f)
     (NonEmptyVector (Raw s (Dart (Wrap s)) e))
     (NonEmptyVector (Raw s (Dart (Wrap s)) e'))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Lens.html#lens"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; NonEmptyVector
     (Raw
        s
        (DartIx
           (CPlanarGraph
              w (Wrap s) (VertexIdIn 'Primal s) (Dart s) (FaceIdIn 'Primal s)))
        e)
PlanarGraph w s v e f -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (DartIx (Component w s)) e)
</span><a href="Hiraffe.PlanarGraph.Type.html#_rawDartData"><span class="hs-identifier hs-var">_rawDartData</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679250643"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679250643"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679250644"><span class="annot"><span class="annottext">NonEmptyVector (Raw s (Dart (Wrap s)) e')
</span><a href="#local-6989586621679250644"><span class="hs-identifier hs-var">vxd</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679250643"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#_rawDartData"><span class="hs-identifier hs-var">_rawDartData</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679250644"><span class="hs-identifier hs-type">vxd</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span class="annot"><span class="hs-comment">-- | Access the raw face data</span></span><span>
</span><span id="line-102"></span><span id="local-6989586621679249705"><span id="local-6989586621679249706"><span id="local-6989586621679249707"><span id="local-6989586621679249708"><span id="local-6989586621679249709"><span id="local-6989586621679249710"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#rawFaceData"><span class="hs-identifier hs-type">rawFaceData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Type.html#Lens"><span class="hs-identifier hs-type">Lens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249705"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249706"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249709"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249710"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249707"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249705"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249706"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249709"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249710"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249708"><span class="hs-identifier hs-type">f'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#RawFace"><span class="hs-identifier hs-type">RawFace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249705"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249706"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249707"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#RawFace"><span class="hs-identifier hs-type">RawFace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249705"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249706"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249708"><span class="hs-identifier hs-type">f'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-104"></span><span id="rawFaceData"><span class="annot"><span class="annottext">rawFaceData :: forall {k} (w :: World) (s :: k) v e f f' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (RawFace w s f)
 -&gt; f (NonEmptyVector (RawFace w s f')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f')
</span><a href="Hiraffe.PlanarGraph.Type.html#rawFaceData"><span class="hs-identifier hs-var hs-var">rawFaceData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph w s v e f -&gt; NonEmptyVector (RawFace w s f))
-&gt; (PlanarGraph w s v e f
    -&gt; NonEmptyVector (RawFace w s f') -&gt; PlanarGraph w s v e f')
-&gt; Lens
     (PlanarGraph w s v e f)
     (PlanarGraph w s v e f')
     (NonEmptyVector (RawFace w s f))
     (NonEmptyVector (RawFace w s f'))
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Lens.html#lens"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f -&gt; NonEmptyVector (RawFace w s f)
forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f -&gt; NonEmptyVector (RawFace w s f)
</span><a href="Hiraffe.PlanarGraph.Type.html#_rawFaceData"><span class="hs-identifier hs-var">_rawFaceData</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679250647"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679250647"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679250648"><span class="annot"><span class="annottext">NonEmptyVector (RawFace w s f')
</span><a href="#local-6989586621679250648"><span class="hs-identifier hs-var">vxd</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679250647"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#_rawFaceData"><span class="hs-identifier hs-var">_rawFaceData</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679250648"><span class="hs-identifier hs-type">vxd</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span class="annot"><span class="hs-comment">-- | Lens to access a particular component of the planar subdivision.</span></span><span>
</span><span id="line-107"></span><span id="local-6989586621679249720"><span id="local-6989586621679249722"><span id="local-6989586621679249723"><span id="local-6989586621679249724"><span id="local-6989586621679249725"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#component"><span class="hs-identifier hs-type">component</span></a></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#ComponentId"><span class="hs-identifier hs-type">ComponentId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249720"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-108"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Type.html#Lens%27"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249722"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249720"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249723"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249724"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249725"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249722"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249720"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-109"></span><span id="component"><span class="annot"><span class="annottext">component :: forall {k} (s :: k) (w :: World) v e f.
ComponentId s -&gt; Lens' (PlanarGraph w s v e f) (Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#component"><span class="hs-identifier hs-var hs-var">component</span></a></span></span><span> </span><span id="local-6989586621679250660"><span class="annot"><span class="annottext">ComponentId s
</span><a href="#local-6989586621679250660"><span class="hs-identifier hs-var">ci</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (Component w s)
 -&gt; f (NonEmptyVector (Component w s)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
forall {k} (w :: World) (s :: k) v e f (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Component w s)
 -&gt; f (NonEmptyVector (Component w s)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
</span><a href="Hiraffe.PlanarGraph.Type.html#components"><span class="hs-identifier hs-var">components</span></a></span><span class="annot"><span class="annottext">((NonEmptyVector (Component w s)
  -&gt; f (NonEmptyVector (Component w s)))
 -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; ((Component w s -&gt; f (Component w s))
    -&gt; NonEmptyVector (Component w s)
    -&gt; f (NonEmptyVector (Component w s)))
-&gt; (Component w s -&gt; f (Component w s))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">Traversing
  (-&gt;)
  f
  (NonEmptyVector (Component w s))
  (NonEmptyVector (Component w s))
  (Component w s)
  (Component w s)
-&gt; (Component w s -&gt; f (Component w s))
-&gt; NonEmptyVector (Component w s)
-&gt; f (NonEmptyVector (Component w s))
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s t a.
(HasCallStack, Conjoined p, Functor f) =&gt;
Traversing p f s t a a -&gt; Over p f s t a a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Traversal.html#singular"><span class="hs-identifier hs-var">singular</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Index (NonEmptyVector (Component w s))
-&gt; Traversal'
     (NonEmptyVector (Component w s))
     (IxValue (NonEmptyVector (Component w s)))
forall m. Ixed m =&gt; Index m -&gt; Traversal' m (IxValue m)
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.At.html#ix"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="annot"><span class="annottext">(Index (NonEmptyVector (Component w s))
 -&gt; Traversal'
      (NonEmptyVector (Component w s))
      (IxValue (NonEmptyVector (Component w s))))
-&gt; Index (NonEmptyVector (Component w s))
-&gt; Traversal'
     (NonEmptyVector (Component w s))
     (IxValue (NonEmptyVector (Component w s)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ComponentId s -&gt; Int
forall k (s :: k). ComponentId s -&gt; Int
</span><a href="Hiraffe.PlanarGraph.Component.html#unCI"><span class="hs-identifier hs-var">unCI</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentId s
</span><a href="#local-6989586621679250660"><span class="hs-identifier hs-var">ci</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="annot"><span class="hs-comment">-- | Given a &quot;global&quot; dart id, get the component and local dart info</span></span><span>
</span><span id="line-114"></span><span id="local-6989586621679249764"><span id="local-6989586621679249765"><span id="local-6989586621679249766"><span id="local-6989586621679249767"><span id="local-6989586621679249768"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#asLocalD"><span class="hs-identifier hs-type">asLocalD</span></a></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249764"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249765"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249766"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249767"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249768"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249764"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249765"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249766"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249767"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249768"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-116"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#ComponentId"><span class="hs-identifier hs-type">ComponentId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249765"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249764"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249765"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249764"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249765"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-117"></span><span id="asLocalD"><span class="annot"><span class="annottext">asLocalD :: forall {k} (w :: World) (s :: k) v e f.
DartIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, DartIx (Component w s), Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#asLocalD"><span class="hs-identifier hs-var hs-var">asLocalD</span></a></span></span><span> </span><span id="local-6989586621679250677"><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679250677"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679250678"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679250678"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span id="local-6989586621679250680"><span class="annot"><span class="annottext">ComponentId s
</span><a href="#local-6989586621679250680"><span class="hs-identifier hs-var">ci</span></a></span></span><span> </span><span id="local-6989586621679250681"><span class="annot"><span class="annottext">Dart (Wrap s)
</span><a href="#local-6989586621679250681"><span class="hs-identifier hs-var">d'</span></a></span></span><span> </span><span class="annot"><span class="annottext">e
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679250678"><span class="hs-identifier hs-var">ps</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting
     (Endo (Raw s (Dart (Wrap s)) e))
     (PlanarGraph w s v e f)
     (Raw s (Dart (Wrap s)) e)
-&gt; Raw s (Dart (Wrap s)) e
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; Const
      (Endo (Raw s (Dart (Wrap s)) e))
      (NonEmptyVector (Raw s (DartIx (Component w s)) e)))
-&gt; PlanarGraph w s v e f
-&gt; Const (Endo (Raw s (Dart (Wrap s)) e)) (PlanarGraph w s v e f)
(NonEmptyVector (Raw s (Dart (Wrap s)) e)
 -&gt; Const
      (Endo (Raw s (Dart (Wrap s)) e))
      (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
-&gt; PlanarGraph w s v e f
-&gt; Const (Endo (Raw s (Dart (Wrap s)) e)) (PlanarGraph w s v e f)
forall {k} (w :: World) (s :: k) v e f e' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; f (NonEmptyVector (Raw s (DartIx (Component w s)) e')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f)
</span><a href="Hiraffe.PlanarGraph.Type.html#rawDartData"><span class="hs-identifier hs-var">rawDartData</span></a></span><span class="annot"><span class="annottext">((NonEmptyVector (Raw s (Dart (Wrap s)) e)
  -&gt; Const
       (Endo (Raw s (Dart (Wrap s)) e))
       (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
 -&gt; PlanarGraph w s v e f
 -&gt; Const (Endo (Raw s (Dart (Wrap s)) e)) (PlanarGraph w s v e f))
-&gt; ((Raw s (Dart (Wrap s)) e
     -&gt; Const
          (Endo (Raw s (Dart (Wrap s)) e)) (Raw s (Dart (Wrap s)) e))
    -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
    -&gt; Const
         (Endo (Raw s (Dart (Wrap s)) e))
         (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
-&gt; Getting
     (Endo (Raw s (Dart (Wrap s)) e))
     (PlanarGraph w s v e f)
     (Raw s (Dart (Wrap s)) e)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">Index (NonEmptyVector (Raw s (Dart (Wrap s)) e))
-&gt; Traversal'
     (NonEmptyVector (Raw s (Dart (Wrap s)) e))
     (IxValue (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
forall m. Ixed m =&gt; Index m -&gt; Traversal' m (IxValue m)
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.At.html#ix"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dart s -&gt; Int
forall a. Enum a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">fromEnum</span></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679250677"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span>                </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
</span><a href="#local-6989586621679250680"><span class="hs-identifier hs-var">ci</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DartIx (Component w s)
Dart (Wrap s)
</span><a href="#local-6989586621679250681"><span class="hs-identifier hs-var">d'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679250678"><span class="hs-identifier hs-var">ps</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting (Component w s) (PlanarGraph w s v e f) (Component w s)
-&gt; Component w s
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">ComponentId s -&gt; Lens' (PlanarGraph w s v e f) (Component w s)
forall {k} (s :: k) (w :: World) v e f.
ComponentId s -&gt; Lens' (PlanarGraph w s v e f) (Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#component"><span class="hs-identifier hs-var">component</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentId s
</span><a href="#local-6989586621679250680"><span class="hs-identifier hs-var">ci</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span class="annot"><span class="hs-comment">-- | Given a global vertexId, get the local info</span></span><span>
</span><span id="line-121"></span><span id="local-6989586621679249789"><span id="local-6989586621679249790"><span id="local-6989586621679249791"><span id="local-6989586621679249792"><span id="local-6989586621679249793"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#asLocalV"><span class="hs-identifier hs-type">asLocalV</span></a></span><span>                 </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#VertexIx"><span class="hs-identifier hs-type">VertexIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249789"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249790"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249791"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249792"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249793"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249789"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249790"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249791"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249792"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249793"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-123"></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#ComponentId"><span class="hs-identifier hs-type">ComponentId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249790"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#VertexIx"><span class="hs-identifier hs-type">VertexIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249789"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249790"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249789"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249790"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-124"></span><span id="asLocalV"><span class="annot"><span class="annottext">asLocalV :: forall {k} (w :: World) (s :: k) v e f.
VertexIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, VertexIx (Component w s), Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#asLocalV"><span class="hs-identifier hs-var hs-var">asLocalV</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#VertexId"><span class="hs-identifier hs-type">VertexId</span></a></span><span> </span><span id="local-6989586621679250693"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679250693"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679250694"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679250694"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span id="local-6989586621679250695"><span class="annot"><span class="annottext">ComponentId s
</span><a href="#local-6989586621679250695"><span class="hs-identifier hs-var">ci</span></a></span></span><span> </span><span id="local-6989586621679250696"><span class="annot"><span class="annottext">VertexIdIn w (Wrap s)
</span><a href="#local-6989586621679250696"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="annot"><span class="annottext">v
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679250694"><span class="hs-identifier hs-var">ps</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting
     (Endo (Raw s (VertexIdIn w (Wrap s)) v))
     (PlanarGraph w s v e f)
     (Raw s (VertexIdIn w (Wrap s)) v)
-&gt; Raw s (VertexIdIn w (Wrap s)) v
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (VertexIx (Component w s)) v)
 -&gt; Const
      (Endo (Raw s (VertexIdIn w (Wrap s)) v))
      (NonEmptyVector (Raw s (VertexIx (Component w s)) v)))
-&gt; PlanarGraph w s v e f
-&gt; Const
     (Endo (Raw s (VertexIdIn w (Wrap s)) v)) (PlanarGraph w s v e f)
(NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
 -&gt; Const
      (Endo (Raw s (VertexIdIn w (Wrap s)) v))
      (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)))
-&gt; PlanarGraph w s v e f
-&gt; Const
     (Endo (Raw s (VertexIdIn w (Wrap s)) v)) (PlanarGraph w s v e f)
forall {k} (w :: World) (s :: k) v e f v' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Raw s (VertexIx (Component w s)) v)
 -&gt; f (NonEmptyVector (Raw s (VertexIx (Component w s)) v')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v' e f)
</span><a href="Hiraffe.PlanarGraph.Type.html#rawVertexData"><span class="hs-identifier hs-var">rawVertexData</span></a></span><span class="annot"><span class="annottext">((NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
  -&gt; Const
       (Endo (Raw s (VertexIdIn w (Wrap s)) v))
       (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)))
 -&gt; PlanarGraph w s v e f
 -&gt; Const
      (Endo (Raw s (VertexIdIn w (Wrap s)) v)) (PlanarGraph w s v e f))
-&gt; ((Raw s (VertexIdIn w (Wrap s)) v
     -&gt; Const
          (Endo (Raw s (VertexIdIn w (Wrap s)) v))
          (Raw s (VertexIdIn w (Wrap s)) v))
    -&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
    -&gt; Const
         (Endo (Raw s (VertexIdIn w (Wrap s)) v))
         (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)))
-&gt; Getting
     (Endo (Raw s (VertexIdIn w (Wrap s)) v))
     (PlanarGraph w s v e f)
     (Raw s (VertexIdIn w (Wrap s)) v)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">Index (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
-&gt; Traversal'
     (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
     (IxValue (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)))
forall m. Ixed m =&gt; Index m -&gt; Traversal' m (IxValue m)
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.At.html#ix"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="annot"><span class="annottext">Int
Index (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
</span><a href="#local-6989586621679250693"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-125"></span><span>                           </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
</span><a href="#local-6989586621679250695"><span class="hs-identifier hs-var">ci</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VertexIx (Component w s)
VertexIdIn w (Wrap s)
</span><a href="#local-6989586621679250696"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679250694"><span class="hs-identifier hs-var">ps</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting (Component w s) (PlanarGraph w s v e f) (Component w s)
-&gt; Component w s
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">ComponentId s -&gt; Lens' (PlanarGraph w s v e f) (Component w s)
forall {k} (s :: k) (w :: World) v e f.
ComponentId s -&gt; Lens' (PlanarGraph w s v e f) (Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#component"><span class="hs-identifier hs-var">component</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentId s
</span><a href="#local-6989586621679250695"><span class="hs-identifier hs-var">ci</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span class="hs-comment">-- -- | Get the local face and component from a given face.</span><span>
</span><span id="line-128"></span><span class="hs-comment">-- asLocalF                          :: FaceId s -&gt; PlanarGraph w s v e f</span><span>
</span><span id="line-129"></span><span class="hs-comment">--                                   -&gt; NonEmpty (ComponentId s, FaceId (Wrap s), Component w s)</span><span>
</span><span id="line-130"></span><span class="hs-comment">-- asLocalF (FaceId (VertexId f)) ps = case ps^?!rawFaceData.ix f of</span><span>
</span><span id="line-131"></span><span class="hs-comment">--       RawFace (Just (ci,f')) _        -&gt; NonEmpty.singleton (ci,f', ps^.component ci)</span><span>
</span><span id="line-132"></span><span class="hs-comment">--       RawFace Nothing (FaceData hs _) -&gt; toLocalF &lt;$&gt; NonEmpty.fromList (F.toList hs)</span><span>
</span><span id="line-133"></span><span class="hs-comment">--   where</span><span>
</span><span id="line-134"></span><span class="hs-comment">--     toLocalF d = let (ci,d',c) = asLocalD d ps in (ci, c^.leftFaceOf d' , c)</span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679249811"><span id="local-6989586621679249812"><span id="local-6989586621679249813"><span id="local-6989586621679249814"><span id="local-6989586621679249815"><span class="annot"><a href="Hiraffe.Graph.Class.html#HasVertices%27"><span class="hs-identifier hs-type">HasVertices'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249811"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249812"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249813"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249814"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249815"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Vertex"><span class="annot"><a href="Hiraffe.Graph.Class.html#Vertex"><span class="hs-identifier hs-var">Vertex</span></a></span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249811"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249812"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249813"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249814"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249815"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679249813"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="VertexIx"><span class="annot"><a href="Hiraffe.Graph.Class.html#VertexIx"><span class="hs-identifier hs-var">VertexIx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249811"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249812"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249813"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249814"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249815"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#VertexId"><span class="hs-identifier hs-type">VertexId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249812"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-141"></span><span>  </span><span id="local-6989586621679250717"><span class="annot"><span class="annottext">vertexAt :: VertexIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (VertexIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Vertex (PlanarGraph w s v e f))
</span><a href="#local-6989586621679250717"><span class="hs-identifier hs-var hs-var hs-var">vertexAt</span></a></span></span><span> </span><span id="local-6989586621679250719"><span class="annot"><span class="annottext">u :: VertexIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679250719"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#VertexId"><span class="hs-identifier hs-type">VertexId</span></a></span><span> </span><span id="local-6989586621679250720"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679250720"><span class="hs-identifier hs-var">ui</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; VertexId s)
-&gt; (Indexed
      Int
      (Vertex (PlanarGraph w s v e f))
      (f (Vertex (PlanarGraph w s v e f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; p (Vertex (PlanarGraph w s v e f))
     (f (Vertex (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall j (p :: * -&gt; * -&gt; *) i a b r.
Indexable j p =&gt;
(i -&gt; j) -&gt; (Indexed i a b -&gt; r) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#reindexed"><span class="hs-identifier hs-var">reindexed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VertexId s -&gt; Int -&gt; VertexId s
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
VertexId s
</span><a href="#local-6989586621679250719"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Indexed
    Int
    (Vertex (PlanarGraph w s v e f))
    (f (Vertex (PlanarGraph w s v e f)))
  -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
 -&gt; p (Vertex (PlanarGraph w s v e f))
      (f (Vertex (PlanarGraph w s v e f)))
 -&gt; PlanarGraph w s v e f
 -&gt; f (PlanarGraph w s v e f))
-&gt; (Indexed
      Int
      (Vertex (PlanarGraph w s v e f))
      (f (Vertex (PlanarGraph w s v e f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; p (Vertex (PlanarGraph w s v e f))
     (f (Vertex (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (VertexIx (Component w s)) v)
 -&gt; f (NonEmptyVector (Raw s (VertexIx (Component w s)) v)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
(NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
 -&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
forall {k} (w :: World) (s :: k) v e f v' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Raw s (VertexIx (Component w s)) v)
 -&gt; f (NonEmptyVector (Raw s (VertexIx (Component w s)) v')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v' e f)
</span><a href="Hiraffe.PlanarGraph.Type.html#rawVertexData"><span class="hs-identifier hs-var">rawVertexData</span></a></span><span class="annot"><span class="annottext">((NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
  -&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)))
 -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; (Indexed
      Int
      (Vertex (PlanarGraph w s v e f))
      (f (Vertex (PlanarGraph w s v e f)))
    -&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
    -&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)))
-&gt; Indexed
     Int
     (Vertex (PlanarGraph w s v e f))
     (f (Vertex (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">Index (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
-&gt; IndexedTraversal'
     (Index (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)))
     (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
     (IxValue (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)))
forall m.
Ixed m =&gt;
Index m -&gt; IndexedTraversal' (Index m) m (IxValue m)
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.At.html#iix"><span class="hs-identifier hs-var">iix</span></a></span><span> </span><span class="annot"><span class="annottext">Int
Index (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
</span><a href="#local-6989586621679250720"><span class="hs-identifier hs-var">ui</span></a></span><span> </span><span class="annot"><span class="annottext">(Indexed
   Int
   (Raw s (VertexIdIn w (Wrap s)) v)
   (f (Raw s (VertexIdIn w (Wrap s)) v))
 -&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
 -&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)))
-&gt; ((v -&gt; f v)
    -&gt; Raw s (VertexIdIn w (Wrap s)) v
    -&gt; f (Raw s (VertexIdIn w (Wrap s)) v))
-&gt; Indexed Int v (f v)
-&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
-&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
forall i (p :: * -&gt; * -&gt; *) s t r a b.
Indexable i p =&gt;
(Indexed i s t -&gt; r) -&gt; ((a -&gt; b) -&gt; s -&gt; t) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#%3C."><span class="hs-operator hs-var">&lt;.</span></a></span><span> </span><span class="annot"><span class="annottext">(v -&gt; f v)
-&gt; Raw s (VertexIdIn w (Wrap s)) v
-&gt; f (Raw s (VertexIdIn w (Wrap s)) v)
forall {k} (s :: k) ia a b (f :: * -&gt; *).
Functor f =&gt;
(a -&gt; f b) -&gt; Raw s ia a -&gt; f (Raw s ia b)
</span><a href="Hiraffe.PlanarGraph.Component.html#dataVal"><span class="hs-identifier hs-var">dataVal</span></a></span><span>
</span><span id="line-142"></span><span>  </span><span id="local-6989586621679250726"><span class="annot"><span class="annottext">numVertices :: PlanarGraph w s v e f -&gt; Int
</span><a href="#local-6989586621679250726"><span class="hs-identifier hs-var hs-var hs-var">numVertices</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v) -&gt; Int
forall a. NonEmptyVector a -&gt; Int
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.html#length"><span class="hs-identifier hs-var">NonEmptyV.length</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v) -&gt; Int)
-&gt; (PlanarGraph w s v e f
    -&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
-&gt; PlanarGraph w s v e f
-&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (VertexIx (Component w s)) v)
PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (VertexIx (Component w s)) v)
</span><a href="Hiraffe.PlanarGraph.Type.html#_rawVertexData"><span class="hs-identifier hs-var">_rawVertexData</span></a></span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#numVertices"><span class="hs-pragma hs-type">numVertices</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679249862"><span id="local-6989586621679249863"><span id="local-6989586621679249864"><span id="local-6989586621679249865"><span id="local-6989586621679249866"><span id="local-6989586621679249867"><span class="annot"><a href="Hiraffe.Graph.Class.html#HasVertices"><span class="hs-identifier hs-type">HasVertices</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249862"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249863"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249864"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249865"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249866"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249862"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249863"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249867"><span class="hs-identifier hs-type">v'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249865"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249866"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-146"></span><span>  </span><span id="local-6989586621679250749"><span class="annot"><span class="annottext">vertices :: IndexedTraversal1
  (VertexIx (PlanarGraph w s v e f))
  (PlanarGraph w s v e f)
  (PlanarGraph w s v' e f)
  (Vertex (PlanarGraph w s v e f))
  (Vertex (PlanarGraph w s v' e f))
</span><a href="#local-6989586621679250749"><span class="hs-identifier hs-var hs-var hs-var">vertices</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; VertexId s)
-&gt; (Indexed
      Int
      (Vertex (PlanarGraph w s v e f))
      (f (Vertex (PlanarGraph w s v' e f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v' e f))
-&gt; p (Vertex (PlanarGraph w s v e f))
     (f (Vertex (PlanarGraph w s v' e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v' e f)
forall j (p :: * -&gt; * -&gt; *) i a b r.
Indexable j p =&gt;
(i -&gt; j) -&gt; (Indexed i a b -&gt; r) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#reindexed"><span class="hs-identifier hs-var">reindexed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; VertexIx (PlanarGraph w s v e f)
Int -&gt; VertexId s
forall k (w :: World) (s :: k). Int -&gt; VertexIdIn w s
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#VertexId"><span class="hs-identifier hs-var">VertexId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#VertexIx"><span class="hs-identifier hs-type">VertexIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249862"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249863"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249864"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249865"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249866"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>           </span><span class="annot"><span class="annottext">((Indexed
    Int
    (Vertex (PlanarGraph w s v e f))
    (f (Vertex (PlanarGraph w s v' e f)))
  -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v' e f))
 -&gt; p (Vertex (PlanarGraph w s v e f))
      (f (Vertex (PlanarGraph w s v' e f)))
 -&gt; PlanarGraph w s v e f
 -&gt; f (PlanarGraph w s v' e f))
-&gt; (Indexed
      Int
      (Vertex (PlanarGraph w s v e f))
      (f (Vertex (PlanarGraph w s v' e f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v' e f))
-&gt; p (Vertex (PlanarGraph w s v e f))
     (f (Vertex (PlanarGraph w s v' e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v' e f)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (VertexIx (Component w s)) v)
 -&gt; f (NonEmptyVector (Raw s (VertexIx (Component w s)) v')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v' e f)
(NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
 -&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v' e f)
forall {k} (w :: World) (s :: k) v e f v' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Raw s (VertexIx (Component w s)) v)
 -&gt; f (NonEmptyVector (Raw s (VertexIx (Component w s)) v')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v' e f)
</span><a href="Hiraffe.PlanarGraph.Type.html#rawVertexData"><span class="hs-identifier hs-var">rawVertexData</span></a></span><span> </span><span class="annot"><span class="annottext">((NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
  -&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v')))
 -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v' e f))
-&gt; (Indexed
      Int
      (Vertex (PlanarGraph w s v e f))
      (f (Vertex (PlanarGraph w s v' e f)))
    -&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
    -&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v')))
-&gt; Indexed
     Int
     (Vertex (PlanarGraph w s v e f))
     (f (Vertex (PlanarGraph w s v' e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v' e f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Indexed
  Int
  (Raw s (VertexIdIn w (Wrap s)) v)
  (f (Raw s (VertexIdIn w (Wrap s)) v'))
-&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
-&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v'))
forall (f :: * -&gt; *) a b.
Traversable1 f =&gt;
IndexedTraversal1 Int (f a) (f b) a b
IndexedTraversal1
  Int
  (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
  (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v'))
  (Raw s (VertexIdIn w (Wrap s)) v)
  (Raw s (VertexIdIn w (Wrap s)) v')
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Traversal.html#traversed1"><span class="hs-identifier hs-var">traversed1</span></a></span><span> </span><span class="annot"><span class="annottext">(Indexed
   Int
   (Raw s (VertexIdIn w (Wrap s)) v)
   (f (Raw s (VertexIdIn w (Wrap s)) v'))
 -&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
 -&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v')))
-&gt; ((v -&gt; f v')
    -&gt; Raw s (VertexIdIn w (Wrap s)) v
    -&gt; f (Raw s (VertexIdIn w (Wrap s)) v'))
-&gt; Indexed Int v (f v')
-&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
-&gt; f (NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v'))
forall i (p :: * -&gt; * -&gt; *) s t r a b.
Indexable i p =&gt;
(Indexed i s t -&gt; r) -&gt; ((a -&gt; b) -&gt; s -&gt; t) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#%3C."><span class="hs-operator hs-var">&lt;.</span></a></span><span> </span><span class="annot"><span class="annottext">(v -&gt; f v')
-&gt; Raw s (VertexIdIn w (Wrap s)) v
-&gt; f (Raw s (VertexIdIn w (Wrap s)) v')
forall {k} (s :: k) ia a b (f :: * -&gt; *).
Functor f =&gt;
(a -&gt; f b) -&gt; Raw s ia a -&gt; f (Raw s ia b)
</span><a href="Hiraffe.PlanarGraph.Component.html#dataVal"><span class="hs-identifier hs-var">dataVal</span></a></span><span>
</span><span id="line-148"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679249889"><span id="local-6989586621679249890"><span id="local-6989586621679249891"><span id="local-6989586621679249892"><span id="local-6989586621679249893"><span class="annot"><a href="Hiraffe.Graph.Class.html#HasDarts%27"><span class="hs-identifier hs-type">HasDarts'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249889"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249890"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249891"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249892"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249893"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Dart"><span class="annot"><a href="Hiraffe.Graph.Class.html#Dart"><span class="hs-identifier hs-var">Dart</span></a></span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249889"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249890"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249891"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249892"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249893"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679249892"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-151"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="DartIx"><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-var">DartIx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249889"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249890"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249891"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249892"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249893"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Dart.html#Dart"><span class="hs-identifier hs-type">Dart.Dart</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249890"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-152"></span><span>  </span><span id="local-6989586621679250772"><span class="annot"><span class="annottext">dartAt :: DartIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (DartIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Dart (PlanarGraph w s v e f))
</span><a href="#local-6989586621679250772"><span class="hs-identifier hs-var hs-var hs-var">dartAt</span></a></span></span><span> </span><span id="local-6989586621679250774"><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679250774"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Dart s)
-&gt; (Indexed
      Int
      (Dart (PlanarGraph w s v e f))
      (f (Dart (PlanarGraph w s v e f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; p (Dart (PlanarGraph w s v e f))
     (f (Dart (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall j (p :: * -&gt; * -&gt; *) i a b r.
Indexable j p =&gt;
(i -&gt; j) -&gt; (Indexed i a b -&gt; r) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#reindexed"><span class="hs-identifier hs-var">reindexed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dart s -&gt; Int -&gt; Dart s
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679250774"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Indexed
    Int
    (Dart (PlanarGraph w s v e f))
    (f (Dart (PlanarGraph w s v e f)))
  -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
 -&gt; p (Dart (PlanarGraph w s v e f))
      (f (Dart (PlanarGraph w s v e f)))
 -&gt; PlanarGraph w s v e f
 -&gt; f (PlanarGraph w s v e f))
-&gt; (Indexed
      Int
      (Dart (PlanarGraph w s v e f))
      (f (Dart (PlanarGraph w s v e f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; p (Dart (PlanarGraph w s v e f))
     (f (Dart (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; f (NonEmptyVector (Raw s (DartIx (Component w s)) e)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
(NonEmptyVector (Raw s (Dart (Wrap s)) e)
 -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
forall {k} (w :: World) (s :: k) v e f e' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; f (NonEmptyVector (Raw s (DartIx (Component w s)) e')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f)
</span><a href="Hiraffe.PlanarGraph.Type.html#rawDartData"><span class="hs-identifier hs-var">rawDartData</span></a></span><span class="annot"><span class="annottext">((NonEmptyVector (Raw s (Dart (Wrap s)) e)
  -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
 -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; (Indexed
      Int
      (Dart (PlanarGraph w s v e f))
      (f (Dart (PlanarGraph w s v e f)))
    -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
    -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
-&gt; Indexed
     Int
     (Dart (PlanarGraph w s v e f))
     (f (Dart (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">Index (NonEmptyVector (Raw s (Dart (Wrap s)) e))
-&gt; IndexedTraversal'
     (Index (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
     (NonEmptyVector (Raw s (Dart (Wrap s)) e))
     (IxValue (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
forall m.
Ixed m =&gt;
Index m -&gt; IndexedTraversal' (Index m) m (IxValue m)
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.At.html#iix"><span class="hs-identifier hs-var">iix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dart s -&gt; Int
forall a. Enum a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">fromEnum</span></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679250774"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Indexed
   Int (Raw s (Dart (Wrap s)) e) (f (Raw s (Dart (Wrap s)) e))
 -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
 -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
-&gt; ((e -&gt; f e)
    -&gt; Raw s (Dart (Wrap s)) e -&gt; f (Raw s (Dart (Wrap s)) e))
-&gt; Indexed Int e (f e)
-&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
-&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e))
forall i (p :: * -&gt; * -&gt; *) s t r a b.
Indexable i p =&gt;
(Indexed i s t -&gt; r) -&gt; ((a -&gt; b) -&gt; s -&gt; t) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#%3C."><span class="hs-operator hs-var">&lt;.</span></a></span><span> </span><span class="annot"><span class="annottext">(e -&gt; f e)
-&gt; Raw s (Dart (Wrap s)) e -&gt; f (Raw s (Dart (Wrap s)) e)
forall {k} (s :: k) ia a b (f :: * -&gt; *).
Functor f =&gt;
(a -&gt; f b) -&gt; Raw s ia a -&gt; f (Raw s ia b)
</span><a href="Hiraffe.PlanarGraph.Component.html#dataVal"><span class="hs-identifier hs-var">dataVal</span></a></span><span>
</span><span id="line-153"></span><span>  </span><span id="local-6989586621679250775"><span class="annot"><span class="annottext">numDarts :: PlanarGraph w s v e f -&gt; Int
</span><a href="#local-6989586621679250775"><span class="hs-identifier hs-var hs-var hs-var">numDarts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Raw s (Dart (Wrap s)) e) -&gt; Int
forall a. NonEmptyVector a -&gt; Int
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.html#length"><span class="hs-identifier hs-var">NonEmptyV.length</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (Dart (Wrap s)) e) -&gt; Int)
-&gt; (PlanarGraph w s v e f
    -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e))
-&gt; PlanarGraph w s v e f
-&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (DartIx (Component w s)) e)
PlanarGraph w s v e f -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (DartIx (Component w s)) e)
</span><a href="Hiraffe.PlanarGraph.Type.html#_rawDartData"><span class="hs-identifier hs-var">_rawDartData</span></a></span><span>
</span><span id="line-154"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#numDarts"><span class="hs-pragma hs-type">numDarts</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679249908"><span id="local-6989586621679249909"><span id="local-6989586621679249910"><span id="local-6989586621679249911"><span id="local-6989586621679249912"><span id="local-6989586621679249913"><span class="annot"><a href="Hiraffe.Graph.Class.html#HasDarts"><span class="hs-identifier hs-type">HasDarts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249908"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249909"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249910"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249911"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249912"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249908"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249909"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249910"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249913"><span class="hs-identifier hs-type">e'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249912"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-157"></span><span>  </span><span id="local-6989586621679250797"><span class="annot"><span class="annottext">darts :: IndexedTraversal
  (DartIx (PlanarGraph w s v e f))
  (PlanarGraph w s v e f)
  (PlanarGraph w s v e' f)
  (Dart (PlanarGraph w s v e f))
  (Dart (PlanarGraph w s v e' f))
</span><a href="#local-6989586621679250797"><span class="hs-identifier hs-var hs-var hs-var">darts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Dart s)
-&gt; (Indexed
      Int
      (Dart (PlanarGraph w s v e f))
      (f (Dart (PlanarGraph w s v e' f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f))
-&gt; p (Dart (PlanarGraph w s v e f))
     (f (Dart (PlanarGraph w s v e' f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e' f)
forall j (p :: * -&gt; * -&gt; *) i a b r.
Indexable j p =&gt;
(i -&gt; j) -&gt; (Indexed i a b -&gt; r) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#reindexed"><span class="hs-identifier hs-var">reindexed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; DartIx (PlanarGraph w s v e f)
Int -&gt; Dart s
forall a. Enum a =&gt; Int -&gt; a
</span><span class="hs-identifier hs-var">toEnum</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249908"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249909"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249910"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249911"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249912"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>        </span><span class="annot"><span class="annottext">((Indexed
    Int
    (Dart (PlanarGraph w s v e f))
    (f (Dart (PlanarGraph w s v e' f)))
  -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f))
 -&gt; p (Dart (PlanarGraph w s v e f))
      (f (Dart (PlanarGraph w s v e' f)))
 -&gt; PlanarGraph w s v e f
 -&gt; f (PlanarGraph w s v e' f))
-&gt; (Indexed
      Int
      (Dart (PlanarGraph w s v e f))
      (f (Dart (PlanarGraph w s v e' f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f))
-&gt; p (Dart (PlanarGraph w s v e f))
     (f (Dart (PlanarGraph w s v e' f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e' f)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; f (NonEmptyVector (Raw s (DartIx (Component w s)) e')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f)
(NonEmptyVector (Raw s (Dart (Wrap s)) e)
 -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f)
forall {k} (w :: World) (s :: k) v e f e' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; f (NonEmptyVector (Raw s (DartIx (Component w s)) e')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f)
</span><a href="Hiraffe.PlanarGraph.Type.html#rawDartData"><span class="hs-identifier hs-var">rawDartData</span></a></span><span> </span><span class="annot"><span class="annottext">((NonEmptyVector (Raw s (Dart (Wrap s)) e)
  -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e')))
 -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f))
-&gt; (Indexed
      Int
      (Dart (PlanarGraph w s v e f))
      (f (Dart (PlanarGraph w s v e' f)))
    -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
    -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e')))
-&gt; Indexed
     Int
     (Dart (PlanarGraph w s v e f))
     (f (Dart (PlanarGraph w s v e' f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e' f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Indexed
  Int (Raw s (Dart (Wrap s)) e) (f (Raw s (Dart (Wrap s)) e'))
-&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
-&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e'))
forall i (t :: * -&gt; *) a b.
TraversableWithIndex i t =&gt;
IndexedTraversal i (t a) (t b) a b
IndexedTraversal
  Int
  (NonEmptyVector (Raw s (Dart (Wrap s)) e))
  (NonEmptyVector (Raw s (Dart (Wrap s)) e'))
  (Raw s (Dart (Wrap s)) e)
  (Raw s (Dart (Wrap s)) e')
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#itraversed"><span class="hs-identifier hs-var">itraversed</span></a></span><span> </span><span class="annot"><span class="annottext">(Indexed
   Int (Raw s (Dart (Wrap s)) e) (f (Raw s (Dart (Wrap s)) e'))
 -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
 -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e')))
-&gt; ((e -&gt; f e')
    -&gt; Raw s (Dart (Wrap s)) e -&gt; f (Raw s (Dart (Wrap s)) e'))
-&gt; Indexed Int e (f e')
-&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
-&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e'))
forall i (p :: * -&gt; * -&gt; *) s t r a b.
Indexable i p =&gt;
(Indexed i s t -&gt; r) -&gt; ((a -&gt; b) -&gt; s -&gt; t) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#%3C."><span class="hs-operator hs-var">&lt;.</span></a></span><span> </span><span class="annot"><span class="annottext">(e -&gt; f e')
-&gt; Raw s (Dart (Wrap s)) e -&gt; f (Raw s (Dart (Wrap s)) e')
forall {k} (s :: k) ia a b (f :: * -&gt; *).
Functor f =&gt;
(a -&gt; f b) -&gt; Raw s ia a -&gt; f (Raw s ia b)
</span><a href="Hiraffe.PlanarGraph.Component.html#dataVal"><span class="hs-identifier hs-var">dataVal</span></a></span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679249932"><span id="local-6989586621679249933"><span id="local-6989586621679249934"><span id="local-6989586621679249935"><span id="local-6989586621679249936"><span class="annot"><a href="Hiraffe.Graph.Class.html#HasEdges%27"><span class="hs-identifier hs-type">HasEdges'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249932"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249933"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249934"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249935"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249936"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-161"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Edge"><span class="annot"><a href="Hiraffe.Graph.Class.html#Edge"><span class="hs-identifier hs-var">Edge</span></a></span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249932"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249933"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249934"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249935"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249936"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679249935"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-162"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="EdgeIx"><span class="annot"><a href="Hiraffe.Graph.Class.html#EdgeIx"><span class="hs-identifier hs-var">EdgeIx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249932"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249933"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249934"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249935"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249936"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Dart.html#Dart"><span class="hs-identifier hs-type">Dart.Dart</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249933"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-163"></span><span>  </span><span id="local-6989586621679250820"><span class="annot"><span class="annottext">edgeAt :: EdgeIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (EdgeIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Edge (PlanarGraph w s v e f))
</span><a href="#local-6989586621679250820"><span class="hs-identifier hs-var hs-var hs-var">edgeAt</span></a></span></span><span> </span><span id="local-6989586621679250822"><span class="annot"><span class="annottext">EdgeIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679250822"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Dart s)
-&gt; (Indexed
      Int
      (Edge (PlanarGraph w s v e f))
      (f (Edge (PlanarGraph w s v e f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; p (Edge (PlanarGraph w s v e f))
     (f (Edge (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall j (p :: * -&gt; * -&gt; *) i a b r.
Indexable j p =&gt;
(i -&gt; j) -&gt; (Indexed i a b -&gt; r) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#reindexed"><span class="hs-identifier hs-var">reindexed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dart s -&gt; Int -&gt; Dart s
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">EdgeIx (PlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679250822"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Indexed
    Int
    (Edge (PlanarGraph w s v e f))
    (f (Edge (PlanarGraph w s v e f)))
  -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
 -&gt; p (Edge (PlanarGraph w s v e f))
      (f (Edge (PlanarGraph w s v e f)))
 -&gt; PlanarGraph w s v e f
 -&gt; f (PlanarGraph w s v e f))
-&gt; (Indexed
      Int
      (Edge (PlanarGraph w s v e f))
      (f (Edge (PlanarGraph w s v e f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; p (Edge (PlanarGraph w s v e f))
     (f (Edge (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; f (NonEmptyVector (Raw s (DartIx (Component w s)) e)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
(NonEmptyVector (Raw s (Dart (Wrap s)) e)
 -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
forall {k} (w :: World) (s :: k) v e f e' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; f (NonEmptyVector (Raw s (DartIx (Component w s)) e')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f)
</span><a href="Hiraffe.PlanarGraph.Type.html#rawDartData"><span class="hs-identifier hs-var">rawDartData</span></a></span><span class="annot"><span class="annottext">((NonEmptyVector (Raw s (Dart (Wrap s)) e)
  -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
 -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; (Indexed
      Int
      (Edge (PlanarGraph w s v e f))
      (f (Edge (PlanarGraph w s v e f)))
    -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
    -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
-&gt; Indexed
     Int
     (Edge (PlanarGraph w s v e f))
     (f (Edge (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">Index (NonEmptyVector (Raw s (Dart (Wrap s)) e))
-&gt; IndexedTraversal'
     (Index (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
     (NonEmptyVector (Raw s (Dart (Wrap s)) e))
     (IxValue (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
forall m.
Ixed m =&gt;
Index m -&gt; IndexedTraversal' (Index m) m (IxValue m)
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.At.html#iix"><span class="hs-identifier hs-var">iix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dart s -&gt; Int
forall a. Enum a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">fromEnum</span></span><span> </span><span class="annot"><span class="annottext">EdgeIx (PlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679250822"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Indexed
   Int (Raw s (Dart (Wrap s)) e) (f (Raw s (Dart (Wrap s)) e))
 -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
 -&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e)))
-&gt; ((e -&gt; f e)
    -&gt; Raw s (Dart (Wrap s)) e -&gt; f (Raw s (Dart (Wrap s)) e))
-&gt; Indexed Int e (f e)
-&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
-&gt; f (NonEmptyVector (Raw s (Dart (Wrap s)) e))
forall i (p :: * -&gt; * -&gt; *) s t r a b.
Indexable i p =&gt;
(Indexed i s t -&gt; r) -&gt; ((a -&gt; b) -&gt; s -&gt; t) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#%3C."><span class="hs-operator hs-var">&lt;.</span></a></span><span> </span><span class="annot"><span class="annottext">(e -&gt; f e)
-&gt; Raw s (Dart (Wrap s)) e -&gt; f (Raw s (Dart (Wrap s)) e)
forall {k} (s :: k) ia a b (f :: * -&gt; *).
Functor f =&gt;
(a -&gt; f b) -&gt; Raw s ia a -&gt; f (Raw s ia b)
</span><a href="Hiraffe.PlanarGraph.Component.html#dataVal"><span class="hs-identifier hs-var">dataVal</span></a></span><span>
</span><span id="line-164"></span><span>  </span><span id="local-6989586621679250827"><span class="annot"><span class="annottext">numEdges :: PlanarGraph w s v e f -&gt; Int
</span><a href="#local-6989586621679250827"><span class="hs-identifier hs-var hs-var hs-var">numEdges</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`div`</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int)
-&gt; (PlanarGraph w s v e f -&gt; Int) -&gt; PlanarGraph w s v e f -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Raw s (Dart (Wrap s)) e) -&gt; Int
forall a. NonEmptyVector a -&gt; Int
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.html#length"><span class="hs-identifier hs-var">NonEmptyV.length</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (Dart (Wrap s)) e) -&gt; Int)
-&gt; (PlanarGraph w s v e f
    -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e))
-&gt; PlanarGraph w s v e f
-&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (DartIx (Component w s)) e)
PlanarGraph w s v e f -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f
-&gt; NonEmptyVector (Raw s (DartIx (Component w s)) e)
</span><a href="Hiraffe.PlanarGraph.Type.html#_rawDartData"><span class="hs-identifier hs-var">_rawDartData</span></a></span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679249952"><span id="local-6989586621679249953"><span id="local-6989586621679249954"><span id="local-6989586621679249955"><span id="local-6989586621679249956"><span id="local-6989586621679249957"><span class="annot"><a href="Hiraffe.Graph.Class.html#HasEdges"><span class="hs-identifier hs-type">HasEdges</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249952"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249953"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249954"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249955"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249956"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249952"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249953"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249954"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249957"><span class="hs-identifier hs-type">e'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249956"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-167"></span><span>  </span><span id="local-6989586621679250841"><span class="annot"><span class="annottext">edges :: IndexedTraversal
  (EdgeIx (PlanarGraph w s v e f))
  (PlanarGraph w s v e f)
  (PlanarGraph w s v e' f)
  (Edge (PlanarGraph w s v e f))
  (Edge (PlanarGraph w s v e' f))
</span><a href="#local-6989586621679250841"><span class="hs-identifier hs-var hs-var hs-var">edges</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Dart s -&gt; e -&gt; f e')
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f)
</span><a href="#local-6989586621679250843"><span class="hs-identifier hs-var">itraverse'</span></a></span><span class="annot"><span class="annottext">((Dart s -&gt; e -&gt; f e')
 -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f))
-&gt; (p e (f e') -&gt; Dart s -&gt; e -&gt; f e')
-&gt; p e (f e')
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e' f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">p e (f e') -&gt; Dart s -&gt; e -&gt; f e'
forall a b. p a b -&gt; Dart s -&gt; a -&gt; b
forall i (p :: * -&gt; * -&gt; *) a b.
Indexable i p =&gt;
p a b -&gt; i -&gt; a -&gt; b
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Internal.Indexed.html#indexed"><span class="hs-identifier hs-var">indexed</span></a></span><span>
</span><span id="line-168"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-169"></span><span>      </span><span id="local-6989586621679250843"><span class="annot"><span class="annottext">itraverse' :: (Dart s -&gt; e -&gt; f e')
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f)
</span><a href="#local-6989586621679250843"><span class="hs-identifier hs-var hs-var">itraverse'</span></a></span></span><span> </span><span id="local-6989586621679250845"><span class="annot"><span class="annottext">Dart s -&gt; e -&gt; f e'
</span><a href="#local-6989586621679250845"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WrappedApplicative f (PlanarGraph w s v e' f)
-&gt; f (PlanarGraph w s v e' f)
forall (f :: * -&gt; *) a. WrappedApplicative f a -&gt; f a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/semigroupoids-6.0.2-4f02d4525881a843957dd389fad628ddb080cdcbf0ace7494169fdf0d0f44b6c/share/doc/html/src/Data.Functor.Bind.Class.html#unwrapApplicative"><span class="hs-identifier hs-var">Apply.unwrapApplicative</span></a></span><span>
</span><span id="line-170"></span><span>                   </span><span class="annot"><span class="annottext">(WrappedApplicative f (PlanarGraph w s v e' f)
 -&gt; f (PlanarGraph w s v e' f))
-&gt; (PlanarGraph w s v e f
    -&gt; WrappedApplicative f (PlanarGraph w s v e' f))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e' f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Dart s -&gt; e -&gt; WrappedApplicative f e')
-&gt; PlanarGraph w s v e f
-&gt; WrappedApplicative f (PlanarGraph w s v e' f)
forall (g :: * -&gt; *).
Apply g =&gt;
(Dart s -&gt; e -&gt; g e')
-&gt; PlanarGraph w s v e f -&gt; g (PlanarGraph w s v e' f)
</span><a href="#local-6989586621679250847"><span class="hs-identifier hs-var">itraverse1'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679250848"><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679250848"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679250849"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679250849"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">f e' -&gt; WrappedApplicative f e'
forall (f :: * -&gt; *) a. f a -&gt; WrappedApplicative f a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/semigroupoids-6.0.2-4f02d4525881a843957dd389fad628ddb080cdcbf0ace7494169fdf0d0f44b6c/share/doc/html/src/Data.Functor.Bind.Class.html#WrapApplicative"><span class="hs-identifier hs-var">Apply.WrapApplicative</span></a></span><span> </span><span class="annot"><span class="annottext">(f e' -&gt; WrappedApplicative f e')
-&gt; f e' -&gt; WrappedApplicative f e'
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dart s -&gt; e -&gt; f e'
</span><a href="#local-6989586621679250845"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679250848"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679250849"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span>      </span><span id="local-6989586621679249968"><span class="annot"><a href="#local-6989586621679250847"><span class="hs-identifier hs-type">itraverse1'</span></a></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/semigroupoids-6.0.2-4f02d4525881a843957dd389fad628ddb080cdcbf0ace7494169fdf0d0f44b6c/share/doc/html/src/Data.Functor.Bind.Class.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249968"><span class="hs-identifier hs-type">g</span></a></span><span>
</span><span id="line-173"></span><span>                       </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Dart.html#Dart"><span class="hs-identifier hs-type">Dart.Dart</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249953"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679249955"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679249968"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249957"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249952"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249953"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249954"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249955"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249956"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679249968"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249952"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249953"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249954"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249957"><span class="hs-identifier hs-type">e'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249956"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-175"></span><span>      </span><span id="local-6989586621679250847"><span class="annot"><span class="annottext">itraverse1' :: forall (g :: * -&gt; *).
Apply g =&gt;
(Dart s -&gt; e -&gt; g e')
-&gt; PlanarGraph w s v e f -&gt; g (PlanarGraph w s v e' f)
</span><a href="#local-6989586621679250847"><span class="hs-identifier hs-var hs-var">itraverse1'</span></a></span></span><span> </span><span id="local-6989586621679250855"><span class="annot"><span class="annottext">Dart s -&gt; e -&gt; g e'
</span><a href="#local-6989586621679250855"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679250856"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679250856"><span class="hs-identifier hs-var">pg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679250856"><span class="hs-identifier hs-var">pg</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; (PlanarGraph w s v e f -&gt; g (PlanarGraph w s v e' f))
-&gt; g (PlanarGraph w s v e' f)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span class="annot"><span class="annottext">(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; g (NonEmptyVector (Raw s (DartIx (Component w s)) e')))
-&gt; PlanarGraph w s v e f -&gt; g (PlanarGraph w s v e' f)
(NonEmptyVector (Raw s (Dart (Wrap s)) e)
 -&gt; g (NonEmptyVector (Raw s (Dart (Wrap s)) e')))
-&gt; PlanarGraph w s v e f -&gt; g (PlanarGraph w s v e' f)
forall {k} (w :: World) (s :: k) v e f e' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Raw s (DartIx (Component w s)) e)
 -&gt; f (NonEmptyVector (Raw s (DartIx (Component w s)) e')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e' f)
</span><a href="Hiraffe.PlanarGraph.Type.html#rawDartData"><span class="hs-identifier hs-var">rawDartData</span></a></span><span> </span><span class="annot"><span class="annottext">((NonEmptyVector (Raw s (Dart (Wrap s)) e)
  -&gt; g (NonEmptyVector (Raw s (Dart (Wrap s)) e')))
 -&gt; PlanarGraph w s v e f -&gt; g (PlanarGraph w s v e' f))
-&gt; (NonEmptyVector (Raw s (Dart (Wrap s)) e)
    -&gt; g (NonEmptyVector (Raw s (Dart (Wrap s)) e')))
-&gt; PlanarGraph w s v e f
-&gt; g (PlanarGraph w s v e' f)
forall {k} (f :: k -&gt; *) s (t :: k) a (b :: k).
LensLike f s t a b -&gt; LensLike f s t a b
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Lens.html#%25%25~"><span class="hs-operator hs-var">%%~</span></a></span><span> </span><span class="annot"><span class="annottext">(Dart s -&gt; e -&gt; g e')
-&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
-&gt; g (NonEmptyVector (Raw s (Dart (Wrap s)) e'))
forall {k} (g :: * -&gt; *) (s :: k) a e e'.
Apply g =&gt;
(Dart s -&gt; e -&gt; g e')
-&gt; NonEmptyVector (Raw s a e) -&gt; g (NonEmptyVector (Raw s a e'))
</span><a href="Hiraffe.PlanarGraph.Type.html#itraverseEdges1"><span class="hs-identifier hs-var">itraverseEdges1</span></a></span><span> </span><span class="annot"><span class="annottext">Dart s -&gt; e -&gt; g e'
</span><a href="#local-6989586621679250855"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span class="annot"><span class="hs-comment">-- | itraverse the edges; i.e. makes sure to only apply our function to the positive darts.</span></span><span>
</span><span id="line-178"></span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#itraverseEdges1"><span class="hs-identifier hs-type">itraverseEdges1</span></a></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679249983"><span class="annot"><a href="#local-6989586621679249983"><span class="hs-identifier hs-type">g</span></a></span></span><span> </span><span id="local-6989586621679249984"><span class="annot"><a href="#local-6989586621679249984"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679249987"><span class="annot"><a href="#local-6989586621679249987"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679249985"><span class="annot"><a href="#local-6989586621679249985"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621679249986"><span class="annot"><a href="#local-6989586621679249986"><span class="hs-identifier hs-type">e'</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/semigroupoids-6.0.2-4f02d4525881a843957dd389fad628ddb080cdcbf0ace7494169fdf0d0f44b6c/share/doc/html/src/Data.Functor.Bind.Class.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249983"><span class="hs-identifier hs-type">g</span></a></span><span>
</span><span id="line-179"></span><span>                    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Dart.html#Dart"><span class="hs-identifier hs-type">Dart.Dart</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249984"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679249985"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679249983"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249986"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249984"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249987"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249985"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-181"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679249983"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249984"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249987"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249986"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span id="itraverseEdges1"><span class="annot"><span class="annottext">itraverseEdges1 :: forall {k} (g :: * -&gt; *) (s :: k) a e e'.
Apply g =&gt;
(Dart s -&gt; e -&gt; g e')
-&gt; NonEmptyVector (Raw s a e) -&gt; g (NonEmptyVector (Raw s a e'))
</span><a href="Hiraffe.PlanarGraph.Type.html#itraverseEdges1"><span class="hs-identifier hs-var hs-var">itraverseEdges1</span></a></span></span><span> </span><span id="local-6989586621679250873"><span class="annot"><span class="annottext">Dart s -&gt; e -&gt; g e'
</span><a href="#local-6989586621679250873"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679250874"><span class="annot"><span class="annottext">NonEmptyVector (Raw s a e)
</span><a href="#local-6989586621679250874"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty (Int, e') -&gt; NonEmptyVector (Raw s a e')
</span><a href="#local-6989586621679250875"><span class="hs-identifier hs-var">copyPositives</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty (Int, e') -&gt; NonEmptyVector (Raw s a e'))
-&gt; g (NonEmpty (Int, e')) -&gt; g (NonEmptyVector (Raw s a e'))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">g (NonEmpty (Int, e'))
</span><a href="#local-6989586621679250877"><span class="hs-identifier hs-var">gv'</span></a></span><span>
</span><span id="line-183"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-184"></span><span>    </span><span class="hs-comment">-- We collect only the positive darts, and apply the given function on them. We tag</span><span>
</span><span id="line-185"></span><span>    </span><span class="hs-comment">-- the result with the dart they correspond to (or rather, the corresponding index)</span><span>
</span><span id="line-186"></span><span>    </span><span class="annot"><a href="#local-6989586621679250877"><span class="hs-identifier hs-type">gv'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679249983"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679249986"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>    </span><span id="local-6989586621679250877"><span class="annot"><span class="annottext">gv' :: g (NonEmpty (Int, e'))
</span><a href="#local-6989586621679250877"><span class="hs-identifier hs-var hs-var">gv'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty (g (Int, e')) -&gt; g (NonEmpty (Int, e'))
forall (t :: * -&gt; *) (f :: * -&gt; *) b.
(Traversable1 t, Apply f) =&gt;
t (f b) -&gt; f (t b)
forall (f :: * -&gt; *) b. Apply f =&gt; NonEmpty (f b) -&gt; f (NonEmpty b)
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/semigroupoids-6.0.2-4f02d4525881a843957dd389fad628ddb080cdcbf0ace7494169fdf0d0f44b6c/share/doc/html/src/Data.Semigroup.Traversable.Class.html#sequence1"><span class="hs-identifier hs-var">sequence1</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty (g (Int, e')) -&gt; g (NonEmpty (Int, e')))
-&gt; ([g (Int, e')] -&gt; NonEmpty (g (Int, e')))
-&gt; [g (Int, e')]
-&gt; g (NonEmpty (Int, e'))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[g (Int, e')] -&gt; NonEmpty (g (Int, e'))
forall a. HasCallStack =&gt; [a] -&gt; NonEmpty a
</span><span class="hs-identifier hs-var">NonEmpty.fromList</span></span><span> </span><span class="annot"><span class="annottext">([g (Int, e')] -&gt; g (NonEmpty (Int, e')))
-&gt; [g (Int, e')] -&gt; g (NonEmpty (Int, e'))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Raw s a e -&gt; [g (Int, e')] -&gt; [g (Int, e')])
-&gt; [g (Int, e')] -&gt; NonEmptyVector (Raw s a e) -&gt; [g (Int, e')]
forall a b. (Int -&gt; a -&gt; b -&gt; b) -&gt; b -&gt; NonEmptyVector a -&gt; b
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.html#ifoldr"><span class="hs-identifier hs-var">NonEmptyV.ifoldr</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Raw s a e -&gt; [g (Int, e')] -&gt; [g (Int, e')]
</span><a href="#local-6989586621679250881"><span class="hs-identifier hs-var">applyF</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Raw s a e)
</span><a href="#local-6989586621679250874"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-188"></span><span>    </span><span id="local-6989586621679250881"><span class="annot"><span class="annottext">applyF :: Int -&gt; Raw s a e -&gt; [g (Int, e')] -&gt; [g (Int, e')]
</span><a href="#local-6989586621679250881"><span class="hs-identifier hs-var hs-var">applyF</span></a></span></span><span> </span><span id="local-6989586621679250882"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679250882"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679250883"><span class="annot"><span class="annottext">Raw s a e
</span><a href="#local-6989586621679250883"><span class="hs-identifier hs-var">raw</span></a></span></span><span> </span><span id="local-6989586621679250884"><span class="annot"><span class="annottext">[g (Int, e')]
</span><a href="#local-6989586621679250884"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679250885"><span class="annot"><span class="annottext">d :: Dart s
</span><a href="#local-6989586621679250885"><span class="hs-identifier hs-var hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Dart s
forall a. Enum a =&gt; Int -&gt; a
</span><span class="hs-identifier hs-var">toEnum</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679250882"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-189"></span><span>                      </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Dart s -&gt; Bool
forall {k} (s :: k). Dart s -&gt; Bool
</span><a href="Hiraffe.PlanarGraph.Dart.html#isPositive"><span class="hs-identifier hs-var">Dart.isPositive</span></a></span><span> </span><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679250885"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-190"></span><span>                         </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679250882"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(e' -&gt; (Int, e')) -&gt; g e' -&gt; g (Int, e')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Dart s -&gt; e -&gt; g e'
</span><a href="#local-6989586621679250873"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679250885"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Raw s a e
</span><a href="#local-6989586621679250883"><span class="hs-identifier hs-var">raw</span></a></span><span class="annot"><span class="annottext">Raw s a e -&gt; Getting e (Raw s a e) e -&gt; e
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">Getting e (Raw s a e) e
forall {k} (s :: k) ia a b (f :: * -&gt; *).
Functor f =&gt;
(a -&gt; f b) -&gt; Raw s ia a -&gt; f (Raw s ia b)
</span><a href="Hiraffe.PlanarGraph.Component.html#dataVal"><span class="hs-identifier hs-var">dataVal</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">g (Int, e') -&gt; [g (Int, e')] -&gt; [g (Int, e')]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[g (Int, e')]
</span><a href="#local-6989586621679250884"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-191"></span><span>                         </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[g (Int, e')]
</span><a href="#local-6989586621679250884"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span>    </span><span class="hs-comment">-- We simultaneously scan through the original vector and the result of processing the</span><span>
</span><span id="line-194"></span><span>    </span><span class="hs-comment">-- positive darts. For positive darts we simply take the value as computed before. For</span><span>
</span><span id="line-195"></span><span>    </span><span class="hs-comment">-- negative darts, we lookup the value that we computed for their corresponding twin.</span><span>
</span><span id="line-196"></span><span>    </span><span class="hs-comment">-- i.e. by tying the knot.</span><span>
</span><span id="line-197"></span><span>    </span><span class="annot"><a href="#local-6989586621679250875"><span class="hs-identifier hs-type">copyPositives</span></a></span><span>           </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679249986"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-type">Raw</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249984"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249987"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679249986"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span>    </span><span id="local-6989586621679250875"><span class="annot"><span class="annottext">copyPositives :: NonEmpty (Int, e') -&gt; NonEmptyVector (Raw s a e')
</span><a href="#local-6989586621679250875"><span class="hs-identifier hs-var hs-var">copyPositives</span></a></span></span><span> </span><span id="local-6989586621679250887"><span class="annot"><span class="annottext">NonEmpty (Int, e')
</span><a href="#local-6989586621679250887"><span class="hs-identifier hs-var">positives</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Int, e')]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621679250888"><span class="annot"><span class="annottext">NonEmptyVector (Raw s a e')
</span><a href="#local-6989586621679250888"><span class="hs-identifier hs-var">v'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; [(Int, e')] -&gt; Raw s a e -&gt; ([(Int, e')], Raw s a e'))
-&gt; [(Int, e')]
-&gt; NonEmptyVector (Raw s a e)
-&gt; ([(Int, e')], NonEmptyVector (Raw s a e'))
forall i (t :: * -&gt; *) s a b.
TraversableWithIndex i t =&gt;
(i -&gt; s -&gt; a -&gt; (s, b)) -&gt; s -&gt; t a -&gt; (s, t b)
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/indexed-traversable-0.1.4-abf18009c8aa238896def64882e8e8d1f618d0164d9214ba36444910f4d62193/share/doc/html/src/Data.Traversable.WithIndex.html#imapAccumL"><span class="hs-identifier hs-var">imapAccumL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmptyVector (Raw s a e')
-&gt; Int -&gt; [(Int, e')] -&gt; Raw s a e -&gt; ([(Int, e')], Raw s a e')
forall {k} {k} {s :: k} {ia} {b} {s :: k} {ia} {a}.
NonEmptyVector (Raw s ia b)
-&gt; Int -&gt; [(Int, b)] -&gt; Raw s ia a -&gt; ([(Int, b)], Raw s ia b)
</span><a href="#local-6989586621679250890"><span class="hs-identifier hs-var">setDartValue</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Raw s a e')
</span><a href="#local-6989586621679250888"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty (Int, e') -&gt; [(Int, e')]
forall a. NonEmpty a -&gt; [a]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">F.toList</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Int, e')
</span><a href="#local-6989586621679250887"><span class="hs-identifier hs-var">positives</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Raw s a e)
</span><a href="#local-6989586621679250874"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-200"></span><span>                              </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Raw s a e')
</span><a href="#local-6989586621679250888"><span class="hs-identifier hs-var">v'</span></a></span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span>    </span><span id="local-6989586621679250890"><span class="annot"><span class="annottext">setDartValue :: NonEmptyVector (Raw s ia b)
-&gt; Int -&gt; [(Int, b)] -&gt; Raw s ia a -&gt; ([(Int, b)], Raw s ia b)
</span><a href="#local-6989586621679250890"><span class="hs-identifier hs-var hs-var">setDartValue</span></a></span></span><span> </span><span id="local-6989586621679250900"><span class="annot"><span class="annottext">NonEmptyVector (Raw s ia b)
</span><a href="#local-6989586621679250900"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span id="local-6989586621679250901"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679250901"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679250902"><span class="annot"><span class="annottext">[(Int, b)]
</span><a href="#local-6989586621679250902"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span id="local-6989586621679250903"><span class="annot"><span class="annottext">Raw s ia a
</span><a href="#local-6989586621679250903"><span class="hs-identifier hs-var">raw</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[(Int, b)]
</span><a href="#local-6989586621679250902"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-203"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679250904"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679250904"><span class="hs-identifier hs-var">j</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679250905"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679250905"><span class="hs-identifier hs-var">e'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679250906"><span class="annot"><span class="annottext">[(Int, b)]
</span><a href="#local-6989586621679250906"><span class="hs-identifier hs-var">xs'</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679250901"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679250904"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Int, b)]
</span><a href="#local-6989586621679250906"><span class="hs-identifier hs-var">xs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Raw s ia a
</span><a href="#local-6989586621679250903"><span class="hs-identifier hs-var">raw</span></a></span><span class="annot"><span class="annottext">Raw s ia a -&gt; (Raw s ia a -&gt; Raw s ia b) -&gt; Raw s ia b
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span class="annot"><span class="annottext">(a -&gt; Identity b) -&gt; Raw s ia a -&gt; Identity (Raw s ia b)
forall {k} (s :: k) ia a b (f :: * -&gt; *).
Functor f =&gt;
(a -&gt; f b) -&gt; Raw s ia a -&gt; f (Raw s ia b)
</span><a href="Hiraffe.PlanarGraph.Component.html#dataVal"><span class="hs-identifier hs-var">dataVal</span></a></span><span> </span><span class="annot"><span class="annottext">((a -&gt; Identity b) -&gt; Raw s ia a -&gt; Identity (Raw s ia b))
-&gt; b -&gt; Raw s ia a -&gt; Raw s ia b
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Setter.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679250905"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>        </span><span class="annot"><span class="annottext">[(Int, b)]
</span><span class="hs-identifier">_</span></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679250908"><span class="annot"><span class="annottext">i' :: Int
</span><a href="#local-6989586621679250908"><span class="hs-identifier hs-var hs-var">i'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dart (ZonkAny 1) -&gt; Int
forall a. Enum a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">fromEnum</span></span><span> </span><span class="annot"><span class="annottext">(Dart (ZonkAny 1) -&gt; Int)
-&gt; (Int -&gt; Dart (ZonkAny 1)) -&gt; Int -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Dart (ZonkAny 1) -&gt; Dart (ZonkAny 1)
forall {k} (s :: k). Dart s -&gt; Dart s
</span><a href="Hiraffe.PlanarGraph.Dart.html#twin"><span class="hs-identifier hs-var">Dart.twin</span></a></span><span> </span><span class="annot"><span class="annottext">(Dart (ZonkAny 1) -&gt; Dart (ZonkAny 1))
-&gt; (Int -&gt; Dart (ZonkAny 1)) -&gt; Int -&gt; Dart (ZonkAny 1)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Dart (ZonkAny 1)
forall a. Enum a =&gt; Int -&gt; a
</span><span class="hs-identifier hs-var">toEnum</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; Int -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679250901"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-205"></span><span>                                 </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Int, b)]
</span><a href="#local-6989586621679250902"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Raw s ia a
</span><a href="#local-6989586621679250903"><span class="hs-identifier hs-var">raw</span></a></span><span class="annot"><span class="annottext">Raw s ia a -&gt; (Raw s ia a -&gt; Raw s ia b) -&gt; Raw s ia b
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span class="annot"><span class="annottext">(a -&gt; Identity b) -&gt; Raw s ia a -&gt; Identity (Raw s ia b)
forall {k} (s :: k) ia a b (f :: * -&gt; *).
Functor f =&gt;
(a -&gt; f b) -&gt; Raw s ia a -&gt; f (Raw s ia b)
</span><a href="Hiraffe.PlanarGraph.Component.html#dataVal"><span class="hs-identifier hs-var">dataVal</span></a></span><span> </span><span class="annot"><span class="annottext">((a -&gt; Identity b) -&gt; Raw s ia a -&gt; Identity (Raw s ia b))
-&gt; b -&gt; Raw s ia a -&gt; Raw s ia b
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Setter.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmptyVector (Raw s ia b)
</span><a href="#local-6989586621679250900"><span class="hs-identifier hs-var">v'</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Raw s ia b) -&gt; Int -&gt; Raw s ia b
forall a. NonEmptyVector a -&gt; Int -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.html#%21"><span class="hs-operator hs-var">NonEmptyV.!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679250908"><span class="hs-identifier hs-var">i'</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">Raw s ia b -&gt; Getting b (Raw s ia b) b -&gt; b
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">Getting b (Raw s ia b) b
forall {k} (s :: k) ia a b (f :: * -&gt; *).
Functor f =&gt;
(a -&gt; f b) -&gt; Raw s ia a -&gt; f (Raw s ia b)
</span><a href="Hiraffe.PlanarGraph.Component.html#dataVal"><span class="hs-identifier hs-var">dataVal</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679250040"><span id="local-6989586621679250041"><span id="local-6989586621679250042"><span id="local-6989586621679250043"><span id="local-6989586621679250044"><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#HasFaces%27"><span class="hs-identifier hs-type">HasFaces'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250040"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250041"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250042"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250043"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250044"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-209"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Face"><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#Face"><span class="hs-identifier hs-var">Face</span></a></span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250040"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250041"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250042"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250043"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250044"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679250044"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-210"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="FaceIx"><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#FaceIx"><span class="hs-identifier hs-var">FaceIx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250040"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250041"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250042"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250043"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250044"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#FaceId"><span class="hs-identifier hs-type">FaceId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250041"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-211"></span><span>  </span><span id="local-6989586621679250931"><span class="annot"><span class="annottext">faceAt :: FaceIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (FaceIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Face (PlanarGraph w s v e f))
</span><a href="#local-6989586621679250931"><span class="hs-identifier hs-var hs-var hs-var">faceAt</span></a></span></span><span> </span><span id="local-6989586621679250933"><span class="annot"><span class="annottext">FaceIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679250933"><span class="hs-identifier hs-var">fi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; FaceId s)
-&gt; (Indexed
      Int
      (Face (PlanarGraph w s v e f))
      (f (Face (PlanarGraph w s v e f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; p (Face (PlanarGraph w s v e f))
     (f (Face (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall j (p :: * -&gt; * -&gt; *) i a b r.
Indexable j p =&gt;
(i -&gt; j) -&gt; (Indexed i a b -&gt; r) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#reindexed"><span class="hs-identifier hs-var">reindexed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FaceId s -&gt; Int -&gt; FaceId s
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">FaceId s
FaceIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679250933"><span class="hs-identifier hs-var">fi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>            </span><span class="annot"><span class="annottext">((Indexed
    Int
    (Face (PlanarGraph w s v e f))
    (f (Face (PlanarGraph w s v e f)))
  -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
 -&gt; p (Face (PlanarGraph w s v e f))
      (f (Face (PlanarGraph w s v e f)))
 -&gt; PlanarGraph w s v e f
 -&gt; f (PlanarGraph w s v e f))
-&gt; (Indexed
      Int
      (Face (PlanarGraph w s v e f))
      (f (Face (PlanarGraph w s v e f)))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; p (Face (PlanarGraph w s v e f))
     (f (Face (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (RawFace w s f)
 -&gt; f (NonEmptyVector (RawFace w s f)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
forall {k} (w :: World) (s :: k) v e f f' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (RawFace w s f)
 -&gt; f (NonEmptyVector (RawFace w s f')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f')
</span><a href="Hiraffe.PlanarGraph.Type.html#rawFaceData"><span class="hs-identifier hs-var">rawFaceData</span></a></span><span> </span><span class="annot"><span class="annottext">((NonEmptyVector (RawFace w s f)
  -&gt; f (NonEmptyVector (RawFace w s f)))
 -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; (Indexed
      Int
      (Face (PlanarGraph w s v e f))
      (f (Face (PlanarGraph w s v e f)))
    -&gt; NonEmptyVector (RawFace w s f)
    -&gt; f (NonEmptyVector (RawFace w s f)))
-&gt; Indexed
     Int
     (Face (PlanarGraph w s v e f))
     (f (Face (PlanarGraph w s v e f)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Index (NonEmptyVector (RawFace w s f))
-&gt; IndexedTraversal'
     (Index (NonEmptyVector (RawFace w s f)))
     (NonEmptyVector (RawFace w s f))
     (IxValue (NonEmptyVector (RawFace w s f)))
forall m.
Ixed m =&gt;
Index m -&gt; IndexedTraversal' (Index m) m (IxValue m)
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.At.html#iix"><span class="hs-identifier hs-var">iix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FaceId s -&gt; Int
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">FaceId s
FaceIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679250933"><span class="hs-identifier hs-var">fi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Indexed Int (RawFace w s f) (f (RawFace w s f))
 -&gt; NonEmptyVector (RawFace w s f)
 -&gt; f (NonEmptyVector (RawFace w s f)))
-&gt; ((f -&gt; f f) -&gt; RawFace w s f -&gt; f (RawFace w s f))
-&gt; Indexed Int f (f f)
-&gt; NonEmptyVector (RawFace w s f)
-&gt; f (NonEmptyVector (RawFace w s f))
forall i (p :: * -&gt; * -&gt; *) s t r a b.
Indexable i p =&gt;
(Indexed i s t -&gt; r) -&gt; ((a -&gt; b) -&gt; s -&gt; t) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#%3C."><span class="hs-operator hs-var">&lt;.</span></a></span><span> </span><span class="annot"><span class="annottext">(FaceData (Dart s) f -&gt; f (FaceData (Dart s) f))
-&gt; RawFace w s f -&gt; f (RawFace w s f)
forall {k} (w :: World) (s :: k) f1 f' (f2 :: * -&gt; *).
Functor f2 =&gt;
(FaceData (Dart s) f1 -&gt; f2 (FaceData (Dart s) f'))
-&gt; RawFace w s f1 -&gt; f2 (RawFace w s f')
</span><a href="Hiraffe.PlanarGraph.Component.html#faceDataVal"><span class="hs-identifier hs-var">faceDataVal</span></a></span><span class="annot"><span class="annottext">((FaceData (Dart s) f -&gt; f (FaceData (Dart s) f))
 -&gt; RawFace w s f -&gt; f (RawFace w s f))
-&gt; ((f -&gt; f f) -&gt; FaceData (Dart s) f -&gt; f (FaceData (Dart s) f))
-&gt; (f -&gt; f f)
-&gt; RawFace w s f
-&gt; f (RawFace w s f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">(f -&gt; f f) -&gt; FaceData (Dart s) f -&gt; f (FaceData (Dart s) f)
forall h f1 f' (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 -&gt; f2 f') -&gt; FaceData h f1 -&gt; f2 (FaceData h f')
</span><a href="Hiraffe.PlanarGraph.Component.html#fData"><span class="hs-identifier hs-var">fData</span></a></span><span>
</span><span id="line-213"></span><span>  </span><span id="local-6989586621679250936"><span class="annot"><span class="annottext">numFaces :: PlanarGraph w s v e f -&gt; Int
</span><a href="#local-6989586621679250936"><span class="hs-identifier hs-var hs-var hs-var">numFaces</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (RawFace w s f) -&gt; Int
forall a. NonEmptyVector a -&gt; Int
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.html#length"><span class="hs-identifier hs-var">NonEmptyV.length</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (RawFace w s f) -&gt; Int)
-&gt; (PlanarGraph w s v e f -&gt; NonEmptyVector (RawFace w s f))
-&gt; PlanarGraph w s v e f
-&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f -&gt; NonEmptyVector (RawFace w s f)
forall k (w :: World) (s :: k) v e f.
PlanarGraph w s v e f -&gt; NonEmptyVector (RawFace w s f)
</span><a href="Hiraffe.PlanarGraph.Type.html#_rawFaceData"><span class="hs-identifier hs-var">_rawFaceData</span></a></span><span>
</span><span id="line-214"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#numFaces"><span class="hs-pragma hs-type">numFaces</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679250070"><span id="local-6989586621679250071"><span id="local-6989586621679250072"><span id="local-6989586621679250073"><span id="local-6989586621679250074"><span id="local-6989586621679250075"><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#HasFaces"><span class="hs-identifier hs-type">HasFaces</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250070"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250071"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250072"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250073"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250074"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250070"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250071"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250072"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250073"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250075"><span class="hs-identifier hs-type">f'</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-217"></span><span>  </span><span id="local-6989586621679250958"><span class="annot"><span class="annottext">faces :: IndexedTraversal1
  (FaceIx (PlanarGraph w s v e f))
  (PlanarGraph w s v e f)
  (PlanarGraph w s v e f')
  (Face (PlanarGraph w s v e f))
  (Face (PlanarGraph w s v e f'))
</span><a href="#local-6989586621679250958"><span class="hs-identifier hs-var hs-var hs-var">faces</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; FaceId s)
-&gt; (Indexed
      Int
      (Face (PlanarGraph w s v e f))
      (f (Face (PlanarGraph w s v e f')))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f'))
-&gt; p (Face (PlanarGraph w s v e f))
     (f (Face (PlanarGraph w s v e f')))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f')
forall j (p :: * -&gt; * -&gt; *) i a b r.
Indexable j p =&gt;
(i -&gt; j) -&gt; (Indexed i a b -&gt; r) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#reindexed"><span class="hs-identifier hs-var">reindexed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; FaceId s
Int -&gt; FaceIx (PlanarGraph w s v e f)
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#FaceIx"><span class="hs-identifier hs-type">FaceIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250070"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250071"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250072"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250073"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250074"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>        </span><span class="annot"><span class="annottext">((Indexed
    Int
    (Face (PlanarGraph w s v e f))
    (f (Face (PlanarGraph w s v e f')))
  -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f'))
 -&gt; p (Face (PlanarGraph w s v e f))
      (f (Face (PlanarGraph w s v e f')))
 -&gt; PlanarGraph w s v e f
 -&gt; f (PlanarGraph w s v e f'))
-&gt; (Indexed
      Int
      (Face (PlanarGraph w s v e f))
      (f (Face (PlanarGraph w s v e f')))
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f'))
-&gt; p (Face (PlanarGraph w s v e f))
     (f (Face (PlanarGraph w s v e f')))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f')
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (RawFace w s f)
 -&gt; f (NonEmptyVector (RawFace w s f')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f')
forall {k} (w :: World) (s :: k) v e f f' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (RawFace w s f)
 -&gt; f (NonEmptyVector (RawFace w s f')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f')
</span><a href="Hiraffe.PlanarGraph.Type.html#rawFaceData"><span class="hs-identifier hs-var">rawFaceData</span></a></span><span> </span><span class="annot"><span class="annottext">((NonEmptyVector (RawFace w s f)
  -&gt; f (NonEmptyVector (RawFace w s f')))
 -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f'))
-&gt; (Indexed
      Int
      (Face (PlanarGraph w s v e f))
      (f (Face (PlanarGraph w s v e f')))
    -&gt; NonEmptyVector (RawFace w s f)
    -&gt; f (NonEmptyVector (RawFace w s f')))
-&gt; Indexed
     Int
     (Face (PlanarGraph w s v e f))
     (f (Face (PlanarGraph w s v e f')))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f')
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Indexed Int (RawFace w s f) (f (RawFace w s f'))
-&gt; NonEmptyVector (RawFace w s f)
-&gt; f (NonEmptyVector (RawFace w s f'))
forall (f :: * -&gt; *) a b.
Traversable1 f =&gt;
IndexedTraversal1 Int (f a) (f b) a b
IndexedTraversal1
  Int
  (NonEmptyVector (RawFace w s f))
  (NonEmptyVector (RawFace w s f'))
  (RawFace w s f)
  (RawFace w s f')
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Traversal.html#traversed1"><span class="hs-identifier hs-var">traversed1</span></a></span><span> </span><span class="annot"><span class="annottext">(Indexed Int (RawFace w s f) (f (RawFace w s f'))
 -&gt; NonEmptyVector (RawFace w s f)
 -&gt; f (NonEmptyVector (RawFace w s f')))
-&gt; ((f -&gt; f f') -&gt; RawFace w s f -&gt; f (RawFace w s f'))
-&gt; Indexed Int f (f f')
-&gt; NonEmptyVector (RawFace w s f)
-&gt; f (NonEmptyVector (RawFace w s f'))
forall i (p :: * -&gt; * -&gt; *) s t r a b.
Indexable i p =&gt;
(Indexed i s t -&gt; r) -&gt; ((a -&gt; b) -&gt; s -&gt; t) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#%3C."><span class="hs-operator hs-var">&lt;.</span></a></span><span> </span><span class="annot"><span class="annottext">(FaceData (Dart s) f -&gt; f (FaceData (Dart s) f'))
-&gt; RawFace w s f -&gt; f (RawFace w s f')
forall {k} (w :: World) (s :: k) f1 f' (f2 :: * -&gt; *).
Functor f2 =&gt;
(FaceData (Dart s) f1 -&gt; f2 (FaceData (Dart s) f'))
-&gt; RawFace w s f1 -&gt; f2 (RawFace w s f')
</span><a href="Hiraffe.PlanarGraph.Component.html#faceDataVal"><span class="hs-identifier hs-var">faceDataVal</span></a></span><span class="annot"><span class="annottext">((FaceData (Dart s) f -&gt; f (FaceData (Dart s) f'))
 -&gt; RawFace w s f -&gt; f (RawFace w s f'))
-&gt; ((f -&gt; f f') -&gt; FaceData (Dart s) f -&gt; f (FaceData (Dart s) f'))
-&gt; (f -&gt; f f')
-&gt; RawFace w s f
-&gt; f (RawFace w s f')
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">(f -&gt; f f') -&gt; FaceData (Dart s) f -&gt; f (FaceData (Dart s) f')
forall h f1 f' (f2 :: * -&gt; *).
Functor f2 =&gt;
(f1 -&gt; f2 f') -&gt; FaceData h f1 -&gt; f2 (FaceData h f')
</span><a href="Hiraffe.PlanarGraph.Component.html#fData"><span class="hs-identifier hs-var">fData</span></a></span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span class="hs-comment">----------------------------------------</span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679250089"><span id="local-6989586621679250090"><span id="local-6989586621679250091"><span id="local-6989586621679250092"><span id="local-6989586621679250093"><span class="annot"><a href="Hiraffe.Graph.Component.html#HasConnectedComponents%27"><span class="hs-identifier hs-type">HasConnectedComponents'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250089"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250090"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250091"><span class="hs-identifier hs-type">vertex</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250092"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250093"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-223"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="ConnectedComponentIx"><span class="annot"><a href="Hiraffe.Graph.Component.html#ConnectedComponentIx"><span class="hs-identifier hs-var">ConnectedComponentIx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250089"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250090"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250091"><span class="hs-identifier hs-type">vertex</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250092"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250093"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#ComponentId"><span class="hs-identifier hs-type">ComponentId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250090"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-224"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="ConnectedComponent"><span class="annot"><a href="Hiraffe.Graph.Component.html#ConnectedComponent"><span class="hs-identifier hs-var">ConnectedComponent</span></a></span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250089"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250090"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250091"><span class="hs-identifier hs-type">vertex</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250092"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250093"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250089"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250090"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-225"></span><span>  </span><span id="local-6989586621679250971"><span class="annot"><span class="annottext">connectedComponentAt :: ConnectedComponentIx (PlanarGraph w s vertex e f)
-&gt; IndexedTraversal'
     (ConnectedComponentIx (PlanarGraph w s vertex e f))
     (PlanarGraph w s vertex e f)
     (ConnectedComponent (PlanarGraph w s vertex e f))
</span><a href="#local-6989586621679250971"><span class="hs-identifier hs-var hs-var hs-var">connectedComponentAt</span></a></span></span><span> </span><span id="local-6989586621679250973"><span class="annot"><span class="annottext">ConnectedComponentIx (PlanarGraph w s vertex e f)
</span><a href="#local-6989586621679250973"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (Component w s)
 -&gt; f (NonEmptyVector (Component w s)))
-&gt; PlanarGraph w s vertex e f -&gt; f (PlanarGraph w s vertex e f)
forall {k} (w :: World) (s :: k) v e f (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Component w s)
 -&gt; f (NonEmptyVector (Component w s)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
</span><a href="Hiraffe.PlanarGraph.Type.html#components"><span class="hs-identifier hs-var">components</span></a></span><span> </span><span class="annot"><span class="annottext">((NonEmptyVector (Component w s)
  -&gt; f (NonEmptyVector (Component w s)))
 -&gt; PlanarGraph w s vertex e f -&gt; f (PlanarGraph w s vertex e f))
-&gt; (p (Component w s) (f (Component w s))
    -&gt; NonEmptyVector (Component w s)
    -&gt; f (NonEmptyVector (Component w s)))
-&gt; p (Component w s) (f (Component w s))
-&gt; PlanarGraph w s vertex e f
-&gt; f (PlanarGraph w s vertex e f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentId s
-&gt; IndexedTraversal'
     (ComponentId s) (NonEmptyVector (Component w s)) (Component w s)
</span><a href="#local-6989586621679250974"><span class="hs-identifier hs-var">iix'</span></a></span><span> </span><span class="annot"><span class="annottext">ConnectedComponentIx (PlanarGraph w s vertex e f)
ComponentId s
</span><a href="#local-6989586621679250973"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-226"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-227"></span><span>      </span><span class="annot"><a href="#local-6989586621679250974"><span class="hs-identifier hs-type">iix'</span></a></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#ComponentId"><span class="hs-identifier hs-type">ComponentId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250090"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-228"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Type.html#IndexedTraversal%27"><span class="hs-identifier hs-type">IndexedTraversal'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#ComponentId"><span class="hs-identifier hs-type">ComponentId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250090"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span>                                  </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250089"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250090"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#Component"><span class="hs-identifier hs-type">Component</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250089"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250090"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span>      </span><span id="local-6989586621679250974"><span class="annot"><span class="annottext">iix' :: ComponentId s
-&gt; IndexedTraversal'
     (ComponentId s) (NonEmptyVector (Component w s)) (Component w s)
</span><a href="#local-6989586621679250974"><span class="hs-identifier hs-var hs-var">iix'</span></a></span></span><span> </span><span id="local-6989586621679250984"><span class="annot"><span class="annottext">ComponentId s
</span><a href="#local-6989586621679250984"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; ComponentId s)
-&gt; (Indexed Int (Component w s) (f (Component w s))
    -&gt; NonEmptyVector (Component w s)
    -&gt; f (NonEmptyVector (Component w s)))
-&gt; p (Component w s) (f (Component w s))
-&gt; NonEmptyVector (Component w s)
-&gt; f (NonEmptyVector (Component w s))
forall j (p :: * -&gt; * -&gt; *) i a b r.
Indexable j p =&gt;
(i -&gt; j) -&gt; (Indexed i a b -&gt; r) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#reindexed"><span class="hs-identifier hs-var">reindexed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; ComponentId s
forall k (s :: k). Int -&gt; ComponentId s
</span><a href="Hiraffe.PlanarGraph.Component.html#ComponentId"><span class="hs-identifier hs-var">ComponentId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#ComponentId"><span class="hs-identifier hs-type">ComponentId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250090"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Indexed Int (Component w s) (f (Component w s))
  -&gt; NonEmptyVector (Component w s)
  -&gt; f (NonEmptyVector (Component w s)))
 -&gt; p (Component w s) (f (Component w s))
 -&gt; NonEmptyVector (Component w s)
 -&gt; f (NonEmptyVector (Component w s)))
-&gt; (Indexed Int (Component w s) (f (Component w s))
    -&gt; NonEmptyVector (Component w s)
    -&gt; f (NonEmptyVector (Component w s)))
-&gt; p (Component w s) (f (Component w s))
-&gt; NonEmptyVector (Component w s)
-&gt; f (NonEmptyVector (Component w s))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Index (NonEmptyVector (Component w s))
-&gt; IndexedTraversal'
     (Index (NonEmptyVector (Component w s)))
     (NonEmptyVector (Component w s))
     (IxValue (NonEmptyVector (Component w s)))
forall m.
Ixed m =&gt;
Index m -&gt; IndexedTraversal' (Index m) m (IxValue m)
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.At.html#iix"><span class="hs-identifier hs-var">iix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s -&gt; Int
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">ComponentId s
</span><a href="#local-6989586621679250984"><span class="hs-identifier hs-var">j</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span>  </span><span id="local-6989586621679250989"><span class="annot"><span class="annottext">numConnectedComponents :: PlanarGraph w s vertex e f -&gt; Int
</span><a href="#local-6989586621679250989"><span class="hs-identifier hs-var hs-var hs-var">numConnectedComponents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Component w s) -&gt; Int
forall a. NonEmptyVector a -&gt; Int
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.html#length"><span class="hs-identifier hs-var">NonEmptyV.length</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (Component w s) -&gt; Int)
-&gt; (PlanarGraph w s vertex e f -&gt; NonEmptyVector (Component w s))
-&gt; PlanarGraph w s vertex e f
-&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Getting
  (NonEmptyVector (Component w s))
  (PlanarGraph w s vertex e f)
  (NonEmptyVector (Component w s))
-&gt; PlanarGraph w s vertex e f -&gt; NonEmptyVector (Component w s)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Getter.html#view"><span class="hs-identifier hs-var">view</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (NonEmptyVector (Component w s))
  (PlanarGraph w s vertex e f)
  (NonEmptyVector (Component w s))
forall {k} (w :: World) (s :: k) v e f (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Component w s)
 -&gt; f (NonEmptyVector (Component w s)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
</span><a href="Hiraffe.PlanarGraph.Type.html#components"><span class="hs-identifier hs-var">components</span></a></span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679250115"><span id="local-6989586621679250116"><span id="local-6989586621679250117"><span id="local-6989586621679250118"><span id="local-6989586621679250119"><span class="annot"><a href="Hiraffe.Graph.Component.html#HasConnectedComponents"><span class="hs-identifier hs-type">HasConnectedComponents</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250115"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250116"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250117"><span class="hs-identifier hs-type">vertex</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250118"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250119"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span>                                </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250115"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250116"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250117"><span class="hs-identifier hs-type">vertex</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250118"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250119"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-236"></span><span>  </span><span id="local-6989586621679251007"><span class="annot"><span class="annottext">connectedComponents :: IndexedTraversal1
  (ConnectedComponentIx (PlanarGraph w s vertex e f))
  (PlanarGraph w s vertex e f)
  (PlanarGraph w s vertex e f)
  (ConnectedComponent (PlanarGraph w s vertex e f))
  (ConnectedComponent (PlanarGraph w s vertex e f))
</span><a href="#local-6989586621679251007"><span class="hs-identifier hs-var hs-var hs-var">connectedComponents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector (Component w s)
 -&gt; f (NonEmptyVector (Component w s)))
-&gt; PlanarGraph w s vertex e f -&gt; f (PlanarGraph w s vertex e f)
forall {k} (w :: World) (s :: k) v e f (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (Component w s)
 -&gt; f (NonEmptyVector (Component w s)))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
</span><a href="Hiraffe.PlanarGraph.Type.html#components"><span class="hs-identifier hs-var">components</span></a></span><span> </span><span class="annot"><span class="annottext">((NonEmptyVector (Component w s)
  -&gt; f (NonEmptyVector (Component w s)))
 -&gt; PlanarGraph w s vertex e f -&gt; f (PlanarGraph w s vertex e f))
-&gt; (p (Component w s) (f (Component w s))
    -&gt; NonEmptyVector (Component w s)
    -&gt; f (NonEmptyVector (Component w s)))
-&gt; p (Component w s) (f (Component w s))
-&gt; PlanarGraph w s vertex e f
-&gt; f (PlanarGraph w s vertex e f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a></span><span>
</span><span id="line-237"></span><span>                        </span><span class="annot"><span class="annottext">(Int -&gt; ComponentId s)
-&gt; (Indexed Int (Component w s) (f (Component w s))
    -&gt; NonEmptyVector (Component w s)
    -&gt; f (NonEmptyVector (Component w s)))
-&gt; p (Component w s) (f (Component w s))
-&gt; NonEmptyVector (Component w s)
-&gt; f (NonEmptyVector (Component w s))
forall j (p :: * -&gt; * -&gt; *) i a b r.
Indexable j p =&gt;
(i -&gt; j) -&gt; (Indexed i a b -&gt; r) -&gt; p a b -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Indexed.html#reindexed"><span class="hs-identifier hs-var">reindexed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; ComponentId s
forall k (s :: k). Int -&gt; ComponentId s
</span><a href="Hiraffe.PlanarGraph.Component.html#ComponentId"><span class="hs-identifier hs-var">ComponentId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#ComponentId"><span class="hs-identifier hs-type">ComponentId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250116"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Indexed Int (Component w s) (f (Component w s))
-&gt; NonEmptyVector (Component w s)
-&gt; f (NonEmptyVector (Component w s))
forall (f :: * -&gt; *) a b.
Traversable1 f =&gt;
IndexedTraversal1 Int (f a) (f b) a b
IndexedTraversal1
  Int
  (NonEmptyVector (Component w s))
  (NonEmptyVector (Component w s))
  (Component w s)
  (Component w s)
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Traversal.html#traversed1"><span class="hs-identifier hs-var">traversed1</span></a></span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-241"></span><span>
</span><span id="line-242"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679250131"><span id="local-6989586621679250132"><span id="local-6989586621679250133"><span id="local-6989586621679250134"><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#HasInnerComponents"><span class="hs-identifier hs-type">HasInnerComponents</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.World.html#Primal"><span class="hs-identifier hs-type">Primal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250131"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250132"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250133"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250134"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-243"></span><span>  </span><span id="local-6989586621679251040"><span class="annot"><span class="annottext">innerComponentsAt :: FaceIx (PlanarGraph 'Primal s v e f)
-&gt; IndexedFold
     (DartIx (PlanarGraph 'Primal s v e f))
     (PlanarGraph 'Primal s v e f)
     (Dart (PlanarGraph 'Primal s v e f))
</span><a href="#local-6989586621679251040"><span class="hs-identifier hs-var hs-var hs-var">innerComponentsAt</span></a></span></span><span> </span><span id="local-6989586621679251042"><span class="annot"><span class="annottext">FaceIx (PlanarGraph 'Primal s v e f)
</span><a href="#local-6989586621679251042"><span class="hs-identifier hs-var">fi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph 'Primal s v e f
 -&gt; Seq (Dart s, Dart (PlanarGraph 'Primal s v e f)))
-&gt; Over
     p
     f
     (PlanarGraph 'Primal s v e f)
     (PlanarGraph 'Primal s v e f)
     (Dart (PlanarGraph 'Primal s v e f))
     (Dart (PlanarGraph 'Primal s v e f))
forall (f :: * -&gt; *) i (p :: * -&gt; * -&gt; *) (g :: * -&gt; *) s a t b.
(Foldable f, Indexable i p, Contravariant g, Applicative g) =&gt;
(s -&gt; f (i, a)) -&gt; Over p g s t a b
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#ifolding"><span class="hs-identifier hs-var">ifolding</span></a></span><span> </span><span class="annot"><span class="annottext">((PlanarGraph 'Primal s v e f
  -&gt; Seq (Dart s, Dart (PlanarGraph 'Primal s v e f)))
 -&gt; Over
      p
      f
      (PlanarGraph 'Primal s v e f)
      (PlanarGraph 'Primal s v e f)
      (Dart (PlanarGraph 'Primal s v e f))
      (Dart (PlanarGraph 'Primal s v e f)))
-&gt; (PlanarGraph 'Primal s v e f
    -&gt; Seq (Dart s, Dart (PlanarGraph 'Primal s v e f)))
-&gt; Over
     p
     f
     (PlanarGraph 'Primal s v e f)
     (PlanarGraph 'Primal s v e f)
     (Dart (PlanarGraph 'Primal s v e f))
     (Dart (PlanarGraph 'Primal s v e f))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679251044"><span class="annot"><span class="annottext">PlanarGraph 'Primal s v e f
</span><a href="#local-6989586621679251044"><span class="hs-identifier hs-var">gr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-244"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679251045"><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679251045"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679251045"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">PlanarGraph 'Primal s v e f
</span><a href="#local-6989586621679251044"><span class="hs-identifier hs-var">gr</span></a></span><span class="annot"><span class="annottext">PlanarGraph 'Primal s v e f
-&gt; Getting (Endo e) (PlanarGraph 'Primal s v e f) e -&gt; e
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">DartIx (PlanarGraph 'Primal s v e f)
-&gt; IndexedTraversal'
     (DartIx (PlanarGraph 'Primal s v e f))
     (PlanarGraph 'Primal s v e f)
     (Dart (PlanarGraph 'Primal s v e f))
forall graph.
HasDarts' graph =&gt;
DartIx graph -&gt; IndexedTraversal' (DartIx graph) graph (Dart graph)
</span><a href="Hiraffe.Graph.Class.html#dartAt"><span class="hs-identifier hs-var">dartAt</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph 'Primal s v e f)
Dart s
</span><a href="#local-6989586621679251045"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Dart s -&gt; (Dart s, e)) -&gt; Seq (Dart s) -&gt; Seq (Dart s, e)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PlanarGraph 'Primal s v e f
</span><a href="#local-6989586621679251044"><span class="hs-identifier hs-var">gr</span></a></span><span class="annot"><span class="annottext">PlanarGraph 'Primal s v e f
-&gt; Getting
     (Endo (Seq (Dart s))) (PlanarGraph 'Primal s v e f) (Seq (Dart s))
-&gt; Seq (Dart s)
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">(NonEmptyVector (RawFace 'Primal s f)
 -&gt; Const
      (Endo (Seq (Dart s))) (NonEmptyVector (RawFace 'Primal s f)))
-&gt; PlanarGraph 'Primal s v e f
-&gt; Const (Endo (Seq (Dart s))) (PlanarGraph 'Primal s v e f)
forall {k} (w :: World) (s :: k) v e f f' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (RawFace w s f)
 -&gt; f (NonEmptyVector (RawFace w s f')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f')
</span><a href="Hiraffe.PlanarGraph.Type.html#rawFaceData"><span class="hs-identifier hs-var">rawFaceData</span></a></span><span class="annot"><span class="annottext">((NonEmptyVector (RawFace 'Primal s f)
  -&gt; Const
       (Endo (Seq (Dart s))) (NonEmptyVector (RawFace 'Primal s f)))
 -&gt; PlanarGraph 'Primal s v e f
 -&gt; Const (Endo (Seq (Dart s))) (PlanarGraph 'Primal s v e f))
-&gt; ((Seq (Dart s) -&gt; Const (Endo (Seq (Dart s))) (Seq (Dart s)))
    -&gt; NonEmptyVector (RawFace 'Primal s f)
    -&gt; Const
         (Endo (Seq (Dart s))) (NonEmptyVector (RawFace 'Primal s f)))
-&gt; Getting
     (Endo (Seq (Dart s))) (PlanarGraph 'Primal s v e f) (Seq (Dart s))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">Index (NonEmptyVector (RawFace 'Primal s f))
-&gt; Traversal'
     (NonEmptyVector (RawFace 'Primal s f))
     (IxValue (NonEmptyVector (RawFace 'Primal s f)))
forall m. Ixed m =&gt; Index m -&gt; Traversal' m (IxValue m)
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.At.html#ix"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FaceId s -&gt; Int
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">FaceId s
FaceIx (PlanarGraph 'Primal s v e f)
</span><a href="#local-6989586621679251042"><span class="hs-identifier hs-var">fi</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">((RawFace 'Primal s f
  -&gt; Const (Endo (Seq (Dart s))) (RawFace 'Primal s f))
 -&gt; NonEmptyVector (RawFace 'Primal s f)
 -&gt; Const
      (Endo (Seq (Dart s))) (NonEmptyVector (RawFace 'Primal s f)))
-&gt; ((Seq (Dart s) -&gt; Const (Endo (Seq (Dart s))) (Seq (Dart s)))
    -&gt; RawFace 'Primal s f
    -&gt; Const (Endo (Seq (Dart s))) (RawFace 'Primal s f))
-&gt; (Seq (Dart s) -&gt; Const (Endo (Seq (Dart s))) (Seq (Dart s)))
-&gt; NonEmptyVector (RawFace 'Primal s f)
-&gt; Const
     (Endo (Seq (Dart s))) (NonEmptyVector (RawFace 'Primal s f))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">(FaceData (Dart s) f
 -&gt; Const (Endo (Seq (Dart s))) (FaceData (Dart s) f))
-&gt; RawFace 'Primal s f
-&gt; Const (Endo (Seq (Dart s))) (RawFace 'Primal s f)
forall {k} (w :: World) (s :: k) f1 f' (f2 :: * -&gt; *).
Functor f2 =&gt;
(FaceData (Dart s) f1 -&gt; f2 (FaceData (Dart s) f'))
-&gt; RawFace w s f1 -&gt; f2 (RawFace w s f')
</span><a href="Hiraffe.PlanarGraph.Component.html#faceDataVal"><span class="hs-identifier hs-var">faceDataVal</span></a></span><span class="annot"><span class="annottext">((FaceData (Dart s) f
  -&gt; Const (Endo (Seq (Dart s))) (FaceData (Dart s) f))
 -&gt; RawFace 'Primal s f
 -&gt; Const (Endo (Seq (Dart s))) (RawFace 'Primal s f))
-&gt; ((Seq (Dart s) -&gt; Const (Endo (Seq (Dart s))) (Seq (Dart s)))
    -&gt; FaceData (Dart s) f
    -&gt; Const (Endo (Seq (Dart s))) (FaceData (Dart s) f))
-&gt; (Seq (Dart s) -&gt; Const (Endo (Seq (Dart s))) (Seq (Dart s)))
-&gt; RawFace 'Primal s f
-&gt; Const (Endo (Seq (Dart s))) (RawFace 'Primal s f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">(Seq (Dart s) -&gt; Const (Endo (Seq (Dart s))) (Seq (Dart s)))
-&gt; FaceData (Dart s) f
-&gt; Const (Endo (Seq (Dart s))) (FaceData (Dart s) f)
forall h f1 h' (f2 :: * -&gt; *).
Functor f2 =&gt;
(Seq h -&gt; f2 (Seq h')) -&gt; FaceData h f1 -&gt; f2 (FaceData h' f1)
</span><a href="Hiraffe.PlanarGraph.Component.html#holes"><span class="hs-identifier hs-var">holes</span></a></span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679250167"><span id="local-6989586621679250168"><span id="local-6989586621679250169"><span id="local-6989586621679250170"><span id="local-6989586621679250171"><span id="local-6989586621679251051"><span id="local-6989586621679251063"><span id="local-6989586621679251075"><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#HasOuterFace"><span class="hs-identifier hs-type">HasOuterFace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250167"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250168"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250169"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250170"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250171"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-249"></span><span>  </span><span id="local-6989586621679251079"><span class="annot"><span class="annottext">outerFaceId :: PlanarGraph w s v e f -&gt; FaceIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251079"><span class="hs-identifier hs-var hs-var hs-var">outerFaceId</span></a></span></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. Coercible a b =&gt; a -&gt; b
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#FaceId"><span class="hs-identifier hs-type">FaceId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250168"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679250183"><span id="local-6989586621679250184"><span id="local-6989586621679250185"><span id="local-6989586621679250186"><span id="local-6989586621679250187"><span id="local-6989586621679251088"><span id="local-6989586621679251092"><span id="local-6989586621679251095"><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#HasOuterBoundaryOf"><span class="hs-identifier hs-type">HasOuterBoundaryOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250183"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250184"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250185"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250186"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250187"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-252"></span><span>  </span><span id="local-6989586621679251126"><span class="annot"><span class="annottext">outerBoundaryDarts :: FaceIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; NonEmptyVector (DartIx (PlanarGraph w s v e f))
</span><a href="#local-6989586621679251126"><span class="hs-identifier hs-var hs-var hs-var">outerBoundaryDarts</span></a></span></span><span> </span><span id="local-6989586621679251128"><span class="annot"><span class="annottext">FaceIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251128"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679251129"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251129"><span class="hs-identifier hs-var">gr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251129"><span class="hs-identifier hs-var">gr</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting
     (Endo (Maybe (ComponentId s, FaceIdIn w (Wrap s))))
     (PlanarGraph w s v e f)
     (Maybe (ComponentId s, FaceIdIn w (Wrap s)))
-&gt; Maybe (ComponentId s, FaceIdIn w (Wrap s))
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">(NonEmptyVector (RawFace w s f)
 -&gt; Const
      (Endo (Maybe (ComponentId s, FaceIdIn w (Wrap s))))
      (NonEmptyVector (RawFace w s f)))
-&gt; PlanarGraph w s v e f
-&gt; Const
     (Endo (Maybe (ComponentId s, FaceIdIn w (Wrap s))))
     (PlanarGraph w s v e f)
forall {k} (w :: World) (s :: k) v e f f' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (RawFace w s f)
 -&gt; f (NonEmptyVector (RawFace w s f')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f')
</span><a href="Hiraffe.PlanarGraph.Type.html#rawFaceData"><span class="hs-identifier hs-var">rawFaceData</span></a></span><span class="annot"><span class="annottext">((NonEmptyVector (RawFace w s f)
  -&gt; Const
       (Endo (Maybe (ComponentId s, FaceIdIn w (Wrap s))))
       (NonEmptyVector (RawFace w s f)))
 -&gt; PlanarGraph w s v e f
 -&gt; Const
      (Endo (Maybe (ComponentId s, FaceIdIn w (Wrap s))))
      (PlanarGraph w s v e f))
-&gt; ((Maybe (ComponentId s, FaceIdIn w (Wrap s))
     -&gt; Const
          (Endo (Maybe (ComponentId s, FaceIdIn w (Wrap s))))
          (Maybe (ComponentId s, FaceIdIn w (Wrap s))))
    -&gt; NonEmptyVector (RawFace w s f)
    -&gt; Const
         (Endo (Maybe (ComponentId s, FaceIdIn w (Wrap s))))
         (NonEmptyVector (RawFace w s f)))
-&gt; Getting
     (Endo (Maybe (ComponentId s, FaceIdIn w (Wrap s))))
     (PlanarGraph w s v e f)
     (Maybe (ComponentId s, FaceIdIn w (Wrap s)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">Index (NonEmptyVector (RawFace w s f))
-&gt; Traversal'
     (NonEmptyVector (RawFace w s f))
     (IxValue (NonEmptyVector (RawFace w s f)))
forall m. Ixed m =&gt; Index m -&gt; Traversal' m (IxValue m)
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.At.html#ix"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FaceId s -&gt; Int
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">FaceId s
FaceIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251128"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">((RawFace w s f
  -&gt; Const
       (Endo (Maybe (ComponentId s, FaceIdIn w (Wrap s))))
       (RawFace w s f))
 -&gt; NonEmptyVector (RawFace w s f)
 -&gt; Const
      (Endo (Maybe (ComponentId s, FaceIdIn w (Wrap s))))
      (NonEmptyVector (RawFace w s f)))
-&gt; ((Maybe (ComponentId s, FaceIdIn w (Wrap s))
     -&gt; Const
          (Endo (Maybe (ComponentId s, FaceIdIn w (Wrap s))))
          (Maybe (ComponentId s, FaceIdIn w (Wrap s))))
    -&gt; RawFace w s f
    -&gt; Const
         (Endo (Maybe (ComponentId s, FaceIdIn w (Wrap s))))
         (RawFace w s f))
-&gt; (Maybe (ComponentId s, FaceIdIn w (Wrap s))
    -&gt; Const
         (Endo (Maybe (ComponentId s, FaceIdIn w (Wrap s))))
         (Maybe (ComponentId s, FaceIdIn w (Wrap s))))
-&gt; NonEmptyVector (RawFace w s f)
-&gt; Const
     (Endo (Maybe (ComponentId s, FaceIdIn w (Wrap s))))
     (NonEmptyVector (RawFace w s f))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">(Maybe (ComponentId s, FaceIdIn w (Wrap s))
 -&gt; Const
      (Endo (Maybe (ComponentId s, FaceIdIn w (Wrap s))))
      (Maybe (ComponentId s, FaceIdIn w (Wrap s))))
-&gt; RawFace w s f
-&gt; Const
     (Endo (Maybe (ComponentId s, FaceIdIn w (Wrap s)))) (RawFace w s f)
forall {k} (w :: World) (s :: k) f1 (f2 :: * -&gt; *).
Functor f2 =&gt;
(Maybe (ComponentId s, FaceIdIn w (Wrap s))
 -&gt; f2 (Maybe (ComponentId s, FaceIdIn w (Wrap s))))
-&gt; RawFace w s f1 -&gt; f2 (RawFace w s f1)
</span><a href="Hiraffe.PlanarGraph.Component.html#faceIdx"><span class="hs-identifier hs-var">faceIdx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-253"></span><span>    </span><span class="annot"><span class="annottext">Maybe (ComponentId s, FaceIdIn w (Wrap s))
</span><span class="hs-identifier hs-var">Nothing</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; NonEmptyVector (Dart s)
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;outerBoundarydarts: precondition failed; called on the outer face&quot;</span></span><span>
</span><span id="line-254"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679251132"><span class="annot"><span class="annottext">ComponentId s
</span><a href="#local-6989586621679251132"><span class="hs-identifier hs-var">ci</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679251133"><span class="annot"><span class="annottext">FaceIdIn w (Wrap s)
</span><a href="#local-6989586621679251133"><span class="hs-identifier hs-var">f'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679251134"><span class="annot"><span class="annottext">c :: Component w s
</span><a href="#local-6989586621679251134"><span class="hs-identifier hs-var hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251129"><span class="hs-identifier hs-var">gr</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting
     (Endo (Component w s)) (PlanarGraph w s v e f) (Component w s)
-&gt; Component w s
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">ConnectedComponentIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (ConnectedComponentIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (ConnectedComponent (PlanarGraph w s v e f))
forall graph.
HasConnectedComponents' graph =&gt;
ConnectedComponentIx graph
-&gt; IndexedTraversal'
     (ConnectedComponentIx graph) graph (ConnectedComponent graph)
</span><a href="Hiraffe.Graph.Component.html#connectedComponentAt"><span class="hs-identifier hs-var">connectedComponentAt</span></a></span><span> </span><span class="annot"><span class="annottext">ConnectedComponentIx (PlanarGraph w s v e f)
ComponentId s
</span><a href="#local-6989586621679251132"><span class="hs-identifier hs-var">ci</span></a></span><span>
</span><span id="line-255"></span><span>                    </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679251135"><span class="annot"><span class="annottext">Dart (Wrap s)
</span><a href="#local-6989586621679251135"><span class="hs-identifier hs-var">d'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251134"><span class="hs-identifier hs-var">c</span></a></span><span class="annot"><span class="annottext">Component w s
-&gt; Getting (Endo (Dart s)) (Component w s) (Dart s) -&gt; Dart s
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">DartIx (Component w s)
-&gt; IndexedTraversal'
     (DartIx (Component w s)) (Component w s) (Dart (Component w s))
forall graph.
HasDarts' graph =&gt;
DartIx graph -&gt; IndexedTraversal' (DartIx graph) graph (Dart graph)
</span><a href="Hiraffe.Graph.Class.html#dartAt"><span class="hs-identifier hs-var">dartAt</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (Component w s)
Dart (Wrap s)
</span><a href="#local-6989586621679251135"><span class="hs-identifier hs-var">d'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Dart (Wrap s) -&gt; Dart s)
-&gt; NonEmptyVector (Dart (Wrap s)) -&gt; NonEmptyVector (Dart s)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">FaceIx (Component w s)
-&gt; Component w s -&gt; NonEmptyVector (DartIx (Component w s))
forall planarGraph.
HasOuterBoundaryOf planarGraph =&gt;
FaceIx planarGraph
-&gt; planarGraph -&gt; NonEmptyVector (DartIx planarGraph)
</span><a href="Hiraffe.PlanarGraph.Class.html#outerBoundaryDarts"><span class="hs-identifier hs-var">outerBoundaryDarts</span></a></span><span> </span><span class="annot"><span class="annottext">FaceIdIn w (Wrap s)
FaceIx (Component w s)
</span><a href="#local-6989586621679251133"><span class="hs-identifier hs-var">f'</span></a></span><span> </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251134"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679251136"><span id="local-6989586621679251137"><span id="local-6989586621679251138"><span id="local-6989586621679251139"><span id="local-6989586621679251140"><span id="local-6989586621679251146"><span id="local-6989586621679251149"><span id="local-6989586621679251152"><span id="local-6989586621679251155"><span id="local-6989586621679251159"><span class="annot"><a href="Hiraffe.Graph.Class.html#DiGraph_"><span class="hs-identifier hs-type">DiGraph_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251136"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251137"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251138"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251139"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251140"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span>  </span><span class="hs-comment">-- the orientation between the global darts and the local darts may differ.</span><span>
</span><span id="line-262"></span><span>  </span><span class="hs-comment">-- i.e. a 'Positive' local dart may be associated with a Negative global</span><span>
</span><span id="line-263"></span><span>  </span><span class="hs-comment">-- dart</span><span>
</span><span id="line-264"></span><span>  </span><span id="local-6989586621679251187"><span class="annot"><span class="annottext">tailOf :: DartIx (PlanarGraph w s v e f)
-&gt; IndexedGetter
     (VertexIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Vertex (PlanarGraph w s v e f))
</span><a href="#local-6989586621679251187"><span class="hs-identifier hs-var hs-var hs-var">tailOf</span></a></span></span><span> </span><span id="local-6989586621679251189"><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251189"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph w s v e f
 -&gt; (VertexId s, Vertex (PlanarGraph w s v e f)))
-&gt; Over'
     p f (PlanarGraph w s v e f) (Vertex (PlanarGraph w s v e f))
forall i (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s a.
(Indexable i p, Contravariant f) =&gt;
(s -&gt; (i, a)) -&gt; Over' p f s a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Getter.html#ito"><span class="hs-identifier hs-var">ito</span></a></span><span> </span><span class="annot"><span class="annottext">((PlanarGraph w s v e f
  -&gt; (VertexId s, Vertex (PlanarGraph w s v e f)))
 -&gt; Over'
      p f (PlanarGraph w s v e f) (Vertex (PlanarGraph w s v e f)))
-&gt; (PlanarGraph w s v e f
    -&gt; (VertexId s, Vertex (PlanarGraph w s v e f)))
-&gt; Over'
     p f (PlanarGraph w s v e f) (Vertex (PlanarGraph w s v e f))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679251191"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251191"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621679251192"><span class="annot"><span class="annottext">DartIx (Component w s)
</span><a href="#local-6989586621679251192"><span class="hs-identifier hs-var">d'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679251193"><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251193"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, DartIx (Component w s), Component w s)
forall {k} (w :: World) (s :: k) v e f.
DartIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, DartIx (Component w s), Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#asLocalD"><span class="hs-identifier hs-var">asLocalD</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251189"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251191"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-265"></span><span>                              </span><span id="local-6989586621679251194"><span class="annot"><span class="annottext">vi :: VertexId s
</span><a href="#local-6989586621679251194"><span class="hs-identifier hs-var hs-var">vi</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251193"><span class="hs-identifier hs-var">c</span></a></span><span class="annot"><span class="annottext">Component w s
-&gt; Getting (VertexId s) (Component w s) (VertexId s) -&gt; VertexId s
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">DartIx (Component w s)
-&gt; IndexedGetter
     (VertexIx (Component w s)) (Component w s) (Vertex (Component w s))
forall graph.
DiGraph_ graph =&gt;
DartIx graph -&gt; IndexedGetter (VertexIx graph) graph (Vertex graph)
</span><a href="Hiraffe.Graph.Class.html#tailOf"><span class="hs-identifier hs-var">tailOf</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (Component w s)
</span><a href="#local-6989586621679251192"><span class="hs-identifier hs-var">d'</span></a></span><span>
</span><span id="line-266"></span><span>                              </span><span class="hs-comment">-- vi       = if sameDirection d d'</span><span>
</span><span id="line-267"></span><span>                              </span><span class="hs-comment">--              then c^.tailOf d' else c^.headOf d'</span><span>
</span><span id="line-268"></span><span>                          </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VertexId s
</span><a href="#local-6989586621679251194"><span class="hs-identifier hs-var">vi</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251191"><span class="hs-identifier hs-var">ps</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting (Endo v) (PlanarGraph w s v e f) v -&gt; v
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (VertexIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Vertex (PlanarGraph w s v e f))
forall graph.
HasVertices' graph =&gt;
VertexIx graph
-&gt; IndexedTraversal' (VertexIx graph) graph (Vertex graph)
</span><a href="Hiraffe.Graph.Class.html#vertexAt"><span class="hs-identifier hs-var">vertexAt</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
VertexId s
</span><a href="#local-6989586621679251194"><span class="hs-identifier hs-var">vi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-269"></span><span>    </span><span class="hs-comment">-- we look up the component c containing dart d. In this component d is actually known as d'.</span><span>
</span><span id="line-270"></span><span>    </span><span class="hs-comment">-- so we can use c^.tailOf d' to find the global index of the vertex we are looking for.</span><span>
</span><span id="line-271"></span><span>    </span><span class="hs-comment">-- we then simply look up this vertex</span><span>
</span><span id="line-272"></span><span>  </span><span id="local-6989586621679251213"><span class="annot"><span class="annottext">headOf :: DartIx (PlanarGraph w s v e f)
-&gt; IndexedGetter
     (VertexIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Vertex (PlanarGraph w s v e f))
</span><a href="#local-6989586621679251213"><span class="hs-identifier hs-var hs-var hs-var">headOf</span></a></span></span><span> </span><span id="local-6989586621679251215"><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251215"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph w s v e f
 -&gt; (VertexId s, Vertex (PlanarGraph w s v e f)))
-&gt; Over'
     p f (PlanarGraph w s v e f) (Vertex (PlanarGraph w s v e f))
forall i (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s a.
(Indexable i p, Contravariant f) =&gt;
(s -&gt; (i, a)) -&gt; Over' p f s a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Getter.html#ito"><span class="hs-identifier hs-var">ito</span></a></span><span> </span><span class="annot"><span class="annottext">((PlanarGraph w s v e f
  -&gt; (VertexId s, Vertex (PlanarGraph w s v e f)))
 -&gt; Over'
      p f (PlanarGraph w s v e f) (Vertex (PlanarGraph w s v e f)))
-&gt; (PlanarGraph w s v e f
    -&gt; (VertexId s, Vertex (PlanarGraph w s v e f)))
-&gt; Over'
     p f (PlanarGraph w s v e f) (Vertex (PlanarGraph w s v e f))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679251216"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251216"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621679251217"><span class="annot"><span class="annottext">DartIx (Component w s)
</span><a href="#local-6989586621679251217"><span class="hs-identifier hs-var">d'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679251218"><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251218"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, DartIx (Component w s), Component w s)
forall {k} (w :: World) (s :: k) v e f.
DartIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, DartIx (Component w s), Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#asLocalD"><span class="hs-identifier hs-var">asLocalD</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251215"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251216"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-273"></span><span>                              </span><span id="local-6989586621679251219"><span class="annot"><span class="annottext">vi :: VertexId s
</span><a href="#local-6989586621679251219"><span class="hs-identifier hs-var hs-var">vi</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251218"><span class="hs-identifier hs-var">c</span></a></span><span class="annot"><span class="annottext">Component w s
-&gt; Getting (VertexId s) (Component w s) (VertexId s) -&gt; VertexId s
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">DartIx (Component w s)
-&gt; IndexedGetter
     (VertexIx (Component w s)) (Component w s) (Vertex (Component w s))
forall graph.
DiGraph_ graph =&gt;
DartIx graph -&gt; IndexedGetter (VertexIx graph) graph (Vertex graph)
</span><a href="Hiraffe.Graph.Class.html#headOf"><span class="hs-identifier hs-var">headOf</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (Component w s)
</span><a href="#local-6989586621679251217"><span class="hs-identifier hs-var">d'</span></a></span><span>
</span><span id="line-274"></span><span>                              </span><span class="hs-comment">-- vi       = if sameDirection d d'</span><span>
</span><span id="line-275"></span><span>                              </span><span class="hs-comment">--            then c^.headOf d' else c^.tailOf d'</span><span>
</span><span id="line-276"></span><span>                          </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VertexId s
</span><a href="#local-6989586621679251219"><span class="hs-identifier hs-var">vi</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251216"><span class="hs-identifier hs-var">ps</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting (Endo v) (PlanarGraph w s v e f) v -&gt; v
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (VertexIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Vertex (PlanarGraph w s v e f))
forall graph.
HasVertices' graph =&gt;
VertexIx graph
-&gt; IndexedTraversal' (VertexIx graph) graph (Vertex graph)
</span><a href="Hiraffe.Graph.Class.html#vertexAt"><span class="hs-identifier hs-var">vertexAt</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
VertexId s
</span><a href="#local-6989586621679251219"><span class="hs-identifier hs-var">vi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-277"></span><span>    </span><span class="hs-comment">-- see tailOf; we use the same, except we use head rather than tail</span><span>
</span><span id="line-278"></span><span>
</span><span id="line-279"></span><span>
</span><span id="line-280"></span><span>  </span><span class="hs-comment">-- | All outgoing darts incident to vertex v, in counterclockwise order around v.</span><span>
</span><span id="line-281"></span><span>  </span><span id="local-6989586621679251230"><span class="annot"><span class="annottext">outgoingDartsOf :: VertexIx (PlanarGraph w s v e f)
-&gt; IndexedFold
     (DartIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Dart (PlanarGraph w s v e f))
</span><a href="#local-6989586621679251230"><span class="hs-identifier hs-var hs-var hs-var">outgoingDartsOf</span></a></span></span><span> </span><span id="local-6989586621679251232"><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251232"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((p ~ (-&gt;)) =&gt;
 (e -&gt; f e) -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; (p e (f e)
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; p e (f e)
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall (p :: * -&gt; * -&gt; *) (q :: * -&gt; * -&gt; *) a b r.
Conjoined p =&gt;
((p ~ (-&gt;)) =&gt; q (a -&gt; b) r) -&gt; q (p a b) r -&gt; q (p a b) r
forall (q :: * -&gt; * -&gt; *) a b r.
((p ~ (-&gt;)) =&gt; q (a -&gt; b) r) -&gt; q (p a b) r -&gt; q (p a b) r
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Internal.Indexed.html#conjoined"><span class="hs-identifier hs-var">conjoined</span></a></span><span> </span><span class="annot"><span class="annottext">(p ~ (-&gt;)) =&gt;
(e -&gt; f e) -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
(e -&gt; f e) -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
forall (h :: * -&gt; *).
(Contravariant h, Applicative h) =&gt;
(e -&gt; h e) -&gt; PlanarGraph w s v e f -&gt; h (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251234"><span class="hs-identifier hs-var">theFold</span></a></span><span> </span><span class="annot"><span class="annottext">p e (f e) -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f)
forall (p :: * -&gt; * -&gt; *) (h :: * -&gt; *).
(Contravariant h, Applicative h,
 Indexable (DartIx (PlanarGraph w s v e f)) p) =&gt;
p e (h e) -&gt; PlanarGraph w s v e f -&gt; h (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251238"><span class="hs-identifier hs-var">theiFold</span></a></span><span>
</span><span id="line-282"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-283"></span><span>      </span><span class="hs-comment">-- theFold        :: Fold (PlanarGraph w s v e f) e</span><span>
</span><span id="line-284"></span><span>      </span><span class="annot"><a href="#local-6989586621679251234"><span class="hs-identifier hs-type">theFold</span></a></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679250240"><span class="annot"><a href="#local-6989586621679250240"><span class="hs-identifier hs-type">h</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Contravariant</span></span><span> </span><span class="annot"><a href="#local-6989586621679250240"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679250240"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-285"></span><span>                     </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679251139"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679250240"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251139"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251136"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251137"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251138"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251139"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251140"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679250240"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251136"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251137"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251138"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251139"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251140"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-286"></span><span>      </span><span id="local-6989586621679251234"><span class="annot"><span class="annottext">theFold :: forall (h :: * -&gt; *).
(Contravariant h, Applicative h) =&gt;
(e -&gt; h e) -&gt; PlanarGraph w s v e f -&gt; h (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251234"><span class="hs-identifier hs-var hs-var">theFold</span></a></span></span><span> </span><span id="local-6989586621679251255"><span class="annot"><span class="annottext">e -&gt; h e
</span><a href="#local-6989586621679251255"><span class="hs-identifier hs-var">eHe</span></a></span></span><span> </span><span id="local-6989586621679251256"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251256"><span class="hs-identifier hs-var">pg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251257"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Component w s -&gt; h (Component w s) -&gt; h (PlanarGraph w s v e f)
forall b a. b -&gt; h b -&gt; h a
forall (f :: * -&gt; *) b a. Contravariant f =&gt; b -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&gt;$</span></span><span> </span><span class="annot"><span class="annottext">VertexIx (Component w s)
-&gt; IndexedFold
     (DartIx (Component w s)) (Component w s) (Dart (Component w s))
forall graph.
DiGraph_ graph =&gt;
VertexIx graph -&gt; IndexedFold (DartIx graph) graph (Dart graph)
</span><a href="Hiraffe.Graph.Class.html#outgoingDartsOf"><span class="hs-identifier hs-var">outgoingDartsOf</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (Component w s)
</span><a href="#local-6989586621679251259"><span class="hs-identifier hs-var">u'</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; h (DartIx (PlanarGraph w s v e f))
Dart (Component w s) -&gt; h (Dart (Component w s))
</span><a href="#local-6989586621679251260"><span class="hs-identifier hs-var">dHd</span></a></span><span> </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251257"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-287"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-288"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621679251259"><span class="annot"><span class="annottext">VertexIx (Component w s)
</span><a href="#local-6989586621679251259"><span class="hs-identifier hs-var">u'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679251257"><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251257"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, VertexIx (Component w s), Component w s)
forall {k} (w :: World) (s :: k) v e f.
VertexIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, VertexIx (Component w s), Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#asLocalV"><span class="hs-identifier hs-var">asLocalV</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251232"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251256"><span class="hs-identifier hs-var">pg</span></a></span><span>
</span><span id="line-289"></span><span>          </span><span class="annot"><a href="#local-6989586621679251260"><span class="hs-identifier hs-type">dHd</span></a></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251136"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251137"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251138"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251139"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251140"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679250240"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251136"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251137"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251138"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251139"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251140"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-290"></span><span>          </span><span id="local-6989586621679251260"><span class="annot"><span class="annottext">dHd :: DartIx (PlanarGraph w s v e f)
-&gt; h (DartIx (PlanarGraph w s v e f))
</span><a href="#local-6989586621679251260"><span class="hs-identifier hs-var hs-var">dHd</span></a></span></span><span> </span><span id="local-6989586621679251261"><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251261"><span class="hs-identifier hs-var">d</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679251262"><span class="annot"><span class="annottext">e :: e
</span><a href="#local-6989586621679251262"><span class="hs-identifier hs-var hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251256"><span class="hs-identifier hs-var">pg</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting (Endo e) (PlanarGraph w s v e f) e -&gt; e
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (DartIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Dart (PlanarGraph w s v e f))
forall graph.
HasDarts' graph =&gt;
DartIx graph -&gt; IndexedTraversal' (DartIx graph) graph (Dart graph)
</span><a href="Hiraffe.Graph.Class.html#dartAt"><span class="hs-identifier hs-var">dartAt</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251261"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679251262"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">e -&gt; h e -&gt; h (Dart s)
forall b a. b -&gt; h b -&gt; h a
forall (f :: * -&gt; *) b a. Contravariant f =&gt; b -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&gt;$</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; h e
</span><a href="#local-6989586621679251255"><span class="hs-identifier hs-var">eHe</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679251262"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-291"></span><span>
</span><span id="line-292"></span><span>      </span><span class="annot"><a href="#local-6989586621679251238"><span class="hs-identifier hs-type">theiFold</span></a></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679250242"><span class="annot"><a href="#local-6989586621679250242"><span class="hs-identifier hs-type">p</span></a></span></span><span> </span><span id="local-6989586621679250241"><span class="annot"><a href="#local-6989586621679250241"><span class="hs-identifier hs-type">h</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Contravariant</span></span><span> </span><span class="annot"><a href="#local-6989586621679250241"><span class="hs-identifier hs-type">h</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679250241"><span class="hs-identifier hs-type">h</span></a></span><span>
</span><span id="line-293"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Internal.Indexed.html#Indexable"><span class="hs-identifier hs-type">Indexable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251136"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251137"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251138"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251139"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251140"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679250242"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-294"></span><span>                       </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679250242"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251139"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679250241"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251139"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251136"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251137"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251138"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251139"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251140"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679250241"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251136"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251137"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251138"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251139"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251140"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-295"></span><span>      </span><span id="local-6989586621679251238"><span class="annot"><span class="annottext">theiFold :: forall (p :: * -&gt; * -&gt; *) (h :: * -&gt; *).
(Contravariant h, Applicative h,
 Indexable (DartIx (PlanarGraph w s v e f)) p) =&gt;
p e (h e) -&gt; PlanarGraph w s v e f -&gt; h (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251238"><span class="hs-identifier hs-var hs-var">theiFold</span></a></span></span><span> </span><span id="local-6989586621679251282"><span class="annot"><span class="annottext">p e (h e)
</span><a href="#local-6989586621679251282"><span class="hs-identifier hs-var">peHe</span></a></span></span><span> </span><span id="local-6989586621679251283"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251283"><span class="hs-identifier hs-var">pg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251284"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Component w s -&gt; h (Component w s) -&gt; h (PlanarGraph w s v e f)
forall b a. b -&gt; h b -&gt; h a
forall (f :: * -&gt; *) b a. Contravariant f =&gt; b -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&gt;$</span></span><span> </span><span class="annot"><span class="annottext">VertexIx (Component w s)
-&gt; IndexedFold
     (DartIx (Component w s)) (Component w s) (Dart (Component w s))
forall graph.
DiGraph_ graph =&gt;
VertexIx graph -&gt; IndexedFold (DartIx graph) graph (Dart graph)
</span><a href="Hiraffe.Graph.Class.html#outgoingDartsOf"><span class="hs-identifier hs-var">outgoingDartsOf</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (Component w s)
</span><a href="#local-6989586621679251285"><span class="hs-identifier hs-var">u'</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; h (DartIx (PlanarGraph w s v e f))
Dart (Component w s) -&gt; h (Dart (Component w s))
</span><a href="#local-6989586621679251286"><span class="hs-identifier hs-var">dHd</span></a></span><span> </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251284"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-296"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-297"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621679251285"><span class="annot"><span class="annottext">VertexIx (Component w s)
</span><a href="#local-6989586621679251285"><span class="hs-identifier hs-var">u'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679251284"><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251284"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, VertexIx (Component w s), Component w s)
forall {k} (w :: World) (s :: k) v e f.
VertexIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, VertexIx (Component w s), Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#asLocalV"><span class="hs-identifier hs-var">asLocalV</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251232"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251283"><span class="hs-identifier hs-var">pg</span></a></span><span>
</span><span id="line-298"></span><span>          </span><span class="annot"><a href="#local-6989586621679251286"><span class="hs-identifier hs-type">dHd</span></a></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251136"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251137"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251138"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251139"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251140"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679250241"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251136"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251137"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251138"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251139"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251140"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-299"></span><span>          </span><span id="local-6989586621679251286"><span class="annot"><span class="annottext">dHd :: DartIx (PlanarGraph w s v e f)
-&gt; h (DartIx (PlanarGraph w s v e f))
</span><a href="#local-6989586621679251286"><span class="hs-identifier hs-var hs-var">dHd</span></a></span></span><span> </span><span id="local-6989586621679251287"><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251287"><span class="hs-identifier hs-var">d</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679251288"><span class="annot"><span class="annottext">e :: e
</span><a href="#local-6989586621679251288"><span class="hs-identifier hs-var hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251283"><span class="hs-identifier hs-var">pg</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting (Endo e) (PlanarGraph w s v e f) e -&gt; e
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (DartIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Dart (PlanarGraph w s v e f))
forall graph.
HasDarts' graph =&gt;
DartIx graph -&gt; IndexedTraversal' (DartIx graph) graph (Dart graph)
</span><a href="Hiraffe.Graph.Class.html#dartAt"><span class="hs-identifier hs-var">dartAt</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251287"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679251288"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">e -&gt; h e -&gt; h (Dart s)
forall b a. b -&gt; h b -&gt; h a
forall (f :: * -&gt; *) b a. Contravariant f =&gt; b -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&gt;$</span></span><span> </span><span class="annot"><span class="annottext">p e (h e) -&gt; Dart s -&gt; e -&gt; h e
forall a b. p a b -&gt; Dart s -&gt; a -&gt; b
forall i (p :: * -&gt; * -&gt; *) a b.
Indexable i p =&gt;
p a b -&gt; i -&gt; a -&gt; b
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Internal.Indexed.html#indexed"><span class="hs-identifier hs-var">indexed</span></a></span><span> </span><span class="annot"><span class="annottext">p e (h e)
</span><a href="#local-6989586621679251282"><span class="hs-identifier hs-var">peHe</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679251287"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679251288"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-300"></span><span>
</span><span id="line-301"></span><span>    </span><span class="hs-comment">-- ifolding $ \ps -&gt; let (_,v',c) = asLocalV v ps</span><span>
</span><span id="line-302"></span><span>    </span><span class="hs-comment">--                                     in foldMapOf (outgoingDartsOf v')</span><span>
</span><span id="line-303"></span><span>    </span><span class="hs-comment">--                                                  (\d -&gt; [(d,ps^?!dartAt d)])</span><span>
</span><span id="line-304"></span><span>    </span><span class="hs-comment">--                                                  c</span><span>
</span><span id="line-305"></span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span>    </span><span class="hs-comment">-- we retrieve the component c containing vertex v. It's local name t here is v'.</span><span>
</span><span id="line-308"></span><span>    </span><span class="hs-comment">-- we then fold over the outoingDarts of v': i.e. this allows us to collect</span><span>
</span><span id="line-309"></span><span>    </span><span class="hs-comment">-- the global names (darts) that we care about. For each of those darts we then look up</span><span>
</span><span id="line-310"></span><span>    </span><span class="hs-comment">-- the actual data associated with it.</span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span>  </span><span id="local-6989586621679251298"><span class="annot"><span class="annottext">twinDartOf :: DartIx (PlanarGraph w s v e f)
-&gt; Getter
     (PlanarGraph w s v e f) (Maybe (DartIx (PlanarGraph w s v e f)))
</span><a href="#local-6989586621679251298"><span class="hs-identifier hs-var hs-var hs-var">twinDartOf</span></a></span></span><span> </span><span id="local-6989586621679251300"><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251300"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; Getter (PlanarGraph w s v e f) (DartIx (PlanarGraph w s v e f))
forall graph.
BidirGraph_ graph =&gt;
DartIx graph -&gt; Getter graph (DartIx graph)
</span><a href="Hiraffe.Graph.Class.html#twinOf"><span class="hs-identifier hs-var">twinOf</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251300"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">((Dart s -&gt; f (Dart s))
 -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; ((Maybe (Dart s) -&gt; f (Maybe (Dart s))) -&gt; Dart s -&gt; f (Dart s))
-&gt; (Maybe (Dart s) -&gt; f (Maybe (Dart s)))
-&gt; PlanarGraph w s v e f
-&gt; f (PlanarGraph w s v e f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Dart s -&gt; Maybe (Dart s))
-&gt; (Maybe (Dart s) -&gt; f (Maybe (Dart s))) -&gt; Dart s -&gt; f (Dart s)
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s a.
(Profunctor p, Contravariant f) =&gt;
(s -&gt; a) -&gt; Optic' p f s a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Getter.html#to"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">Dart s -&gt; Maybe (Dart s)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span>
</span><span id="line-313"></span><span>
</span><span id="line-314"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679250253"><span id="local-6989586621679250254"><span id="local-6989586621679250255"><span id="local-6989586621679250256"><span id="local-6989586621679250257"><span class="annot"><a href="Hiraffe.Graph.Class.html#BidirGraph_"><span class="hs-identifier hs-type">BidirGraph_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250253"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250254"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250255"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250256"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250257"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-315"></span><span>  </span><span id="local-6989586621679251312"><span class="annot"><span class="annottext">twinOf :: DartIx (PlanarGraph w s v e f)
-&gt; Getter (PlanarGraph w s v e f) (DartIx (PlanarGraph w s v e f))
</span><a href="Hiraffe.Graph.Class.html#twinOf"><span class="hs-identifier hs-var hs-var hs-var">twinOf</span></a></span></span><span> </span><span id="local-6989586621679251313"><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251313"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph w s v e f -&gt; DartIx (PlanarGraph w s v e f))
-&gt; Optic'
     (-&gt;) f (PlanarGraph w s v e f) (DartIx (PlanarGraph w s v e f))
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s a.
(Profunctor p, Contravariant f) =&gt;
(s -&gt; a) -&gt; Optic' p f s a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Getter.html#to"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">((PlanarGraph w s v e f -&gt; DartIx (PlanarGraph w s v e f))
 -&gt; Optic'
      (-&gt;) f (PlanarGraph w s v e f) (DartIx (PlanarGraph w s v e f)))
-&gt; (PlanarGraph w s v e f -&gt; DartIx (PlanarGraph w s v e f))
-&gt; Optic'
     (-&gt;) f (PlanarGraph w s v e f) (DartIx (PlanarGraph w s v e f))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f -&gt; DartIx (PlanarGraph w s v e f)
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dart s -&gt; Dart s
forall {k} (s :: k). Dart s -&gt; Dart s
</span><a href="Hiraffe.PlanarGraph.Dart.html#twin"><span class="hs-identifier hs-var">Dart.twin</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679251313"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-316"></span><span>  </span><span id="local-6989586621679251314"><span class="annot"><span class="annottext">getPositiveDart :: PlanarGraph w s v e f
-&gt; EdgeIx (PlanarGraph w s v e f) -&gt; DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251314"><span class="hs-identifier hs-var hs-var hs-var">getPositiveDart</span></a></span></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EdgeIx (PlanarGraph w s v e f) -&gt; DartIx (PlanarGraph w s v e f)
Dart s -&gt; Dart s
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-317"></span><span>
</span><span id="line-318"></span><span>
</span><span id="line-319"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679250281"><span id="local-6989586621679250282"><span id="local-6989586621679250283"><span id="local-6989586621679250284"><span id="local-6989586621679250285"><span id="local-6989586621679251320"><span class="annot"><a href="Hiraffe.Graph.Class.html#Graph_"><span class="hs-identifier hs-type">Graph_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250281"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250282"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250283"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250284"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250285"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-320"></span><span>  </span><span class="hs-comment">-- neighboursOf v  = ifolding $ \ps -&gt; let (_,v',c) = asLocalV v ps</span><span>
</span><span id="line-321"></span><span>  </span><span class="hs-comment">--                                     in foldMapOf (neighboursOf v')</span><span>
</span><span id="line-322"></span><span>  </span><span class="hs-comment">--                                                  (\w -&gt; [(w,ps^?!vertexAt w)])</span><span>
</span><span id="line-323"></span><span>  </span><span class="hs-comment">--                                                  c</span><span>
</span><span id="line-324"></span><span>    </span><span class="hs-comment">-- same general approach as outGoingDartsOf</span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span>  </span><span id="local-6989586621679251350"><span class="annot"><span class="annottext">incidentEdgesOf :: VertexIx (PlanarGraph w s v e f)
-&gt; IndexedFold
     (EdgeIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Edge (PlanarGraph w s v e f))
</span><a href="#local-6989586621679251350"><span class="hs-identifier hs-var hs-var hs-var">incidentEdgesOf</span></a></span></span><span> </span><span id="local-6989586621679251352"><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251352"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph w s v e f -&gt; [(Dart s, Edge (PlanarGraph w s v e f))])
-&gt; Over
     p
     f
     (PlanarGraph w s v e f)
     (PlanarGraph w s v e f)
     (Edge (PlanarGraph w s v e f))
     (Edge (PlanarGraph w s v e f))
forall (f :: * -&gt; *) i (p :: * -&gt; * -&gt; *) (g :: * -&gt; *) s a t b.
(Foldable f, Indexable i p, Contravariant g, Applicative g) =&gt;
(s -&gt; f (i, a)) -&gt; Over p g s t a b
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#ifolding"><span class="hs-identifier hs-var">ifolding</span></a></span><span> </span><span class="annot"><span class="annottext">((PlanarGraph w s v e f
  -&gt; [(Dart s, Edge (PlanarGraph w s v e f))])
 -&gt; Over
      p
      f
      (PlanarGraph w s v e f)
      (PlanarGraph w s v e f)
      (Edge (PlanarGraph w s v e f))
      (Edge (PlanarGraph w s v e f)))
-&gt; (PlanarGraph w s v e f
    -&gt; [(Dart s, Edge (PlanarGraph w s v e f))])
-&gt; Over
     p
     f
     (PlanarGraph w s v e f)
     (PlanarGraph w s v e f)
     (Edge (PlanarGraph w s v e f))
     (Edge (PlanarGraph w s v e f))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679251353"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251353"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621679251354"><span class="annot"><span class="annottext">VertexIx (Component w s)
</span><a href="#local-6989586621679251354"><span class="hs-identifier hs-var">v'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679251355"><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251355"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, VertexIx (Component w s), Component w s)
forall {k} (w :: World) (s :: k) v e f.
VertexIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, VertexIx (Component w s), Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#asLocalV"><span class="hs-identifier hs-var">asLocalV</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251352"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251353"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-327"></span><span>                                        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Getting [(Dart s, e)] (Component w s) (Dart s)
-&gt; (Dart s -&gt; [(Dart s, e)]) -&gt; Component w s -&gt; [(Dart s, e)]
forall r s a. Getting r s a -&gt; (a -&gt; r) -&gt; s -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#foldMapOf"><span class="hs-identifier hs-var">foldMapOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VertexIx (Component w s)
-&gt; IndexedFold
     (EdgeIx (Component w s)) (Component w s) (Edge (Component w s))
forall graph.
Graph_ graph =&gt;
VertexIx graph -&gt; IndexedFold (EdgeIx graph) graph (Edge graph)
</span><a href="Hiraffe.Graph.Class.html#incidentEdgesOf"><span class="hs-identifier hs-var">incidentEdgesOf</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (Component w s)
</span><a href="#local-6989586621679251354"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-328"></span><span>                                                     </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679251357"><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679251357"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679251357"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251353"><span class="hs-identifier hs-var">ps</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting (Endo e) (PlanarGraph w s v e f) e -&gt; e
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">EdgeIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (EdgeIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Edge (PlanarGraph w s v e f))
forall graph.
HasEdges' graph =&gt;
EdgeIx graph -&gt; IndexedTraversal' (EdgeIx graph) graph (Edge graph)
</span><a href="Hiraffe.Graph.Class.html#edgeAt"><span class="hs-identifier hs-var">edgeAt</span></a></span><span> </span><span class="annot"><span class="annottext">EdgeIx (PlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679251357"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-329"></span><span>                                                     </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251355"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-330"></span><span>
</span><span id="line-331"></span><span>  </span><span class="hs-comment">-- same general approach as outGoingDartsOf</span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span>  </span><span class="hs-comment">-- neighboursOfByEdge   :: VertexIx</span><span>
</span><span id="line-334"></span><span>  </span><span class="hs-comment">--                      -&gt; IndexedFold (EdgeIx graph, VertexIx graph) graph (Vertex graph)</span><span>
</span><span id="line-335"></span><span>  </span><span id="local-6989586621679251382"><span class="annot"><span class="annottext">neighboursOfByEdge :: VertexIx (PlanarGraph w s v e f)
-&gt; IndexedFold
     (EdgeIx (PlanarGraph w s v e f), VertexIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Vertex (PlanarGraph w s v e f))
</span><a href="#local-6989586621679251382"><span class="hs-identifier hs-var hs-var hs-var">neighboursOfByEdge</span></a></span></span><span> </span><span id="local-6989586621679251384"><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251384"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph w s v e f
 -&gt; [((Dart s, VertexIdIn 'Primal s),
      Vertex (PlanarGraph w s v e f))])
-&gt; Over
     p
     f
     (PlanarGraph w s v e f)
     (PlanarGraph w s v e f)
     (Vertex (PlanarGraph w s v e f))
     (Vertex (PlanarGraph w s v e f))
forall (f :: * -&gt; *) i (p :: * -&gt; * -&gt; *) (g :: * -&gt; *) s a t b.
(Foldable f, Indexable i p, Contravariant g, Applicative g) =&gt;
(s -&gt; f (i, a)) -&gt; Over p g s t a b
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#ifolding"><span class="hs-identifier hs-var">ifolding</span></a></span><span> </span><span class="annot"><span class="annottext">((PlanarGraph w s v e f
  -&gt; [((Dart s, VertexIdIn 'Primal s),
       Vertex (PlanarGraph w s v e f))])
 -&gt; Over
      p
      f
      (PlanarGraph w s v e f)
      (PlanarGraph w s v e f)
      (Vertex (PlanarGraph w s v e f))
      (Vertex (PlanarGraph w s v e f)))
-&gt; (PlanarGraph w s v e f
    -&gt; [((Dart s, VertexIdIn 'Primal s),
         Vertex (PlanarGraph w s v e f))])
-&gt; Over
     p
     f
     (PlanarGraph w s v e f)
     (PlanarGraph w s v e f)
     (Vertex (PlanarGraph w s v e f))
     (Vertex (PlanarGraph w s v e f))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679251385"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251385"><span class="hs-identifier hs-var">pg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-336"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621679251386"><span class="annot"><span class="annottext">VertexIx (Component w s)
</span><a href="#local-6989586621679251386"><span class="hs-identifier hs-var">u'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679251387"><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251387"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, VertexIx (Component w s), Component w s)
forall {k} (w :: World) (s :: k) v e f.
VertexIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, VertexIx (Component w s), Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#asLocalV"><span class="hs-identifier hs-var">asLocalV</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251384"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251385"><span class="hs-identifier hs-var">pg</span></a></span><span>
</span><span id="line-337"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Getting
  [((Dart s, VertexIdIn 'Primal s), v)] (Component w s) (Dart s)
-&gt; (Dart s -&gt; [((Dart s, VertexIdIn 'Primal s), v)])
-&gt; Component w s
-&gt; [((Dart s, VertexIdIn 'Primal s), v)]
forall r s a. Getting r s a -&gt; (a -&gt; r) -&gt; s -&gt; r
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#foldMapOf"><span class="hs-identifier hs-var">foldMapOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VertexIx (Component w s)
-&gt; IndexedFold
     (EdgeIx (Component w s)) (Component w s) (Edge (Component w s))
forall graph.
Graph_ graph =&gt;
VertexIx graph -&gt; IndexedFold (EdgeIx graph) graph (Edge graph)
</span><a href="Hiraffe.Graph.Class.html#incidentEdgesOf"><span class="hs-identifier hs-var">incidentEdgesOf</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (Component w s)
</span><a href="#local-6989586621679251386"><span class="hs-identifier hs-var">u'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-338"></span><span>                 </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679251388"><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679251388"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679251389"><span class="annot"><span class="annottext">VertexIdIn 'Primal s
</span><a href="#local-6989586621679251389"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679251390"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679251390"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679251388"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">VertexIdIn 'Primal s
</span><a href="#local-6989586621679251389"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679251390"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((VertexIdIn 'Primal s, v) -&gt; ((Dart s, VertexIdIn 'Primal s), v))
-&gt; [(VertexIdIn 'Primal s, v)]
-&gt; [((Dart s, VertexIdIn 'Primal s), v)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Getting
  (Endo [(VertexIdIn 'Primal s, v)])
  (PlanarGraph w s v e f)
  (VertexIdIn 'Primal s, v)
-&gt; PlanarGraph w s v e f -&gt; [(VertexIdIn 'Primal s, v)]
forall a s. Getting (Endo [a]) s a -&gt; s -&gt; [a]
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#toListOf"><span class="hs-identifier hs-var">toListOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; IndexedGetter
     (VertexIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Vertex (PlanarGraph w s v e f))
forall graph.
DiGraph_ graph =&gt;
DartIx graph -&gt; IndexedGetter (VertexIx graph) graph (Vertex graph)
</span><a href="Hiraffe.Graph.Class.html#headOf"><span class="hs-identifier hs-var">headOf</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679251388"><span class="hs-identifier hs-var">e</span></a></span><span class="annot"><span class="annottext">(Indexed
   (VertexIdIn 'Primal s)
   v
   (Const (Endo [(VertexIdIn 'Primal s, v)]) v)
 -&gt; PlanarGraph w s v e f
 -&gt; Const
      (Endo [(VertexIdIn 'Primal s, v)]) (PlanarGraph w s v e f))
-&gt; (((VertexIdIn 'Primal s, v)
     -&gt; Const
          (Endo [(VertexIdIn 'Primal s, v)]) (VertexIdIn 'Primal s, v))
    -&gt; Indexed
         (VertexIdIn 'Primal s)
         v
         (Const (Endo [(VertexIdIn 'Primal s, v)]) v))
-&gt; Getting
     (Endo [(VertexIdIn 'Primal s, v)])
     (PlanarGraph w s v e f)
     (VertexIdIn 'Primal s, v)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">((VertexIdIn 'Primal s, v)
 -&gt; Const
      (Endo [(VertexIdIn 'Primal s, v)]) (VertexIdIn 'Primal s, v))
-&gt; Indexed
     (VertexIdIn 'Primal s)
     v
     (Const (Endo [(VertexIdIn 'Primal s, v)]) v)
forall i (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s j t.
(Indexable i p, Functor f) =&gt;
p (i, s) (f (j, t)) -&gt; Indexed i s (f t)
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Internal.Indexed.html#withIndex"><span class="hs-identifier hs-var">withIndex</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251385"><span class="hs-identifier hs-var">pg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-339"></span><span>                 </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251387"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-340"></span><span>    </span><span class="hs-comment">-- TODO: improve these implementations. We shouldn't have to build the intermediate</span><span>
</span><span id="line-341"></span><span>    </span><span class="hs-comment">-- lists.</span><span>
</span><span id="line-342"></span><span>
</span><span id="line-343"></span><span class="hs-comment">{-
    conjoined theFold theIFold
    where
      theFold        :: forall h. (Contravariant h, Applicative h)
                     =&gt; (v -&gt; h v) -&gt; PlanarGraph w s v e f -&gt; h (PlanarGraph w s v e f)
      theFold vHv pg = c &gt;$ neighboursOf u' vHv' c
        where
          (_,u',c) = asLocalV u pg
          vHv'     :: VertexIx (PlanarGraph w s v e f) -&gt; h (VertexIx (PlanarGraph w s v e f))
          vHv' v   = let x = pg^?!vertexAt v in x &gt;$ vHv x

      theIFold         :: forall p h. ( Contravariant h, Applicative h
                                      , Indexable ( EdgeIx   (PlanarGraph w s v e f)
                                                  , VertexIx (PlanarGraph w s v e f)
                                                  ) p
                                      )
                       =&gt; p v (h v) -&gt; PlanarGraph w s v e f -&gt; h (PlanarGraph w s v e f)
      theIFold pvHv pg = incidentEdgesOf' u' dHd c
        -- c &gt;$ incidentEdgesOf' u' dHd c
        where
          (_,u',c) = asLocalV u pg
          -- dHd      :: EdgeIx (PlanarGraph w s v e f) -&gt; h (EdgeIx (PlanarGraph w s v e f) )
            -- EdgeIx (Component w s) -&gt; h (EdgeIx (Component w s))
          -- dHd      :: _ -&gt; _
          dHd d    = undefined

            -- let e = pg^?!dartAt d
            --              c =
            --          in e &gt;$ indexed peHe d e


      incidentEdgesOf'    :: VertexIx (Component w s)
                          -&gt; Fold (Component w s) (EdgeIx (PlanarGraph w s v e f))
      incidentEdgesOf' u' = incidentEdgesOf u'
-}</span><span>
</span><span id="line-378"></span><span class="hs-comment">{-
    theFold
    where
      neighboursOfByEdge' :: VertexId (Wrap s)
                          -&gt; IndexedFold (Dart.Dart (Wrap s), VertexId (Wrap s))
                                         (Component s)
                                         (VertexId s)
      neighboursOfByEdge' = neighboursOfByEdge

      theFold         :: forall p h.
                         (Contravariant h, Applicative h, Indexable (Dart.Dart s, VertexId s) p)
                      =&gt; p v (h v) -&gt; PlanarGraph w s v e f -&gt; h (PlanarGraph w s v e f)
      theFold pvFv pg = neighboursOfByEdge' u' g c
        where
          (_,u',c) = asLocalV u pg

          g          :: (Dart.Dart (Wrap s), VertexId (Wrap s)) -&gt; VertexId s -&gt; h v
          g (e',_) v = indexed pvFv (c^?!edgeAt e', v) (pg^?!vertexAt v)

-}</span><span>
</span><span id="line-398"></span><span>
</span><span id="line-399"></span><span>
</span><span id="line-400"></span><span class="hs-comment">{-
instance ( -- PlanarGraph_ (Component s)
         -- , IsComponent s
         -- , EdgeIx   (Component s) ~ Dart.Dart (Wrap s)
         -- , Edge     (Component s) ~ Dart.Dart s
         ) =&gt; PlanarGraph_ (PlanarGraph w s v e f) where
  -- dualGraph, (incidentFaceOf | leftFaceOf), rightFaceOf, prevDartOf, nextDartOf, boundaryDartOf, boundaryDartOf, boundaryDarts
  type DualGraphOf (PlanarGraph w s v e f) = CPlanarGraph (DualOf w) s f e v
  type WorldOf     (PlanarGraph w s v e f) = w

-}</span><span>
</span><span id="line-411"></span><span>  </span><span class="hs-comment">-- dualGraph = undefined</span><span>
</span><span id="line-412"></span><span>    </span><span class="hs-comment">-- main idea: consider the dual of the components, glue them together in some</span><span>
</span><span id="line-413"></span><span>    </span><span class="hs-comment">-- bigger graph</span><span>
</span><span id="line-414"></span><span>
</span><span id="line-415"></span><span>  </span><span class="hs-comment">-- leftFace      :: Dart s -&gt; PlanarSubdivision s v e f  -&gt; FaceId' s</span><span>
</span><span id="line-416"></span><span>  </span><span class="hs-comment">-- leftFaceOf d = \pEfE g -&gt; let (_,d',c) = asLocalD d g</span><span>
</span><span id="line-417"></span><span>  </span><span class="hs-comment">--                           in leftFaceOf d' c</span><span>
</span><span id="line-418"></span><span>
</span><span id="line-419"></span><span>
</span><span id="line-420"></span><span>
</span><span id="line-421"></span><span>  </span><span class="hs-comment">--                 --               fi       = PG.leftFace d' g</span><span>
</span><span id="line-422"></span><span>  </span><span class="hs-comment">--                 -- in</span><span>
</span><span id="line-423"></span><span>
</span><span id="line-424"></span><span>  </span><span class="hs-comment">-- leftFace d ps = let (_,d',g) = asLocalD d ps</span><span>
</span><span id="line-425"></span><span>  </span><span class="hs-comment">--                     fi       = PG.leftFace d' g</span><span>
</span><span id="line-426"></span><span>  </span><span class="hs-comment">--                 in g^.dataOf fi</span><span>
</span><span id="line-427"></span><span>
</span><span id="line-428"></span><span>
</span><span id="line-429"></span><span>
</span><span id="line-430"></span><span class="hs-comment">-- instance PlaneGraph_ (PlanarGraph w s      v e f) v where</span><span>
</span><span id="line-431"></span><span class="hs-comment">--   -- TODO: fromEmbedding</span><span>
</span><span id="line-432"></span><span>
</span><span id="line-433"></span><span class="hs-comment">-- instance PlanarGraph_ component_ (PlanarGraph  component  s v e f) v where</span><span>
</span><span id="line-434"></span><span class="hs-comment">-- type DualGraphOf (CPlanarGraph w s v e f) = CPlanarGraph (DualOf w) s f e v</span><span>
</span><span id="line-435"></span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span>
</span><span id="line-438"></span><span>
</span><span id="line-439"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-440"></span><span>
</span><span id="line-441"></span><span class="hs-comment">-- -- | Constructs a PlanarGraph from a connected planar graph (i.e. a single component graph)</span><span>
</span><span id="line-442"></span><span class="hs-comment">-- --</span><span>
</span><span id="line-443"></span><span class="hs-comment">-- -- runningTime: \(O(n)\)</span><span>
</span><span id="line-444"></span><span class="hs-comment">-- fromConnected   :: forall s v e f. CPlanarGraph w s v e f -&gt; PlanarGraph w s v e f</span><span>
</span><span id="line-445"></span><span class="hs-comment">-- fromConnected g = fromConnected' g (outerFaceDart g)</span><span>
</span><span id="line-446"></span><span>
</span><span id="line-447"></span><span class="hs-comment">-- | Given a (connected) PlanarGraph and a dart that has the outerface on its left</span><span>
</span><span id="line-448"></span><span class="hs-comment">-- | Constructs a PlanarGraph</span><span>
</span><span id="line-449"></span><span class="hs-comment">--</span><span>
</span><span id="line-450"></span><span class="hs-comment">-- runningTime: \(O(n)\)</span><span>
</span><span id="line-451"></span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#fromConnected%27"><span class="hs-identifier hs-type">fromConnected'</span></a></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679250309"><span class="annot"><a href="#local-6989586621679250309"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span id="local-6989586621679250310"><span class="annot"><a href="#local-6989586621679250310"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679250311"><span class="annot"><a href="#local-6989586621679250311"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621679250312"><span class="annot"><a href="#local-6989586621679250312"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621679250313"><span class="annot"><a href="#local-6989586621679250313"><span class="hs-identifier hs-type">f</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-452"></span><span>                        </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#CPlanarGraph"><span class="hs-identifier hs-type">CPlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250309"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250310"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250311"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250312"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250313"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-453"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Dart.html#Dart"><span class="hs-identifier hs-type">Dart.Dart</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250310"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-454"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250309"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250310"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250311"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250312"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250313"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-455"></span><span id="fromConnected%27"><span class="annot"><span class="annottext">fromConnected' :: forall {k} (w :: World) (s :: k) v e f.
CPlanarGraph w s v e f -&gt; Dart s -&gt; PlanarGraph w s v e f
</span><a href="Hiraffe.PlanarGraph.Type.html#fromConnected%27"><span class="hs-identifier hs-var hs-var">fromConnected'</span></a></span></span><span> </span><span id="local-6989586621679251434"><span class="annot"><span class="annottext">CPlanarGraph w s v e f
</span><a href="#local-6989586621679251434"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679251435"><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679251435"><span class="hs-identifier hs-var">ofD</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Component w s)
-&gt; NonEmptyVector (Raw s (VertexIx (Component w s)) v)
-&gt; NonEmptyVector (Raw s (DartIx (Component w s)) e)
-&gt; NonEmptyVector (RawFace w s f)
-&gt; PlanarGraph w s v e f
forall k (w :: World) (s :: k) v e f.
NonEmptyVector (Component w s)
-&gt; NonEmptyVector (Raw s (VertexIx (Component w s)) v)
-&gt; NonEmptyVector (Raw s (DartIx (Component w s)) e)
-&gt; NonEmptyVector (RawFace w s f)
-&gt; PlanarGraph w s v e f
</span><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-var">PlanarGraph</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Component w s -&gt; NonEmptyVector (Component w s)
forall a. a -&gt; NonEmptyVector a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.html#singleton"><span class="hs-identifier hs-var">NonEmptyV.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">(Component w s -&gt; NonEmptyVector (Component w s))
-&gt; Component w s -&gt; NonEmptyVector (Component w s)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CPlanarGraph w s (VertexId s) (Dart s) (FaceId s) -&gt; Component w s
forall {k1} {k2} (w :: World) (s :: k1) (s' :: k2) v e f.
CPlanarGraph w s v e f -&gt; CPlanarGraph w s' v e f
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#unsafeChangeS"><span class="hs-identifier hs-var">Core.unsafeChangeS</span></a></span><span> </span><span class="annot"><span class="annottext">CPlanarGraph
  w
  s
  (VertexIx (PlanarGraph w s v e f))
  (DartIx (PlanarGraph w s v e f))
  (FaceIx (PlanarGraph w s v e f))
CPlanarGraph w s (VertexId s) (Dart s) (FaceId s)
</span><a href="#local-6989586621679251438"><span class="hs-identifier hs-var">g'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Raw s (VertexIx (Component w s)) v)
NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
</span><a href="#local-6989586621679251439"><span class="hs-identifier hs-var">vd</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Raw s (DartIx (Component w s)) e)
NonEmptyVector (Raw s (Dart (Wrap s)) e)
</span><a href="#local-6989586621679251440"><span class="hs-identifier hs-var">ed</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (RawFace w s f)
</span><a href="#local-6989586621679251441"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-456"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-457"></span><span>    </span><span id="local-6989586621679251442"><span class="annot"><span class="annottext">c :: ComponentId s
</span><a href="#local-6989586621679251442"><span class="hs-identifier hs-var hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; ComponentId s
forall k (s :: k). Int -&gt; ComponentId s
</span><a href="Hiraffe.PlanarGraph.Component.html#ComponentId"><span class="hs-identifier hs-var">ComponentId</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-458"></span><span>    </span><span id="local-6989586621679251439"><span class="annot"><span class="annottext">vd :: NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
</span><a href="#local-6989586621679251439"><span class="hs-identifier hs-var hs-var">vd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; v -&gt; Raw s (VertexIdIn w (Wrap s)) v)
-&gt; NonEmptyVector v
-&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
forall a b. (Int -&gt; a -&gt; b) -&gt; NonEmptyVector a -&gt; NonEmptyVector b
forall i (f :: * -&gt; *) a b.
FunctorWithIndex i f =&gt;
(i -&gt; a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/indexed-traversable-0.1.4-abf18009c8aa238896def64882e8e8d1f618d0164d9214ba36444910f4d62193/share/doc/html/src/WithIndex.html#imap"><span class="hs-identifier hs-var">imap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679251444"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679251444"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679251445"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679251445"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ComponentId s
-&gt; VertexIdIn w (Wrap s) -&gt; v -&gt; Raw s (VertexIdIn w (Wrap s)) v
forall {k} (s :: k) ia a. ComponentId s -&gt; ia -&gt; a -&gt; Raw s ia a
</span><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-var">Raw</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentId s
forall {k} {s :: k}. ComponentId s
</span><a href="#local-6989586621679251442"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; VertexIdIn w (Wrap s)
forall k (w :: World) (s :: k). Int -&gt; VertexIdIn w s
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#VertexId"><span class="hs-identifier hs-var">VertexId</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679251444"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679251445"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>                   </span><span class="annot"><span class="annottext">(NonEmptyVector v
 -&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v))
-&gt; NonEmptyVector v
-&gt; NonEmptyVector (Raw s (VertexIdIn w (Wrap s)) v)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
</span><a href="#local-6989586621679251434"><span class="hs-identifier hs-var">g</span></a></span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
-&gt; Getting
     (NonEmptyVector v) (CPlanarGraph w s v e f) (NonEmptyVector v)
-&gt; NonEmptyVector v
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">Getting
  (NonEmptyVector v) (CPlanarGraph w s v e f) (NonEmptyVector v)
forall {k} (w :: World) (s :: k) v e f1 v' (f2 :: * -&gt; *).
Functor f2 =&gt;
(NonEmptyVector v -&gt; f2 (NonEmptyVector v'))
-&gt; CPlanarGraph w s v e f1 -&gt; f2 (CPlanarGraph w s v' e f1)
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#vertexData"><span class="hs-identifier hs-var">Core.vertexData</span></a></span><span>
</span><span id="line-459"></span><span>    </span><span id="local-6989586621679251440"><span class="annot"><span class="annottext">ed :: NonEmptyVector (Raw s (Dart (Wrap s)) e)
</span><a href="#local-6989586621679251440"><span class="hs-identifier hs-var hs-var">ed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Dart (Wrap s) -&gt; e -&gt; Raw s (Dart (Wrap s)) e)
-&gt; NonEmptyVector (Dart (Wrap s))
-&gt; NonEmptyVector e
-&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
forall a b c.
(a -&gt; b -&gt; c)
-&gt; NonEmptyVector a -&gt; NonEmptyVector b -&gt; NonEmptyVector c
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.html#zipWith"><span class="hs-identifier hs-var">NonEmptyV.zipWith</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679251448"><span class="annot"><span class="annottext">Dart (Wrap s)
</span><a href="#local-6989586621679251448"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679251449"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679251449"><span class="hs-identifier hs-var">dd</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ComponentId s -&gt; Dart (Wrap s) -&gt; e -&gt; Raw s (Dart (Wrap s)) e
forall {k} (s :: k) ia a. ComponentId s -&gt; ia -&gt; a -&gt; Raw s ia a
</span><a href="Hiraffe.PlanarGraph.Component.html#Raw"><span class="hs-identifier hs-var">Raw</span></a></span><span> </span><span class="annot"><span class="annottext">ComponentId s
forall {k} {s :: k}. ComponentId s
</span><a href="#local-6989586621679251442"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Dart (Wrap s)
</span><a href="#local-6989586621679251448"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679251449"><span class="hs-identifier hs-var">dd</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Dart (Wrap s))
forall {k} (s' :: k). NonEmptyVector (Dart s')
</span><a href="#local-6989586621679251450"><span class="hs-identifier hs-var">allDarts</span></a></span><span>     </span><span class="annot"><span class="annottext">(NonEmptyVector e -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e))
-&gt; NonEmptyVector e -&gt; NonEmptyVector (Raw s (Dart (Wrap s)) e)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
</span><a href="#local-6989586621679251434"><span class="hs-identifier hs-var">g</span></a></span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
-&gt; Getting
     (NonEmptyVector e) (CPlanarGraph w s v e f) (NonEmptyVector e)
-&gt; NonEmptyVector e
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">Getting
  (NonEmptyVector e) (CPlanarGraph w s v e f) (NonEmptyVector e)
forall {k} (w :: World) (s :: k) v e f1 e' (f2 :: * -&gt; *).
Functor f2 =&gt;
(NonEmptyVector e -&gt; f2 (NonEmptyVector e'))
-&gt; CPlanarGraph w s v e f1 -&gt; f2 (CPlanarGraph w s v e' f1)
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#dartData"><span class="hs-identifier hs-var">Core.dartData</span></a></span><span>
</span><span id="line-460"></span><span>    </span><span id="local-6989586621679251441"><span class="annot"><span class="annottext">fd :: NonEmptyVector (RawFace w s f)
</span><a href="#local-6989586621679251441"><span class="hs-identifier hs-var hs-var">fd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; f -&gt; RawFace w s f)
-&gt; NonEmptyVector f -&gt; NonEmptyVector (RawFace w s f)
forall a b. (Int -&gt; a -&gt; b) -&gt; NonEmptyVector a -&gt; NonEmptyVector b
forall i (f :: * -&gt; *) a b.
FunctorWithIndex i f =&gt;
(i -&gt; a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/indexed-traversable-0.1.4-abf18009c8aa238896def64882e8e8d1f618d0164d9214ba36444910f4d62193/share/doc/html/src/WithIndex.html#imap"><span class="hs-identifier hs-var">imap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679251452"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679251452"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679251453"><span class="annot"><span class="annottext">f
</span><a href="#local-6989586621679251453"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (ComponentId s, FaceIdIn w (Wrap s))
-&gt; FaceData (Dart s) f -&gt; RawFace w s f
forall k (w :: World) (s :: k) f.
Maybe (ComponentId s, FaceIdIn w (Wrap s))
-&gt; FaceData (Dart s) f -&gt; RawFace w s f
</span><a href="Hiraffe.PlanarGraph.Component.html#RawFace"><span class="hs-identifier hs-var">RawFace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Maybe (ComponentId s, FaceIdIn w (Wrap s))
</span><a href="#local-6989586621679251455"><span class="hs-identifier hs-var">mkFaceIdx</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679251452"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; f -&gt; FaceData (Dart s) f
</span><a href="#local-6989586621679251456"><span class="hs-identifier hs-var">mkFaceData</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679251452"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">f
</span><a href="#local-6989586621679251453"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NonEmptyVector f -&gt; NonEmptyVector (RawFace w s f))
-&gt; NonEmptyVector f -&gt; NonEmptyVector (RawFace w s f)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
</span><a href="#local-6989586621679251434"><span class="hs-identifier hs-var">g</span></a></span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
-&gt; Getting
     (NonEmptyVector f) (CPlanarGraph w s v e f) (NonEmptyVector f)
-&gt; NonEmptyVector f
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">Getting
  (NonEmptyVector f) (CPlanarGraph w s v e f) (NonEmptyVector f)
forall {k} (w :: World) (s :: k) v e f1 f' (f2 :: * -&gt; *).
Functor f2 =&gt;
(NonEmptyVector f1 -&gt; f2 (NonEmptyVector f'))
-&gt; CPlanarGraph w s v e f1 -&gt; f2 (CPlanarGraph w s v e f')
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#faceData"><span class="hs-identifier hs-var">Core.faceData</span></a></span><span>
</span><span id="line-461"></span><span>
</span><span id="line-462"></span><span>    </span><span class="annot"><a href="#local-6989586621679251438"><span class="hs-identifier hs-type">g'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#CPlanarGraph"><span class="hs-identifier hs-type">CPlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250309"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250310"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#VertexIx"><span class="hs-identifier hs-type">VertexIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250309"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250310"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250311"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250312"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250313"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-463"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250309"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250310"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250311"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250312"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250313"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-464"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#FaceIx"><span class="hs-identifier hs-type">FaceIx</span></a></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250309"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250310"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250311"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250312"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250313"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-465"></span><span>    </span><span id="local-6989586621679251438"><span class="annot"><span class="annottext">g' :: CPlanarGraph
  w
  s
  (VertexIx (PlanarGraph w s v e f))
  (DartIx (PlanarGraph w s v e f))
  (FaceIx (PlanarGraph w s v e f))
</span><a href="#local-6989586621679251438"><span class="hs-identifier hs-var hs-var">g'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
</span><a href="#local-6989586621679251434"><span class="hs-identifier hs-var">g</span></a></span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
-&gt; (CPlanarGraph w s v e f -&gt; CPlanarGraph w s v e (FaceId s))
-&gt; CPlanarGraph w s v e (FaceId s)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span class="annot"><span class="annottext">(NonEmptyVector f -&gt; Identity (NonEmptyVector (FaceId s)))
-&gt; CPlanarGraph w s v e f
-&gt; Identity (CPlanarGraph w s v e (FaceId s))
forall {k} (w :: World) (s :: k) v e f1 f' (f2 :: * -&gt; *).
Functor f2 =&gt;
(NonEmptyVector f1 -&gt; f2 (NonEmptyVector f'))
-&gt; CPlanarGraph w s v e f1 -&gt; f2 (CPlanarGraph w s v e f')
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#faceData"><span class="hs-identifier hs-var">Core.faceData</span></a></span><span>    </span><span class="annot"><span class="annottext">((NonEmptyVector f -&gt; Identity (NonEmptyVector (FaceId s)))
 -&gt; CPlanarGraph w s v e f
 -&gt; Identity (CPlanarGraph w s v e (FaceId s)))
-&gt; (NonEmptyVector f -&gt; NonEmptyVector (FaceId s))
-&gt; CPlanarGraph w s v e f
-&gt; CPlanarGraph w s v e (FaceId s)
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Setter.html#%25~"><span class="hs-operator hs-var">%~</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; f -&gt; FaceId s)
-&gt; NonEmptyVector f -&gt; NonEmptyVector (FaceId s)
forall a b. (Int -&gt; a -&gt; b) -&gt; NonEmptyVector a -&gt; NonEmptyVector b
forall i (f :: * -&gt; *) a b.
FunctorWithIndex i f =&gt;
(i -&gt; a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/indexed-traversable-0.1.4-abf18009c8aa238896def64882e8e8d1f618d0164d9214ba36444910f4d62193/share/doc/html/src/WithIndex.html#imap"><span class="hs-identifier hs-var">imap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679251459"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679251459"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">f
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; FaceId s
forall {k} (w' :: World) (s' :: k). Int -&gt; FaceIdIn w' s'
</span><a href="#local-6989586621679251460"><span class="hs-identifier hs-var">mkFaceId</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; FaceId s) -&gt; Int -&gt; FaceId s
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621679251461"><span class="hs-identifier hs-var">flipID</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679251459"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-466"></span><span>          </span><span class="annot"><span class="annottext">CPlanarGraph w s v e (FaceId s)
-&gt; (CPlanarGraph w s v e (FaceId s)
    -&gt; CPlanarGraph w s (VertexId s) e (FaceId s))
-&gt; CPlanarGraph w s (VertexId s) e (FaceId s)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span class="annot"><span class="annottext">(NonEmptyVector v -&gt; Identity (NonEmptyVector (VertexId s)))
-&gt; CPlanarGraph w s v e (FaceId s)
-&gt; Identity (CPlanarGraph w s (VertexId s) e (FaceId s))
forall {k} (w :: World) (s :: k) v e f1 v' (f2 :: * -&gt; *).
Functor f2 =&gt;
(NonEmptyVector v -&gt; f2 (NonEmptyVector v'))
-&gt; CPlanarGraph w s v e f1 -&gt; f2 (CPlanarGraph w s v' e f1)
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#vertexData"><span class="hs-identifier hs-var">Core.vertexData</span></a></span><span>  </span><span class="annot"><span class="annottext">((NonEmptyVector v -&gt; Identity (NonEmptyVector (VertexId s)))
 -&gt; CPlanarGraph w s v e (FaceId s)
 -&gt; Identity (CPlanarGraph w s (VertexId s) e (FaceId s)))
-&gt; (NonEmptyVector v -&gt; NonEmptyVector (VertexId s))
-&gt; CPlanarGraph w s v e (FaceId s)
-&gt; CPlanarGraph w s (VertexId s) e (FaceId s)
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Setter.html#%25~"><span class="hs-operator hs-var">%~</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; v -&gt; VertexId s)
-&gt; NonEmptyVector v -&gt; NonEmptyVector (VertexId s)
forall a b. (Int -&gt; a -&gt; b) -&gt; NonEmptyVector a -&gt; NonEmptyVector b
forall i (f :: * -&gt; *) a b.
FunctorWithIndex i f =&gt;
(i -&gt; a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/indexed-traversable-0.1.4-abf18009c8aa238896def64882e8e8d1f618d0164d9214ba36444910f4d62193/share/doc/html/src/WithIndex.html#imap"><span class="hs-identifier hs-var">imap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679251462"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679251462"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">v
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; VertexId s
forall k (w :: World) (s :: k). Int -&gt; VertexIdIn w s
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#VertexId"><span class="hs-identifier hs-var">VertexId</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679251462"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-467"></span><span>          </span><span class="annot"><span class="annottext">CPlanarGraph w s (VertexId s) e (FaceId s)
-&gt; (CPlanarGraph w s (VertexId s) e (FaceId s)
    -&gt; CPlanarGraph w s (VertexId s) (Dart s) (FaceId s))
-&gt; CPlanarGraph w s (VertexId s) (Dart s) (FaceId s)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span class="annot"><span class="annottext">(NonEmptyVector e -&gt; Identity (NonEmptyVector (Dart s)))
-&gt; CPlanarGraph w s (VertexId s) e (FaceId s)
-&gt; Identity (CPlanarGraph w s (VertexId s) (Dart s) (FaceId s))
forall {k} (w :: World) (s :: k) v e f1 e' (f2 :: * -&gt; *).
Functor f2 =&gt;
(NonEmptyVector e -&gt; f2 (NonEmptyVector e'))
-&gt; CPlanarGraph w s v e f1 -&gt; f2 (CPlanarGraph w s v e' f1)
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#dartData"><span class="hs-identifier hs-var">Core.dartData</span></a></span><span>    </span><span class="annot"><span class="annottext">((NonEmptyVector e -&gt; Identity (NonEmptyVector (Dart s)))
 -&gt; CPlanarGraph w s (VertexId s) e (FaceId s)
 -&gt; Identity (CPlanarGraph w s (VertexId s) (Dart s) (FaceId s)))
-&gt; NonEmptyVector (Dart s)
-&gt; CPlanarGraph w s (VertexId s) e (FaceId s)
-&gt; CPlanarGraph w s (VertexId s) (Dart s) (FaceId s)
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Setter.html#.~"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Dart s)
forall {k} (s' :: k). NonEmptyVector (Dart s')
</span><a href="#local-6989586621679251450"><span class="hs-identifier hs-var">allDarts</span></a></span><span>
</span><span id="line-468"></span><span>
</span><span id="line-469"></span><span>    </span><span class="annot"><a href="#local-6989586621679251450"><span class="hs-identifier hs-type">allDarts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679250365"><span class="annot"><a href="#local-6989586621679250365"><span class="hs-identifier hs-type">s'</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.Internal.html#NonEmptyVector"><span class="hs-identifier hs-type">NonEmptyVector</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Dart.html#Dart"><span class="hs-identifier hs-type">Dart.Dart</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250365"><span class="hs-identifier hs-type">s'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-470"></span><span>    </span><span id="local-6989586621679251450"><span class="annot"><span class="annottext">allDarts :: forall {k} (s' :: k). NonEmptyVector (Dart s')
</span><a href="#local-6989586621679251450"><span class="hs-identifier hs-var hs-var">allDarts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmptyVector (Dart s')
-&gt; Maybe (NonEmptyVector (Dart s')) -&gt; NonEmptyVector (Dart s')
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; NonEmptyVector (Dart s')
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;allDarts'. absurd&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-471"></span><span>             </span><span class="annot"><span class="annottext">(Maybe (NonEmptyVector (Dart s')) -&gt; NonEmptyVector (Dart s'))
-&gt; Maybe (NonEmptyVector (Dart s')) -&gt; NonEmptyVector (Dart s')
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Dart s'] -&gt; Maybe (NonEmptyVector (Dart s'))
forall a. Int -&gt; [a] -&gt; Maybe (NonEmptyVector a)
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/nonempty-vector-0.2.4-45186915c5024bfe5503e8ec6efd55f9c89f0b91a0e98f6f86b52a522e0428fb/share/doc/html/src/Data.Vector.NonEmpty.html#fromListN"><span class="hs-identifier hs-var">NonEmptyV.fromListN</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CPlanarGraph w s v e f -&gt; Int
forall graph. HasDarts' graph =&gt; graph -&gt; Int
</span><a href="Hiraffe.Graph.Class.html#numDarts"><span class="hs-identifier hs-var">numDarts</span></a></span><span> </span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
</span><a href="#local-6989586621679251434"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Dart s']
forall {k} (s :: k). [Dart s]
</span><a href="Hiraffe.PlanarGraph.Dart.html#allDarts"><span class="hs-identifier hs-var">Dart.allDarts</span></a></span><span>
</span><span id="line-472"></span><span>
</span><span id="line-473"></span><span>    </span><span class="hs-comment">-- make sure the outerFaceId is 0</span><span>
</span><span id="line-474"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679251468"><span class="annot"><span class="annottext">FaceIdIn w s
</span><a href="#local-6989586621679251468"><span class="hs-identifier hs-var">oF</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679251469"><span class="annot"><span class="annottext">f
</span><a href="#local-6989586621679251469"><span class="hs-identifier hs-var">ofData</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
</span><a href="#local-6989586621679251434"><span class="hs-identifier hs-var">g</span></a></span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
-&gt; Getting
     (FaceIdIn w s, f) (CPlanarGraph w s v e f) (FaceIdIn w s, f)
-&gt; (FaceIdIn w s, f)
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">DartIx (CPlanarGraph w s v e f)
-&gt; IndexedLens'
     (FaceIx (CPlanarGraph w s v e f))
     (CPlanarGraph w s v e f)
     (Face (CPlanarGraph w s v e f))
forall planarGraph.
PlanarGraph_ planarGraph =&gt;
DartIx planarGraph
-&gt; IndexedLens' (FaceIx planarGraph) planarGraph (Face planarGraph)
</span><a href="Hiraffe.PlanarGraph.Class.html#leftFaceOf"><span class="hs-identifier hs-var">leftFaceOf</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (CPlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679251435"><span class="hs-identifier hs-var">ofD</span></a></span><span class="annot"><span class="annottext">(Indexed (FaceIdIn w s) f (Const (FaceIdIn w s, f) f)
 -&gt; CPlanarGraph w s v e f
 -&gt; Const (FaceIdIn w s, f) (CPlanarGraph w s v e f))
-&gt; (((FaceIdIn w s, f)
     -&gt; Const (FaceIdIn w s, f) (FaceIdIn w s, f))
    -&gt; Indexed (FaceIdIn w s) f (Const (FaceIdIn w s, f) f))
-&gt; Getting
     (FaceIdIn w s, f) (CPlanarGraph w s v e f) (FaceIdIn w s, f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">((FaceIdIn w s, f) -&gt; Const (FaceIdIn w s, f) (FaceIdIn w s, f))
-&gt; Indexed (FaceIdIn w s) f (Const (FaceIdIn w s, f) f)
forall i (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s j t.
(Indexable i p, Functor f) =&gt;
p (i, s) (f (j, t)) -&gt; Indexed i s (f t)
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Internal.Indexed.html#withIndex"><span class="hs-identifier hs-var">withIndex</span></a></span><span>
</span><span id="line-475"></span><span>
</span><span id="line-476"></span><span>    </span><span id="local-6989586621679251455"><span class="annot"><span class="annottext">mkFaceIdx :: Int -&gt; Maybe (ComponentId s, FaceIdIn w (Wrap s))
</span><a href="#local-6989586621679251455"><span class="hs-identifier hs-var hs-var">mkFaceIdx</span></a></span></span><span> </span><span id="local-6989586621679251471"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679251471"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679251471"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (ComponentId s, FaceIdIn w (Wrap s))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-477"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ComponentId s, FaceIdIn w (Wrap s))
-&gt; Maybe (ComponentId s, FaceIdIn w (Wrap s))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
forall {k} {s :: k}. ComponentId s
</span><a href="#local-6989586621679251442"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int -&gt; FaceIdIn w (Wrap s)
forall {k} (w' :: World) (s' :: k). Int -&gt; FaceIdIn w' s'
</span><a href="#local-6989586621679251460"><span class="hs-identifier hs-var">mkFaceId</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; FaceIdIn w (Wrap s))
-&gt; (Int -&gt; Int) -&gt; Int -&gt; FaceIdIn w (Wrap s)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621679251461"><span class="hs-identifier hs-var">flipID</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; FaceIdIn w (Wrap s)) -&gt; Int -&gt; FaceIdIn w (Wrap s)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679251471"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-478"></span><span>
</span><span id="line-479"></span><span>    </span><span class="hs-comment">-- at index i we are storing the outerface</span><span>
</span><span id="line-480"></span><span>    </span><span class="annot"><a href="#local-6989586621679251456"><span class="hs-identifier hs-type">mkFaceData</span></a></span><span>                        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679250313"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#FaceData"><span class="hs-identifier hs-type">FaceData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Dart.html#Dart"><span class="hs-identifier hs-type">Dart.Dart</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250310"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679250313"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-481"></span><span>    </span><span id="local-6989586621679251456"><span class="annot"><span class="annottext">mkFaceData :: Int -&gt; f -&gt; FaceData (Dart s) f
</span><a href="#local-6989586621679251456"><span class="hs-identifier hs-var hs-var">mkFaceData</span></a></span></span><span> </span><span id="local-6989586621679251472"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679251472"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679251473"><span class="annot"><span class="annottext">f
</span><a href="#local-6989586621679251473"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679251472"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Seq (Dart s) -&gt; f -&gt; FaceData (Dart s) f
forall h f. Seq h -&gt; f -&gt; FaceData h f
</span><a href="Hiraffe.PlanarGraph.Component.html#FaceData"><span class="hs-identifier hs-var">FaceData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dart s -&gt; Seq (Dart s)
forall a. a -&gt; Seq a
</span><span class="hs-identifier hs-var">Seq.singleton</span></span><span> </span><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679251435"><span class="hs-identifier hs-var">ofD</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">f
</span><a href="#local-6989586621679251469"><span class="hs-identifier hs-var">ofData</span></a></span><span>
</span><span id="line-482"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679251472"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FaceIdIn w s -&gt; Int
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">FaceIdIn w s
</span><a href="#local-6989586621679251468"><span class="hs-identifier hs-var">oF</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Seq (Dart s) -&gt; f -&gt; FaceData (Dart s) f
forall h f. Seq h -&gt; f -&gt; FaceData h f
</span><a href="Hiraffe.PlanarGraph.Component.html#FaceData"><span class="hs-identifier hs-var">FaceData</span></a></span><span> </span><span class="annot"><span class="annottext">Seq (Dart s)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
</span><a href="#local-6989586621679251434"><span class="hs-identifier hs-var">g</span></a></span><span class="annot"><span class="annottext">CPlanarGraph w s v e f
-&gt; Getting (Endo f) (CPlanarGraph w s v e f) f -&gt; f
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">FaceIx (CPlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (FaceIx (CPlanarGraph w s v e f))
     (CPlanarGraph w s v e f)
     (Face (CPlanarGraph w s v e f))
forall graph.
HasFaces' graph =&gt;
FaceIx graph -&gt; IndexedTraversal' (FaceIx graph) graph (Face graph)
</span><a href="Hiraffe.PlanarGraph.Class.html#faceAt"><span class="hs-identifier hs-var">faceAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (w' :: World) (s' :: k). Int -&gt; FaceIdIn w' s'
forall (w' :: World) (s' :: k). Int -&gt; FaceIdIn w' s'
</span><a href="#local-6989586621679251460"><span class="hs-identifier hs-var">mkFaceId</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679250310"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-483"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Seq (Dart s) -&gt; f -&gt; FaceData (Dart s) f
forall h f. Seq h -&gt; f -&gt; FaceData h f
</span><a href="Hiraffe.PlanarGraph.Component.html#FaceData"><span class="hs-identifier hs-var">FaceData</span></a></span><span> </span><span class="annot"><span class="annottext">Seq (Dart s)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>              </span><span class="annot"><span class="annottext">f
</span><a href="#local-6989586621679251473"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-484"></span><span>
</span><span id="line-485"></span><span>    </span><span class="annot"><a href="#local-6989586621679251460"><span class="hs-identifier hs-type">mkFaceId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679250391"><span class="annot"><a href="#local-6989586621679250391"><span class="hs-identifier hs-type">w'</span></a></span></span><span> </span><span id="local-6989586621679250392"><span class="annot"><a href="#local-6989586621679250392"><span class="hs-identifier hs-type">s'</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Connected.Core.html#FaceIdIn"><span class="hs-identifier hs-type">FaceIdIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250391"><span class="hs-identifier hs-type">w'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250392"><span class="hs-identifier hs-type">s'</span></a></span><span>
</span><span id="line-486"></span><span>    </span><span id="local-6989586621679251460"><span class="annot"><span class="annottext">mkFaceId :: forall {k} (w' :: World) (s' :: k). Int -&gt; FaceIdIn w' s'
</span><a href="#local-6989586621679251460"><span class="hs-identifier hs-var hs-var">mkFaceId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VertexIdIn (DualOf w') s' -&gt; FaceIdIn w' s'
forall k (w :: World) (s :: k).
VertexIdIn (DualOf w) s -&gt; FaceIdIn w s
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#FaceId"><span class="hs-identifier hs-var">FaceId</span></a></span><span> </span><span class="annot"><span class="annottext">(VertexIdIn (DualOf w') s' -&gt; FaceIdIn w' s')
-&gt; (Int -&gt; VertexIdIn (DualOf w') s') -&gt; Int -&gt; FaceIdIn w' s'
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; VertexIdIn (DualOf w') s'
forall k (w :: World) (s :: k). Int -&gt; VertexIdIn w s
</span><a href="Hiraffe.PlanarGraph.Connected.Core.html#VertexId"><span class="hs-identifier hs-var">VertexId</span></a></span><span>
</span><span id="line-487"></span><span>
</span><span id="line-488"></span><span>    </span><span id="local-6989586621679251461"><span class="annot"><span class="annottext">flipID :: Int -&gt; Int
</span><a href="#local-6989586621679251461"><span class="hs-identifier hs-var hs-var">flipID</span></a></span></span><span> </span><span id="local-6989586621679251477"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679251477"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679251477"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FaceIdIn w s -&gt; Int
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">FaceIdIn w s
</span><a href="#local-6989586621679251468"><span class="hs-identifier hs-var">oF</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-489"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679251477"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FaceIdIn w s -&gt; Int
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">FaceIdIn w s
</span><a href="#local-6989586621679251468"><span class="hs-identifier hs-var">oF</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-490"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679251477"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-491"></span><span>
</span><span id="line-492"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-493"></span><span class="annot"><span class="hs-comment">-- * The Planargraph_ instance</span></span><span>
</span><span id="line-494"></span><span>
</span><span id="line-495"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679251478"><span id="local-6989586621679251479"><span id="local-6989586621679251480"><span id="local-6989586621679251481"><span id="local-6989586621679251482"><span id="local-6989586621679251492"><span id="local-6989586621679251495"><span class="hs-special">(</span><span> </span><span class="hs-comment">-- PlanarGraph_ (Component s)</span><span>
</span><span id="line-496"></span><span>         </span><span class="hs-comment">-- , IsComponent s</span><span>
</span><span id="line-497"></span><span>         </span><span class="hs-comment">-- , EdgeIx   (Component s) ~ Dart.Dart (Wrap s)</span><span>
</span><span id="line-498"></span><span>         </span><span class="hs-comment">-- , Edge     (Component s) ~ Dart.Dart s</span><span>
</span><span id="line-499"></span><span>         </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#PlanarGraph_"><span class="hs-identifier hs-type">PlanarGraph_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251478"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251479"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251480"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251481"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251482"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-500"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="DualGraphOf"><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#DualGraphOf"><span class="hs-identifier hs-var">DualGraphOf</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251478"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251479"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251480"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251481"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251482"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#DualGraph"><span class="hs-identifier hs-type">DualGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251478"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251479"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251480"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251481"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251482"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-501"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="WorldOf"><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#WorldOf"><span class="hs-identifier hs-var">WorldOf</span></a></span></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251478"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251479"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251480"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251481"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251482"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679251478"><span class="hs-identifier hs-type">w</span></a></span><span>
</span><span id="line-502"></span><span>
</span><span id="line-503"></span><span>  </span><span id="local-6989586621679251503"><span class="annot"><span class="annottext">dualGraph :: PlanarGraph w s v e f -&gt; DualGraphOf (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251503"><span class="hs-identifier hs-var hs-var hs-var">dualGraph</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f -&gt; DualGraphOf (PlanarGraph w s v e f)
PlanarGraph w s v e f -&gt; DualGraph w s v e f
forall {k} (w :: World) (s :: k) v e f.
PlanarGraph w s v e f -&gt; DualGraph w s v e f
</span><a href="Hiraffe.PlanarGraph.Type.html#DualGraph"><span class="hs-identifier hs-var">DualGraph</span></a></span><span>
</span><span id="line-504"></span><span>  </span><span class="hs-comment">-- TODO: this does not really do anything useful yet</span><span>
</span><span id="line-505"></span><span>
</span><span id="line-506"></span><span>  </span><span id="local-6989586621679251512"><span class="annot"><span class="annottext">_DualFaceIx :: forall (proxy :: * -&gt; *).
proxy (PlanarGraph w s v e f)
-&gt; Iso'
     (VertexIx (PlanarGraph w s v e f))
     (FaceIx (DualGraphOf (PlanarGraph w s v e f)))
</span><a href="#local-6989586621679251512"><span class="hs-identifier hs-var hs-var hs-var">_DualFaceIx</span></a></span></span><span>     </span><span class="annot"><span class="annottext">proxy (PlanarGraph w s v e f)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">p (VertexId s) (f (VertexId s)) -&gt; p (VertexId s) (f (VertexId s))
p (FaceIx (DualGraphOf (PlanarGraph w s v e f)))
  (f (FaceIx (DualGraphOf (PlanarGraph w s v e f))))
-&gt; p (VertexIx (PlanarGraph w s v e f))
     (f (VertexIx (PlanarGraph w s v e f)))
forall s t a b. (Coercible s a, Coercible t b) =&gt; Iso s t a b
Iso (VertexId s) (VertexId s) (VertexId s) (VertexId s)
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Iso.html#coerced"><span class="hs-identifier hs-var">coerced</span></a></span><span>
</span><span id="line-507"></span><span>  </span><span id="local-6989586621679251521"><span class="annot"><span class="annottext">_DualVertexIx :: forall (proxy :: * -&gt; *).
proxy (PlanarGraph w s v e f)
-&gt; Iso'
     (FaceIx (PlanarGraph w s v e f))
     (VertexIx (DualGraphOf (PlanarGraph w s v e f)))
</span><a href="#local-6989586621679251521"><span class="hs-identifier hs-var hs-var hs-var">_DualVertexIx</span></a></span></span><span>   </span><span class="annot"><span class="annottext">proxy (PlanarGraph w s v e f)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">p (VertexIx (DualGraphOf (PlanarGraph w s v e f)))
  (f (VertexIx (DualGraphOf (PlanarGraph w s v e f))))
-&gt; p (FaceIx (PlanarGraph w s v e f))
     (f (FaceIx (PlanarGraph w s v e f)))
p (FaceId s) (f (FaceId s)) -&gt; p (FaceId s) (f (FaceId s))
forall s t a b. (Coercible s a, Coercible t b) =&gt; Iso s t a b
Iso (FaceId s) (FaceId s) (FaceId s) (FaceId s)
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Iso.html#coerced"><span class="hs-identifier hs-var">coerced</span></a></span><span>
</span><span id="line-508"></span><span>
</span><span id="line-509"></span><span>  </span><span id="local-6989586621679251538"><span class="annot"><span class="annottext">incidentFaceOf :: DartIx (PlanarGraph w s v e f)
-&gt; IndexedLens'
     (FaceIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Face (PlanarGraph w s v e f))
</span><a href="#local-6989586621679251538"><span class="hs-identifier hs-var hs-var hs-var">incidentFaceOf</span></a></span></span><span>  </span><span id="local-6989586621679251540"><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251540"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679251541"><span class="annot"><span class="annottext">p (Face (PlanarGraph w s v e f)) (f (Face (PlanarGraph w s v e f)))
</span><a href="#local-6989586621679251541"><span class="hs-identifier hs-var">pF</span></a></span></span><span> </span><span id="local-6989586621679251542"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251542"><span class="hs-identifier hs-var">gr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621679251543"><span class="annot"><span class="annottext">DartIx (Component w s)
</span><a href="#local-6989586621679251543"><span class="hs-identifier hs-var">d'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679251544"><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251544"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, DartIx (Component w s), Component w s)
forall {k} (w :: World) (s :: k) v e f.
DartIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, DartIx (Component w s), Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#asLocalD"><span class="hs-identifier hs-var">asLocalD</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251540"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251542"><span class="hs-identifier hs-var">gr</span></a></span><span>
</span><span id="line-510"></span><span>                                    </span><span id="local-6989586621679251545"><span class="annot"><span class="annottext">fi :: FaceId s
</span><a href="#local-6989586621679251545"><span class="hs-identifier hs-var hs-var">fi</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251544"><span class="hs-identifier hs-var">c</span></a></span><span class="annot"><span class="annottext">Component w s
-&gt; Getting (FaceId s) (Component w s) (FaceId s) -&gt; FaceId s
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">DartIx (Component w s)
-&gt; IndexedLens'
     (FaceIx (Component w s)) (Component w s) (Face (Component w s))
forall planarGraph.
PlanarGraph_ planarGraph =&gt;
DartIx planarGraph
-&gt; IndexedLens' (FaceIx planarGraph) planarGraph (Face planarGraph)
</span><a href="Hiraffe.PlanarGraph.Class.html#incidentFaceOf"><span class="hs-identifier hs-var">incidentFaceOf</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (Component w s)
</span><a href="#local-6989586621679251543"><span class="hs-identifier hs-var">d'</span></a></span><span>
</span><span id="line-511"></span><span>                                </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Traversing p f (PlanarGraph w s v e f) (PlanarGraph w s v e f) f f
-&gt; Over p f (PlanarGraph w s v e f) (PlanarGraph w s v e f) f f
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s t a.
(HasCallStack, Conjoined p, Functor f) =&gt;
Traversing p f s t a a -&gt; Over p f s t a a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Traversal.html#singular"><span class="hs-identifier hs-var">singular</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FaceIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (FaceIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Face (PlanarGraph w s v e f))
forall graph.
HasFaces' graph =&gt;
FaceIx graph -&gt; IndexedTraversal' (FaceIx graph) graph (Face graph)
</span><a href="Hiraffe.PlanarGraph.Class.html#faceAt"><span class="hs-identifier hs-var">faceAt</span></a></span><span> </span><span class="annot"><span class="annottext">FaceId s
FaceIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251545"><span class="hs-identifier hs-var">fi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">p f (f f)
p (Face (PlanarGraph w s v e f)) (f (Face (PlanarGraph w s v e f)))
</span><a href="#local-6989586621679251541"><span class="hs-identifier hs-var">pF</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251542"><span class="hs-identifier hs-var">gr</span></a></span><span>
</span><span id="line-512"></span><span>
</span><span id="line-513"></span><span>
</span><span id="line-514"></span><span>  </span><span id="local-6989586621679251561"><span class="annot"><span class="annottext">prevDartOf :: DartIx (PlanarGraph w s v e f)
-&gt; IndexedLens'
     (DartIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Dart (PlanarGraph w s v e f))
</span><a href="#local-6989586621679251561"><span class="hs-identifier hs-var hs-var hs-var">prevDartOf</span></a></span></span><span>      </span><span id="local-6989586621679251563"><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251563"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679251564"><span class="annot"><span class="annottext">p (Dart (PlanarGraph w s v e f)) (f (Dart (PlanarGraph w s v e f)))
</span><a href="#local-6989586621679251564"><span class="hs-identifier hs-var">pF</span></a></span></span><span> </span><span id="local-6989586621679251565"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251565"><span class="hs-identifier hs-var">gr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621679251566"><span class="annot"><span class="annottext">DartIx (Component w s)
</span><a href="#local-6989586621679251566"><span class="hs-identifier hs-var">d'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679251567"><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251567"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, DartIx (Component w s), Component w s)
forall {k} (w :: World) (s :: k) v e f.
DartIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, DartIx (Component w s), Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#asLocalD"><span class="hs-identifier hs-var">asLocalD</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251563"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251565"><span class="hs-identifier hs-var">gr</span></a></span><span>
</span><span id="line-515"></span><span>                                    </span><span id="local-6989586621679251568"><span class="annot"><span class="annottext">prevD :: Dart s
</span><a href="#local-6989586621679251568"><span class="hs-identifier hs-var hs-var">prevD</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251567"><span class="hs-identifier hs-var">c</span></a></span><span class="annot"><span class="annottext">Component w s
-&gt; Getting (Dart s) (Component w s) (Dart s) -&gt; Dart s
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">DartIx (Component w s)
-&gt; IndexedLens'
     (DartIx (Component w s)) (Component w s) (Dart (Component w s))
forall planarGraph.
PlanarGraph_ planarGraph =&gt;
DartIx planarGraph
-&gt; IndexedLens' (DartIx planarGraph) planarGraph (Dart planarGraph)
</span><a href="Hiraffe.PlanarGraph.Class.html#prevDartOf"><span class="hs-identifier hs-var">prevDartOf</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (Component w s)
</span><a href="#local-6989586621679251566"><span class="hs-identifier hs-var">d'</span></a></span><span>
</span><span id="line-516"></span><span>                                </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Traversing p f (PlanarGraph w s v e f) (PlanarGraph w s v e f) e e
-&gt; Over p f (PlanarGraph w s v e f) (PlanarGraph w s v e f) e e
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s t a.
(HasCallStack, Conjoined p, Functor f) =&gt;
Traversing p f s t a a -&gt; Over p f s t a a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Traversal.html#singular"><span class="hs-identifier hs-var">singular</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (DartIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Dart (PlanarGraph w s v e f))
forall graph.
HasDarts' graph =&gt;
DartIx graph -&gt; IndexedTraversal' (DartIx graph) graph (Dart graph)
</span><a href="Hiraffe.Graph.Class.html#dartAt"><span class="hs-identifier hs-var">dartAt</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679251568"><span class="hs-identifier hs-var">prevD</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">p e (f e)
p (Dart (PlanarGraph w s v e f)) (f (Dart (PlanarGraph w s v e f)))
</span><a href="#local-6989586621679251564"><span class="hs-identifier hs-var">pF</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251565"><span class="hs-identifier hs-var">gr</span></a></span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span>  </span><span id="local-6989586621679251584"><span class="annot"><span class="annottext">nextDartOf :: DartIx (PlanarGraph w s v e f)
-&gt; IndexedLens'
     (DartIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Dart (PlanarGraph w s v e f))
</span><a href="#local-6989586621679251584"><span class="hs-identifier hs-var hs-var hs-var">nextDartOf</span></a></span></span><span>      </span><span id="local-6989586621679251586"><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251586"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679251587"><span class="annot"><span class="annottext">p (Dart (PlanarGraph w s v e f)) (f (Dart (PlanarGraph w s v e f)))
</span><a href="#local-6989586621679251587"><span class="hs-identifier hs-var">pF</span></a></span></span><span> </span><span id="local-6989586621679251588"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251588"><span class="hs-identifier hs-var">gr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621679251589"><span class="annot"><span class="annottext">DartIx (Component w s)
</span><a href="#local-6989586621679251589"><span class="hs-identifier hs-var">d'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679251590"><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251590"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, DartIx (Component w s), Component w s)
forall {k} (w :: World) (s :: k) v e f.
DartIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, DartIx (Component w s), Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#asLocalD"><span class="hs-identifier hs-var">asLocalD</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251586"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251588"><span class="hs-identifier hs-var">gr</span></a></span><span>
</span><span id="line-519"></span><span>                                    </span><span id="local-6989586621679251591"><span class="annot"><span class="annottext">nextD :: Dart s
</span><a href="#local-6989586621679251591"><span class="hs-identifier hs-var hs-var">nextD</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251590"><span class="hs-identifier hs-var">c</span></a></span><span class="annot"><span class="annottext">Component w s
-&gt; Getting (Dart s) (Component w s) (Dart s) -&gt; Dart s
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">DartIx (Component w s)
-&gt; IndexedLens'
     (DartIx (Component w s)) (Component w s) (Dart (Component w s))
forall planarGraph.
PlanarGraph_ planarGraph =&gt;
DartIx planarGraph
-&gt; IndexedLens' (DartIx planarGraph) planarGraph (Dart planarGraph)
</span><a href="Hiraffe.PlanarGraph.Class.html#nextDartOf"><span class="hs-identifier hs-var">nextDartOf</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (Component w s)
</span><a href="#local-6989586621679251589"><span class="hs-identifier hs-var">d'</span></a></span><span>
</span><span id="line-520"></span><span>                                </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Traversing p f (PlanarGraph w s v e f) (PlanarGraph w s v e f) e e
-&gt; Over p f (PlanarGraph w s v e f) (PlanarGraph w s v e f) e e
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s t a.
(HasCallStack, Conjoined p, Functor f) =&gt;
Traversing p f s t a a -&gt; Over p f s t a a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Traversal.html#singular"><span class="hs-identifier hs-var">singular</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (DartIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Dart (PlanarGraph w s v e f))
forall graph.
HasDarts' graph =&gt;
DartIx graph -&gt; IndexedTraversal' (DartIx graph) graph (Dart graph)
</span><a href="Hiraffe.Graph.Class.html#dartAt"><span class="hs-identifier hs-var">dartAt</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679251591"><span class="hs-identifier hs-var">nextD</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">p e (f e)
p (Dart (PlanarGraph w s v e f)) (f (Dart (PlanarGraph w s v e f)))
</span><a href="#local-6989586621679251587"><span class="hs-identifier hs-var">pF</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251588"><span class="hs-identifier hs-var">gr</span></a></span><span>
</span><span id="line-521"></span><span>
</span><span id="line-522"></span><span>  </span><span id="local-6989586621679251627"><span class="annot"><span class="annottext">boundaryDartOf :: FaceIx (PlanarGraph w s v e f)
-&gt; IndexedLens'
     (DartIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Dart (PlanarGraph w s v e f))
</span><a href="#local-6989586621679251627"><span class="hs-identifier hs-var hs-var hs-var">boundaryDartOf</span></a></span></span><span> </span><span id="local-6989586621679251629"><span class="annot"><span class="annottext">FaceIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251629"><span class="hs-identifier hs-var">fi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679251630"><span class="annot"><span class="annottext">p (Dart (PlanarGraph w s v e f)) (f (Dart (PlanarGraph w s v e f)))
</span><a href="#local-6989586621679251630"><span class="hs-identifier hs-var">pF</span></a></span></span><span> </span><span id="local-6989586621679251631"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251631"><span class="hs-identifier hs-var">gr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679251632"><span class="annot"><span class="annottext">d :: DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251632"><span class="hs-identifier hs-var hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f -&gt; DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251633"><span class="hs-identifier hs-var">computeD</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251631"><span class="hs-identifier hs-var">gr</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Traversing p f (PlanarGraph w s v e f) (PlanarGraph w s v e f) e e
-&gt; Over p f (PlanarGraph w s v e f) (PlanarGraph w s v e f) e e
forall (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s t a.
(HasCallStack, Conjoined p, Functor f) =&gt;
Traversing p f s t a a -&gt; Over p f s t a a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Traversal.html#singular"><span class="hs-identifier hs-var">singular</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (DartIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Dart (PlanarGraph w s v e f))
forall graph.
HasDarts' graph =&gt;
DartIx graph -&gt; IndexedTraversal' (DartIx graph) graph (Dart graph)
</span><a href="Hiraffe.Graph.Class.html#dartAt"><span class="hs-identifier hs-var">dartAt</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251632"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">p e (f e)
p (Dart (PlanarGraph w s v e f)) (f (Dart (PlanarGraph w s v e f)))
</span><a href="#local-6989586621679251630"><span class="hs-identifier hs-var">pF</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251631"><span class="hs-identifier hs-var">gr</span></a></span><span>
</span><span id="line-523"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-524"></span><span>      </span><span class="annot"><a href="#local-6989586621679251633"><span class="hs-identifier hs-type">computeD</span></a></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251478"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251479"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251480"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251481"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251482"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#DartIx"><span class="hs-identifier hs-type">DartIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251478"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251479"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251480"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251481"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679251482"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-525"></span><span>      </span><span id="local-6989586621679251633"><span class="annot"><span class="annottext">computeD :: PlanarGraph w s v e f -&gt; DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251633"><span class="hs-identifier hs-var hs-var">computeD</span></a></span></span><span> </span><span id="local-6989586621679251634"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251634"><span class="hs-identifier hs-var">gr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Component.html#RawFace"><span class="hs-identifier hs-type">RawFace</span></a></span><span> </span><span id="local-6989586621679251635"><span class="annot"><span class="annottext">Maybe (ComponentId s, FaceIdIn w (Wrap s))
</span><a href="#local-6989586621679251635"><span class="hs-identifier hs-var">theFaceIdx</span></a></span></span><span> </span><span id="local-6989586621679251636"><span class="annot"><span class="annottext">FaceData (Dart s) f
</span><a href="#local-6989586621679251636"><span class="hs-identifier hs-var">fd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251634"><span class="hs-identifier hs-var">gr</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting
     (Endo (RawFace w s f)) (PlanarGraph w s v e f) (RawFace w s f)
-&gt; RawFace w s f
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">(NonEmptyVector (RawFace w s f)
 -&gt; Const (Endo (RawFace w s f)) (NonEmptyVector (RawFace w s f)))
-&gt; PlanarGraph w s v e f
-&gt; Const (Endo (RawFace w s f)) (PlanarGraph w s v e f)
forall {k} (w :: World) (s :: k) v e f f' (f :: * -&gt; *).
Functor f =&gt;
(NonEmptyVector (RawFace w s f)
 -&gt; f (NonEmptyVector (RawFace w s f')))
-&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f')
</span><a href="Hiraffe.PlanarGraph.Type.html#rawFaceData"><span class="hs-identifier hs-var">rawFaceData</span></a></span><span class="annot"><span class="annottext">((NonEmptyVector (RawFace w s f)
  -&gt; Const (Endo (RawFace w s f)) (NonEmptyVector (RawFace w s f)))
 -&gt; PlanarGraph w s v e f
 -&gt; Const (Endo (RawFace w s f)) (PlanarGraph w s v e f))
-&gt; ((RawFace w s f -&gt; Const (Endo (RawFace w s f)) (RawFace w s f))
    -&gt; NonEmptyVector (RawFace w s f)
    -&gt; Const (Endo (RawFace w s f)) (NonEmptyVector (RawFace w s f)))
-&gt; Getting
     (Endo (RawFace w s f)) (PlanarGraph w s v e f) (RawFace w s f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">Index (NonEmptyVector (RawFace w s f))
-&gt; Traversal'
     (NonEmptyVector (RawFace w s f))
     (IxValue (NonEmptyVector (RawFace w s f)))
forall m. Ixed m =&gt; Index m -&gt; Traversal' m (IxValue m)
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.At.html#ix"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FaceId s -&gt; Int
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">FaceId s
FaceIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251629"><span class="hs-identifier hs-var">fi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-526"></span><span>                    </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (ComponentId s, FaceIdIn w (Wrap s))
</span><a href="#local-6989586621679251635"><span class="hs-identifier hs-var">theFaceIdx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-527"></span><span>                         </span><span class="annot"><span class="annottext">Maybe (ComponentId s, FaceIdIn w (Wrap s))
</span><span class="hs-identifier hs-var">Nothing</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FaceData (Dart s) f
</span><a href="#local-6989586621679251636"><span class="hs-identifier hs-var">fd</span></a></span><span class="annot"><span class="annottext">FaceData (Dart s) f
-&gt; Getting (Endo (Dart s)) (FaceData (Dart s) f) (Dart s) -&gt; Dart s
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">(Seq (Dart s) -&gt; Const (Endo (Dart s)) (Seq (Dart s)))
-&gt; FaceData (Dart s) f
-&gt; Const (Endo (Dart s)) (FaceData (Dart s) f)
forall h f1 h' (f2 :: * -&gt; *).
Functor f2 =&gt;
(Seq h -&gt; f2 (Seq h')) -&gt; FaceData h f1 -&gt; f2 (FaceData h' f1)
</span><a href="Hiraffe.PlanarGraph.Component.html#holes"><span class="hs-identifier hs-var">holes</span></a></span><span class="annot"><span class="annottext">((Seq (Dart s) -&gt; Const (Endo (Dart s)) (Seq (Dart s)))
 -&gt; FaceData (Dart s) f
 -&gt; Const (Endo (Dart s)) (FaceData (Dart s) f))
-&gt; ((Dart s -&gt; Const (Endo (Dart s)) (Dart s))
    -&gt; Seq (Dart s) -&gt; Const (Endo (Dart s)) (Seq (Dart s)))
-&gt; Getting (Endo (Dart s)) (FaceData (Dart s) f) (Dart s)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">(Dart s -&gt; Const (Endo (Dart s)) (Dart s))
-&gt; Seq (Dart s) -&gt; Const (Endo (Dart s)) (Seq (Dart s))
forall s a. Cons s s a a =&gt; Traversal' s a
Traversal' (Seq (Dart s)) (Dart s)
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Cons.html#_head"><span class="hs-identifier hs-var">_head</span></a></span><span>
</span><span id="line-528"></span><span>                         </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679251638"><span class="annot"><span class="annottext">ComponentId s
</span><a href="#local-6989586621679251638"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679251639"><span class="annot"><span class="annottext">FaceIdIn w (Wrap s)
</span><a href="#local-6989586621679251639"><span class="hs-identifier hs-var">fi'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251634"><span class="hs-identifier hs-var">gr</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting (Endo (Dart s)) (PlanarGraph w s v e f) (Dart s)
-&gt; Dart s
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">ConnectedComponentIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (ConnectedComponentIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (ConnectedComponent (PlanarGraph w s v e f))
forall graph.
HasConnectedComponents' graph =&gt;
ConnectedComponentIx graph
-&gt; IndexedTraversal'
     (ConnectedComponentIx graph) graph (ConnectedComponent graph)
</span><a href="Hiraffe.Graph.Component.html#connectedComponentAt"><span class="hs-identifier hs-var">connectedComponentAt</span></a></span><span> </span><span class="annot"><span class="annottext">ConnectedComponentIx (PlanarGraph w s v e f)
ComponentId s
</span><a href="#local-6989586621679251638"><span class="hs-identifier hs-var">c</span></a></span><span class="annot"><span class="annottext">((Component w s -&gt; Const (Endo (Dart s)) (Component w s))
 -&gt; PlanarGraph w s v e f
 -&gt; Const (Endo (Dart s)) (PlanarGraph w s v e f))
-&gt; ((Dart s -&gt; Const (Endo (Dart s)) (Dart s))
    -&gt; Component w s -&gt; Const (Endo (Dart s)) (Component w s))
-&gt; Getting (Endo (Dart s)) (PlanarGraph w s v e f) (Dart s)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">FaceIx (Component w s)
-&gt; IndexedLens'
     (DartIx (Component w s)) (Component w s) (Dart (Component w s))
forall planarGraph.
PlanarGraph_ planarGraph =&gt;
FaceIx planarGraph
-&gt; IndexedLens' (DartIx planarGraph) planarGraph (Dart planarGraph)
</span><a href="Hiraffe.PlanarGraph.Class.html#boundaryDartOf"><span class="hs-identifier hs-var">boundaryDartOf</span></a></span><span> </span><span class="annot"><span class="annottext">FaceIdIn w (Wrap s)
FaceIx (Component w s)
</span><a href="#local-6989586621679251639"><span class="hs-identifier hs-var">fi'</span></a></span><span>
</span><span id="line-529"></span><span>
</span><span id="line-530"></span><span>  </span><span id="local-6989586621679251668"><span class="annot"><span class="annottext">boundaryDartsFrom :: DartIx (PlanarGraph w s v e f)
-&gt; IndexedFold1
     (DartIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Dart (PlanarGraph w s v e f))
</span><a href="#local-6989586621679251668"><span class="hs-identifier hs-var hs-var hs-var">boundaryDartsFrom</span></a></span></span><span> </span><span id="local-6989586621679251670"><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251670"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph w s v e f
 -&gt; NonEmptyVector (Dart s, Dart (PlanarGraph w s v e f)))
-&gt; Over
     p
     f
     (PlanarGraph w s v e f)
     (PlanarGraph w s v e f)
     (Dart (PlanarGraph w s v e f))
     (Dart (PlanarGraph w s v e f))
forall (f :: * -&gt; *) i (p :: * -&gt; * -&gt; *) (g :: * -&gt; *) s a t b.
(Foldable1 f, Indexable i p, Contravariant g, Apply g) =&gt;
(s -&gt; f (i, a)) -&gt; Over p g s t a b
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/hgeometry-combinatorial-1.0.0.0-d1b59c766a15869585793b226dff88089219927f1e799132df872bb52ece3bd3/share/doc/html/src/HGeometry.Lens.Util.html#ifolding1"><span class="hs-identifier hs-var">ifolding1</span></a></span><span> </span><span class="annot"><span class="annottext">((PlanarGraph w s v e f
  -&gt; NonEmptyVector (Dart s, Dart (PlanarGraph w s v e f)))
 -&gt; Over
      p
      f
      (PlanarGraph w s v e f)
      (PlanarGraph w s v e f)
      (Dart (PlanarGraph w s v e f))
      (Dart (PlanarGraph w s v e f)))
-&gt; (PlanarGraph w s v e f
    -&gt; NonEmptyVector (Dart s, Dart (PlanarGraph w s v e f)))
-&gt; Over
     p
     f
     (PlanarGraph w s v e f)
     (PlanarGraph w s v e f)
     (Dart (PlanarGraph w s v e f))
     (Dart (PlanarGraph w s v e f))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679251672"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251672"><span class="hs-identifier hs-var">gr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-531"></span><span>                           </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ComponentId s
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621679251673"><span class="annot"><span class="annottext">DartIx (Component w s)
</span><a href="#local-6989586621679251673"><span class="hs-identifier hs-var">dLocal</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679251674"><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251674"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, DartIx (Component w s), Component w s)
forall {k} (w :: World) (s :: k) v e f.
DartIx (PlanarGraph w s v e f)
-&gt; PlanarGraph w s v e f
-&gt; (ComponentId s, DartIx (Component w s), Component w s)
</span><a href="Hiraffe.PlanarGraph.Type.html#asLocalD"><span class="hs-identifier hs-var">asLocalD</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251670"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251672"><span class="hs-identifier hs-var">gr</span></a></span><span>
</span><span id="line-532"></span><span>                           </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679251675"><span class="annot"><span class="annottext">Dart s
</span><a href="#local-6989586621679251675"><span class="hs-identifier hs-var">d'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251672"><span class="hs-identifier hs-var">gr</span></a></span><span class="annot"><span class="annottext">PlanarGraph w s v e f
-&gt; Getting (Endo (Dart s, e)) (PlanarGraph w s v e f) (Dart s, e)
-&gt; (Dart s, e)
forall s a. HasCallStack =&gt; s -&gt; Getting (Endo a) s a -&gt; a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Fold.html#%5E%3F%21"><span class="hs-operator hs-var">^?!</span></a></span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (DartIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Dart (PlanarGraph w s v e f))
forall graph.
HasDarts' graph =&gt;
DartIx graph -&gt; IndexedTraversal' (DartIx graph) graph (Dart graph)
</span><a href="Hiraffe.Graph.Class.html#dartAt"><span class="hs-identifier hs-var">dartAt</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (PlanarGraph w s v e f)
Dart s
</span><a href="#local-6989586621679251675"><span class="hs-identifier hs-var">d'</span></a></span><span class="annot"><span class="annottext">(Indexed (Dart s) e (Const (Endo (Dart s, e)) e)
 -&gt; PlanarGraph w s v e f
 -&gt; Const (Endo (Dart s, e)) (PlanarGraph w s v e f))
-&gt; (((Dart s, e) -&gt; Const (Endo (Dart s, e)) (Dart s, e))
    -&gt; Indexed (Dart s) e (Const (Endo (Dart s, e)) e))
-&gt; Getting (Endo (Dart s, e)) (PlanarGraph w s v e f) (Dart s, e)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">((Dart s, e) -&gt; Const (Endo (Dart s, e)) (Dart s, e))
-&gt; Indexed (Dart s) e (Const (Endo (Dart s, e)) e)
forall i (p :: * -&gt; * -&gt; *) (f :: * -&gt; *) s j t.
(Indexable i p, Functor f) =&gt;
p (i, s) (f (j, t)) -&gt; Indexed i s (f t)
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Internal.Indexed.html#withIndex"><span class="hs-identifier hs-var">withIndex</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Dart s -&gt; (Dart s, e))
-&gt; NonEmptyVector (Dart s) -&gt; NonEmptyVector (Dart s, e)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span>
</span><span id="line-533"></span><span>                              </span><span class="annot"><span class="annottext">Getting (Builder (Dart s)) (Component w s) (Dart s)
-&gt; Component w s -&gt; NonEmptyVector (Dart s)
forall a s. Getting (Builder a) s a -&gt; s -&gt; NonEmptyVector a
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/hgeometry-combinatorial-1.0.0.0-d1b59c766a15869585793b226dff88089219927f1e799132df872bb52ece3bd3/share/doc/html/src/HGeometry.Lens.Util.html#toNonEmptyVectorOf"><span class="hs-identifier hs-var">toNonEmptyVectorOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DartIx (Component w s)
-&gt; IndexedFold1
     (DartIx (Component w s)) (Component w s) (Dart (Component w s))
forall planarGraph.
PlanarGraph_ planarGraph =&gt;
DartIx planarGraph
-&gt; IndexedFold1 (DartIx planarGraph) planarGraph (Dart planarGraph)
</span><a href="Hiraffe.PlanarGraph.Class.html#boundaryDartsFrom"><span class="hs-identifier hs-var">boundaryDartsFrom</span></a></span><span> </span><span class="annot"><span class="annottext">DartIx (Component w s)
</span><a href="#local-6989586621679251673"><span class="hs-identifier hs-var">dLocal</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Component w s
</span><a href="#local-6989586621679251674"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-534"></span><span>
</span><span id="line-535"></span><span class="hs-comment">----------------------------------------</span><span>
</span><span id="line-536"></span><span class="annot"><span class="hs-comment">-- * Our temporary type for representing a dual graph.</span></span><span>
</span><span id="line-537"></span><span>
</span><span id="line-538"></span><span class="annot"><span class="hs-comment">-- | FIXME: This should do something useful rather than just wrap the original graph.</span></span><span>
</span><span id="line-539"></span><span class="hs-keyword">newtype</span><span> </span><span id="DualGraph"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#DualGraph"><span class="hs-identifier hs-var">DualGraph</span></a></span></span><span> </span><span id="local-6989586621679250423"><span class="annot"><a href="#local-6989586621679250423"><span class="hs-identifier hs-type">w</span></a></span></span><span> </span><span id="local-6989586621679250424"><span class="annot"><a href="#local-6989586621679250424"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679250425"><span class="annot"><a href="#local-6989586621679250425"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621679250426"><span class="annot"><a href="#local-6989586621679250426"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span id="local-6989586621679250427"><span class="annot"><a href="#local-6989586621679250427"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DualGraph"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#DualGraph"><span class="hs-identifier hs-var">DualGraph</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250423"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250424"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250425"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250426"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250427"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-540"></span><span>
</span><span id="line-541"></span><span id="local-6989586621679250472"><span id="local-6989586621679250473"><span id="local-6989586621679250474"><span id="local-6989586621679250475"><span id="local-6989586621679250476"><span id="local-6989586621679250477"><span id="local-6989586621679250478"><span id="local-6989586621679250479"><span id="local-6989586621679250480"><span id="local-6989586621679250481"><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#_DualGraph"><span class="hs-identifier hs-type">_DualGraph</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Type.html#Iso"><span class="hs-identifier hs-type">Iso</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#DualGraph"><span class="hs-identifier hs-type">DualGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250472"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250473"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250474"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250475"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250476"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#DualGraph"><span class="hs-identifier hs-type">DualGraph</span></a></span><span>   </span><span class="annot"><a href="#local-6989586621679250477"><span class="hs-identifier hs-type">w'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250478"><span class="hs-identifier hs-type">s'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250479"><span class="hs-identifier hs-type">v'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250480"><span class="hs-identifier hs-type">e'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250481"><span class="hs-identifier hs-type">f'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-542"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250472"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250473"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250474"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250475"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250476"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250477"><span class="hs-identifier hs-type">w'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250478"><span class="hs-identifier hs-type">s'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250479"><span class="hs-identifier hs-type">v'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250480"><span class="hs-identifier hs-type">e'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250481"><span class="hs-identifier hs-type">f'</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-543"></span><span id="_DualGraph"><span class="annot"><span class="annottext">_DualGraph :: forall {k} {k} (w :: World) (s :: k) v e f (w' :: World) (s' :: k)
       v' e' f' (p :: * -&gt; * -&gt; *) (f :: * -&gt; *).
(Profunctor p, Functor f) =&gt;
p (PlanarGraph w s v e f) (f (PlanarGraph w' s' v' e' f'))
-&gt; p (DualGraph w s v e f) (f (DualGraph w' s' v' e' f'))
</span><a href="Hiraffe.PlanarGraph.Type.html#_DualGraph"><span class="hs-identifier hs-var hs-var">_DualGraph</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">p (PlanarGraph w s v e f) (f (PlanarGraph w' s' v' e' f'))
-&gt; p (DualGraph w s v e f) (f (DualGraph w' s' v' e' f'))
forall s t a b. (Coercible s a, Coercible t b) =&gt; Iso s t a b
Iso
  (DualGraph w s v e f)
  (DualGraph w' s' v' e' f')
  (PlanarGraph w s v e f)
  (PlanarGraph w' s' v' e' f')
</span><a href="file:///home/runner/.cabal/store/ghc-9.12.2-9b33/lens-5.3.6-ed0dbef5de96802c7fbae2f124f402b45beb5064dbf8a893ca63d112261dd7d7/share/doc/html/src/Control.Lens.Iso.html#coerced"><span class="hs-identifier hs-var">coerced</span></a></span><span>
</span><span id="line-544"></span><span>
</span><span id="line-545"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679250503"><span id="local-6989586621679250504"><span id="local-6989586621679250505"><span id="local-6989586621679250506"><span id="local-6989586621679250507"><span class="annot"><a href="Hiraffe.Graph.Class.html#HasVertices%27"><span class="hs-identifier hs-type">HasVertices'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#DualGraph"><span class="hs-identifier hs-type">DualGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250503"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250504"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250505"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250506"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250507"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-546"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="VertexIx"><span class="annot"><a href="Hiraffe.Graph.Class.html#VertexIx"><span class="hs-identifier hs-var">VertexIx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#DualGraph"><span class="hs-identifier hs-type">DualGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250503"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250504"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250505"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250506"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250507"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#FaceIx"><span class="hs-identifier hs-type">FaceIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250503"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250504"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250505"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250506"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250507"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-547"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Vertex"><span class="annot"><a href="Hiraffe.Graph.Class.html#Vertex"><span class="hs-identifier hs-var">Vertex</span></a></span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#DualGraph"><span class="hs-identifier hs-type">DualGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250503"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250504"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250505"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250506"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250507"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#Face"><span class="hs-identifier hs-type">Face</span></a></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250503"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250504"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250505"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250506"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250507"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-548"></span><span>  </span><span id="local-6989586621679251696"><span class="annot"><span class="annottext">vertexAt :: VertexIx (DualGraph w s v e f)
-&gt; IndexedTraversal'
     (VertexIx (DualGraph w s v e f))
     (DualGraph w s v e f)
     (Vertex (DualGraph w s v e f))
</span><a href="Hiraffe.Graph.Class.html#vertexAt"><span class="hs-identifier hs-var hs-var hs-var">vertexAt</span></a></span></span><span> </span><span id="local-6989586621679251697"><span class="annot"><span class="annottext">VertexIx (DualGraph w s v e f)
</span><a href="#local-6989586621679251697"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; DualGraph w s v e f -&gt; f (DualGraph w s v e f)
forall {k} {k} (w :: World) (s :: k) v e f (w' :: World) (s' :: k)
       v' e' f' (p :: * -&gt; * -&gt; *) (f :: * -&gt; *).
(Profunctor p, Functor f) =&gt;
p (PlanarGraph w s v e f) (f (PlanarGraph w' s' v' e' f'))
-&gt; p (DualGraph w s v e f) (f (DualGraph w' s' v' e' f'))
</span><a href="Hiraffe.PlanarGraph.Type.html#_DualGraph"><span class="hs-identifier hs-var">_DualGraph</span></a></span><span class="annot"><span class="annottext">((PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
 -&gt; DualGraph w s v e f -&gt; f (DualGraph w s v e f))
-&gt; (p f (f f)
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; p f (f f)
-&gt; DualGraph w s v e f
-&gt; f (DualGraph w s v e f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">FaceIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (FaceIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Face (PlanarGraph w s v e f))
forall graph.
HasFaces' graph =&gt;
FaceIx graph -&gt; IndexedTraversal' (FaceIx graph) graph (Face graph)
</span><a href="Hiraffe.PlanarGraph.Class.html#faceAt"><span class="hs-identifier hs-var">faceAt</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (DualGraph w s v e f)
FaceIx (PlanarGraph w s v e f)
</span><a href="#local-6989586621679251697"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-549"></span><span>  </span><span id="local-6989586621679251699"><span class="annot"><span class="annottext">numVertices :: DualGraph w s v e f -&gt; Int
</span><a href="Hiraffe.Graph.Class.html#numVertices"><span class="hs-identifier hs-var hs-var hs-var">numVertices</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#DualGraph"><span class="hs-identifier hs-type">DualGraph</span></a></span><span> </span><span id="local-6989586621679251700"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251700"><span class="hs-identifier hs-var">gr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f -&gt; Int
forall graph. HasVertices' graph =&gt; graph -&gt; Int
</span><a href="Hiraffe.Graph.Class.html#numVertices"><span class="hs-identifier hs-var">numVertices</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251700"><span class="hs-identifier hs-var">gr</span></a></span><span>
</span><span id="line-550"></span><span>
</span><span id="line-551"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679250517"><span id="local-6989586621679250518"><span id="local-6989586621679250519"><span id="local-6989586621679250520"><span id="local-6989586621679250521"><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#HasFaces%27"><span class="hs-identifier hs-type">HasFaces'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#DualGraph"><span class="hs-identifier hs-type">DualGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250517"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250518"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250519"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250520"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250521"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-552"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="FaceIx"><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#FaceIx"><span class="hs-identifier hs-var">FaceIx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#DualGraph"><span class="hs-identifier hs-type">DualGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250517"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250518"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250519"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250520"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250521"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#VertexIx"><span class="hs-identifier hs-type">VertexIx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250517"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250518"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250519"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250520"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250521"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-553"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Face"><span class="annot"><a href="Hiraffe.PlanarGraph.Class.html#Face"><span class="hs-identifier hs-var">Face</span></a></span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#DualGraph"><span class="hs-identifier hs-type">DualGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250517"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250518"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250519"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250520"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250521"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hiraffe.Graph.Class.html#Vertex"><span class="hs-identifier hs-type">Vertex</span></a></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#PlanarGraph"><span class="hs-identifier hs-type">PlanarGraph</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250517"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250518"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250519"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250520"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679250521"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-554"></span><span>  </span><span id="local-6989586621679251713"><span class="annot"><span class="annottext">faceAt :: FaceIx (DualGraph w s v e f)
-&gt; IndexedTraversal'
     (FaceIx (DualGraph w s v e f))
     (DualGraph w s v e f)
     (Face (DualGraph w s v e f))
</span><a href="Hiraffe.PlanarGraph.Class.html#faceAt"><span class="hs-identifier hs-var hs-var hs-var">faceAt</span></a></span></span><span> </span><span id="local-6989586621679251714"><span class="annot"><span class="annottext">FaceIx (DualGraph w s v e f)
</span><a href="#local-6989586621679251714"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; DualGraph w s v e f -&gt; f (DualGraph w s v e f)
forall {k} {k} (w :: World) (s :: k) v e f (w' :: World) (s' :: k)
       v' e' f' (p :: * -&gt; * -&gt; *) (f :: * -&gt; *).
(Profunctor p, Functor f) =&gt;
p (PlanarGraph w s v e f) (f (PlanarGraph w' s' v' e' f'))
-&gt; p (DualGraph w s v e f) (f (DualGraph w' s' v' e' f'))
</span><a href="Hiraffe.PlanarGraph.Type.html#_DualGraph"><span class="hs-identifier hs-var">_DualGraph</span></a></span><span class="annot"><span class="annottext">((PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
 -&gt; DualGraph w s v e f -&gt; f (DualGraph w s v e f))
-&gt; (p v (f v)
    -&gt; PlanarGraph w s v e f -&gt; f (PlanarGraph w s v e f))
-&gt; p v (f v)
-&gt; DualGraph w s v e f
-&gt; f (DualGraph w s v e f)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
-&gt; IndexedTraversal'
     (VertexIx (PlanarGraph w s v e f))
     (PlanarGraph w s v e f)
     (Vertex (PlanarGraph w s v e f))
forall graph.
HasVertices' graph =&gt;
VertexIx graph
-&gt; IndexedTraversal' (VertexIx graph) graph (Vertex graph)
</span><a href="Hiraffe.Graph.Class.html#vertexAt"><span class="hs-identifier hs-var">vertexAt</span></a></span><span> </span><span class="annot"><span class="annottext">VertexIx (PlanarGraph w s v e f)
FaceIx (DualGraph w s v e f)
</span><a href="#local-6989586621679251714"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-555"></span><span>  </span><span id="local-6989586621679251716"><span class="annot"><span class="annottext">numFaces :: DualGraph w s v e f -&gt; Int
</span><a href="Hiraffe.PlanarGraph.Class.html#numFaces"><span class="hs-identifier hs-var hs-var hs-var">numFaces</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hiraffe.PlanarGraph.Type.html#DualGraph"><span class="hs-identifier hs-type">DualGraph</span></a></span><span> </span><span id="local-6989586621679251717"><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251717"><span class="hs-identifier hs-var">gr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f -&gt; Int
forall graph. HasFaces' graph =&gt; graph -&gt; Int
</span><a href="Hiraffe.PlanarGraph.Class.html#numFaces"><span class="hs-identifier hs-var">numFaces</span></a></span><span> </span><span class="annot"><span class="annottext">PlanarGraph w s v e f
</span><a href="#local-6989586621679251717"><span class="hs-identifier hs-var">gr</span></a></span><span>
</span><span id="line-556"></span><span>
</span><span id="line-557"></span><span class="hs-comment">{-

data DualGraph w s v e f =
  DualGraph { _dualGraph :: MapRep.Graph (FaceIx (PlanarGraph w s v e f))
                                         f
                                         (DartIx (PlanarGraph w s v e f),e)
            , _primalGraph :: PlanarGraph w s v e f
            } deriving (Show,Eq)

-}</span><span>
</span><span id="line-567"></span><span>
</span><span id="line-568"></span><span class="hs-comment">----------------------------------------</span><span>
</span><span id="line-569"></span><span class="annot"><span class="hs-comment">-- * Computing an actual dual graph.</span></span><span>
</span><span id="line-570"></span><span>
</span><span id="line-571"></span><span class="hs-comment">{- TODO: This is a partial implementation; the main issue is sthat we don't quite know
-- how to represent it all that well

-- | Computes the dual graph. Every edge in the primal corresponds to an edge in this dual graph.
--
computeDualGraph    :: forall w s v e f. PlanarGraph w s v e f
                    -&gt; MapRep.Graph (FaceIx (PlanarGraph w s v e f))
                                    f
                                    (DartIx (PlanarGraph w s v e f),e)
computeDualGraph ps = g
  where
    g = fromAdjacencyLists
      . NonEmptyV.imap (\i -&gt; fromFace (coerce i)) $ _rawFaceData ps
    fromFace :: FaceIx (PlanarGraph w s v e f) -&gt; RawFace w s f
             -&gt; ( FaceIx (PlanarGraph w s v e f)
                , f
                -- , NonEmpty (FaceIx (PlanarGraph w s v e f), e)
                , [_]
                )
    fromFace fi rawFace = (fi, rawFace^.faceDataVal.fData, boundaryDarts)
      where
        boundaryDarts = case rawFace^.faceIdx of
          Nothing          -&gt; []
          Just (c,localFi) -&gt; []
          -- TODO; some fold over the holes + the outer boundary

-}</span><span>
</span><span id="line-598"></span></pre></body></html>